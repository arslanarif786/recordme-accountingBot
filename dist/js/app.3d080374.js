(function(){var t={6700:function(e,t,s){var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=6700},6948:function(t,s,a){"use strict";var o={};a.r(o),a.d(o,{auth:function(){return $d},ticket:function(){return Rd},user:function(){return qd},xeroForm:function(){return Kd}});var i=a(144),n=a(998),r=a(3059),l=function(){var e=this,t=e._self._c;return t(n.Z,[t("audio",{attrs:{id:"myAudioClient"}},[t("source",{attrs:{src:e.soundClient,type:"audio/ogg"}}),t("source",{attrs:{src:e.soundClient,type:"audio/mpeg"}}),e._v(" Your browser does not support the audio element. ")]),t("audio",{attrs:{id:"myAudioAccountant"}},[t("source",{attrs:{src:e.soundAccountant,type:"audio/ogg"}}),t("source",{attrs:{src:e.soundAccountant,type:"audio/mpeg"}}),e._v(" Your browser does not support the audio element. ")]),t(r.Z,[t("ul",e._l(e.messages,(function(s){return t("li",{key:s},[e._v(" "+e._s(s)+" ")])})),0),t("router-view")],1)],1)},c=[],d=a(6493);const u=new i.ZP;var p=u;a(7132);async function m(e){var t={apiKey:"AIzaSyDIhAKJkCDUpqyecAEZc3XscAfu_tGDZlE",authDomain:"accountingbot-3b1a3.firebaseapp.com",projectId:"accountingbot-3b1a3",storageBucket:"accountingbot-3b1a3.appspot.com",messagingSenderId:"462698867283",appId:"1:462698867283:web:e4729b62f9b05180deb4a6",measurementId:"G-DM9LK7FFGN"};d.Z.initializeApp(t);const s=d.Z.messaging();s.requestPermission(),s.getToken({vapidKey:"BJJPRA_1UdROBLcx7T_0He7rqqha9-h-qt5-tPKY2Cvos3lCuDe-1eTTQZktRZMMSIcaoAInq2WwCtMU4zqM1ms"}).then((e=>{e?localStorage.setItem("firebaseToken",e):console.log("No registration token  . Request permission to generate one.")})).catch((e=>{console.log("An error occurred while retrieving token. ",e)})),s.onMessage((async function(e){try{let{title:t,body:s}=e.notification;s=JSON.parse(s);const{auth:a}=JSON.parse(await localStorage.getItem("vuex"));a.authToken&&a.workspaces.filter((e=>e.workspace_id==s.workspace_id)).length}catch(t){console.log("error",t.message)}}))}var h=a(7132),g=a.p+"media/notification1.b51e67af.wav",f=a(629),k=a(9367),y=a(9669),v=a.n(y),C=a(8345),x=a(4562),_=a(266),b=a(1713),w=a(7808),T=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t(b.Z,[t(_.Z,{staticClass:"hidden-sm-and-down",attrs:{cols:"5"}},[t("span",{staticClass:"bg"})]),t(_.Z,{attrs:{md:"7",sm:"12"}},[t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"92vh"}},[t("div",[t("h1",{staticClass:"font-style-heading-auth mb-2"},[e._v("Login")]),e.resendEmailText?t("span",{staticClass:"font-style-paragraph pa-1",staticStyle:{cursor:"pointer",backgroundColor:"#f4d9d8"}},[e._v(" If you didn't get the email, "),t("a",{staticClass:"appColor--text",on:{click:function(t){return e.resendEmail()}}},[e._v("click here ")]),e._v("to resend email. ")]):e._e(),e.appUrl?t("span",{staticClass:"font-style-paragraph pa-1",staticStyle:{cursor:"pointer",backgroundColor:"#f4d9d8"}},[e._v(" This is not required domain, Kindly go to another portal ")]):e._e(),e._l(Object.keys(e.initials),(function(s,a){return t("div",{key:a,staticClass:"mt-3"},[t("label",{staticClass:"font-style-paragraph"},[e._v(e._s("email"==s?"Email":"Password"))]),t(w.Z,{staticClass:"d-flex appColor--text default-input",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"email"==s?"Enter your email here":"Enter your password here",type:"email"==s?"email":e.showPassword?"text":"password",rules:["password"===s?e.rules.min:e.rules.min1],"prepend-inner-icon":"email"==s?"mdi-email appColor--text":"mdi-lock appColor--text","append-icon":"password"===s?e.showPassword?"mdi-eye appColor--text":"mdi-eye-off appColor--text":""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.initials[s],callback:function(t){e.$set(e.initials,s,t)},expression:"initials[item]"}})],1)})),t("div",{staticClass:"d-flex justify-end"}),t(x.Z,{staticClass:"mt-6 white--text text-capitalize",attrs:{block:"",color:"appColor",depressed:"",loading:e.loader},on:{click:function(t){return e.login()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}}},[e._v(" Login ")])],2)]),t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"8vh"}},[t("p",{staticClass:"font-style-paragraph"},[e._v(" Privacy Policy ")]),t("p",{staticClass:"font-style-paragraph pl-16"},[e._v(" Terms of Service")])])])],1)],1)},Z=[],A=a(4324),S=a(9258),I=function(){var e=this,t=e._self._c;return t(S.Z,{staticClass:"font-style-paragraph",attrs:{top:"",right:"",timeout:"4000",color:e.type,elevation:"1"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v(" "+e._s(e.text)+" "),t(A.Z,{staticClass:"float-end",on:{click:function(t){e.show=!1}}},[e._v(" mdi-close ")])],1)},D=[],$={name:"Snackbar",data(){return{show:!1,text:"",type:""}},mounted(){p.$on("show-snackbar",(e=>{this.text=e.text,this.type=e.type,this.show=!0}))}},F=$,P=a(1001),E=(0,P.Z)(F,I,D,!1,null,"2f9138be",null),U=E.exports,j={name:"Login",components:{SnackBar:U},data:()=>({initials:{email:"",password:""},resendEmailText:!1,appUrl:!1,loader:!1,dashboardPermission:null,items:[],showPassword:!1,isPasswordVisible:!1,rules:{min:e=>e.length>=8||"Min 8 characters",min1:e=>/.+@.+/.test(e)||"E-mail must be valid"}}),computed:{filterItem(){return this.items.filter((e=>0!==Object.keys(e).length))}},created(){},methods:{login(){if(this.loader=!0,!this.initials.email||!this.initials.password)return this.error("Fill the required fields properly");var e=JSON.parse(JSON.stringify(this.initials));e["firebaseToken"]=localStorage.getItem("firebaseToken"),this.$store.dispatch("auth/login",e).then((async e=>{this.loader=!1;let t=this.$store.getters["auth/getUserRole"];"superadmin"==t?this.$router.push({path:"accountants"}):await this.$store.dispatch("auth/getWorkspacesForSpecificUser",{ascSort:!0})})).catch((e=>{"Please verify your email first!"===e&&(this.resendEmailText=!0),"Nor client not employee"===e&&(this.appUrl=!0),this.error(e)}))},showPasswordFunction(e){"password"===this.initials?this.initials[e].type="text":"text"===this.initials[e].type&&(this.initials[e].type="password")},error(e){p.$emit("show-snackbar",{text:e,type:"error"}),this.loader=!1},resendEmail(){this.$store.dispatch("auth/resendEmail",this.initials.email).then((e=>{p.$emit("show-snackbar",{text:"Email has been sent",type:"success"}),this.resendEmailText=!1})).catch((e=>{let t=e.message;this.error(t)}))}},mounted(){if(localStorage.getItem("response")){const e=JSON.parse(localStorage.getItem("response"));p.$emit("show-snackbar",{text:e.val,type:e.type}),localStorage.removeItem("response")}}},R=j,B=(0,P.Z)(R,T,Z,!1,null,"789c750f",null),z=B.exports,N=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t(b.Z,[t(_.Z,{staticClass:"hidden-sm-and-down",attrs:{cols:"5"}},[t("span",{staticClass:"bg"})]),t(_.Z,{attrs:{md:"7",sm:"12"}},[t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"92vh"}},[t("div",[t("h1",{staticClass:"font-style-heading-auth mb-2"},[e._v("Forgot Password")]),t("label",{staticClass:"font-style-paragraph"},[e._v("Email")]),t(w.Z,{staticClass:"d-flex appColor--text default-input",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Enter your email here",type:"email","prepend-inner-icon":"mdi-email appColor--text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(x.Z,{staticClass:"mt-6 white--text text-capitalize",attrs:{block:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.sendEmail()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendEmail()}}},[e._v(" Forgot Password ")])],1)]),t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"8vh"}},[t("p",{staticClass:"font-style-paragraph"},[e._v(" Privacy Policy ")]),t("p",{staticClass:"font-style-paragraph pl-16"},[e._v(" Terms of Service")])])])],1)],1)},W=[],O={name:"ForgotPassword",components:{SnackBar:U},data:()=>({email:"",loader:!1}),computed:{},methods:{sendEmail(){this.loader=!0,this.email||(p.$emit("show-snackbar",{text:"Fields can not be empty",type:"error"}),this.loader=!1),this.$store.dispatch("auth/forgotPassword",{email:this.email}).then((e=>{p.$emit("show-snackbar",{text:"Email has been sent , Kindly check ",type:"success"}),this.loader=!1})).catch((e=>{let t=e.message;p.$emit("show-snackbar",{text:t,type:"error"}),this.loader=!1}))}}},q=O,L=(0,P.Z)(q,N,W,!1,null,"2ec8adca",null),M=(L.exports,function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t(b.Z,[t(_.Z,{staticClass:"hidden-sm-and-down",attrs:{cols:"5"}},[t("span",{staticClass:"bg"})]),t(_.Z,{attrs:{md:"7",sm:"12"}},[t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"92vh"}},[t("div",[t("h1",{staticClass:"font-style-heading-auth mb-2"},[e._v("Set Password")]),e._l(Object.keys(e.initials),(function(s,a){return t("div",{key:a,staticClass:"mt-3"},[t("label",{staticClass:"font-style-paragraph"},[e._v(e._s("password"==s?"Password":"Confirm Password"))]),t(w.Z,{staticClass:"d-flex appColor--text default-input",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"password"==s?"Enter your Password here":"Enter your Confirm Password here",type:"password",rules:[e.rules.min],"prepend-inner-icon":"mdi-lock appColor--text"},model:{value:e.initials[s],callback:function(t){e.$set(e.initials,s,t)},expression:"initials[item]"}})],1)})),t(x.Z,{staticClass:"mt-6 white--text text-capitalize",attrs:{block:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.setPassword()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setPassword()}}},[e._v(" Set Password ")])],2)]),t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"8vh"}},[t("p",{staticClass:"font-style-paragraph"},[e._v(" Privacy Policy ")]),t("p",{staticClass:"font-style-paragraph pl-16"},[e._v(" Terms of Service")])])])],1)],1)}),H=[],X={name:"ChangePassword",components:{SnackBar:U},data:()=>({initials:{password:"",confirmPassword:""},loader:!1,dashboardPermission:null,items:[],showPassword:!1,isPasswordVisible:!1,rules:{min:e=>e.length>=8||"Min 8 characters",min1:e=>/.+@.+/.test(e)||"E-mail must be valid"},token:""}),computed:{},methods:{setPassword(){return this.loader=!0,this.initials.password.trim()&&this.initials.confirmPassword.trim()?this.initials.password!==this.initials.confirmPassword?this.error("Password's dont match"):void this.$store.dispatch("auth/setPassword",{token:this.token,newPassword:this.initials.password,verifyPassword:this.initials.password}).then((e=>{p.$emit("show-snackbar",{text:"Password has been reset, Login again",type:"success"}),this.loader=!1})).catch((e=>{let t=e.response.data.message;p.$emit("show-snackbar",{text:t,type:"error"}),this.loader=!1})):this.error("Some Fields are Empty")},error(e){p.$emit("show-snackbar",{text:e,type:"error"}),this.loader=!1}},mounted(){this.$route.query.token||this.$router.push("/login"),this.token=this.$route.query.token}},V=X,K=(0,P.Z)(V,M,H,!1,null,"08429981",null),Y=(K.exports,function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t(b.Z,[t(_.Z,{staticClass:"hidden-sm-and-down",attrs:{cols:"5"}},[t("span",{staticClass:"bg"})]),t(_.Z,{attrs:{md:"7",sm:"12"}},[t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"92vh"}},[e.successResponse?t("div",[t("h1",{staticClass:"font-style-heading mb-2"},[e._v("Verify Email")]),t("div",{staticClass:"d-flex inline"},[t("p",{staticClass:"font-style-paragraph"},[e._v('Kindly verify your Email. We have send a verification Email to "'+e._s(e.model.email)+'"')])]),t(x.Z,{staticClass:"mt-6 white--text text-capitalize",attrs:{block:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.$router.push("/login")}}},[e._v(" Back to Login ")]),t("div",{staticClass:"d-flex justify-end"},[t("p",{staticClass:"font-style-paragraph appColor--text pt-2",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.resendEmail()}}},[e._v("Resend Email ")])])],1):t("div",[t("h1",{staticClass:"font-style-heading-auth mb-2"},[e._v("SignUp")]),t("div",{staticClass:"d-flex inline"},[t("p",{staticClass:"font-style-paragraph"},[e._v("Already have an account?")]),t("a",{staticClass:"font-style-paragraph appColor--text pl-2",attrs:{href:"/login"}},[e._v("Login ")])]),e._l(e.initials,(function(s,a){return t("div",{key:a,staticClass:"mt-3"},[t("label",{staticClass:"font-style-paragraph"},[e._v(e._s(s.label))]),t(w.Z,{staticClass:"d-flex appColor--text default-input",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:s.placeholder,type:s.type,rules:["password"===s.type?e.rules.min:e.rules.min1],"prepend-inner-icon":s.icon,"append-icon":"password"===s.key||"confirmPassword"===s.key?"text"===s.type?"mdi-eye appColor--text":"mdi-eye-off appColor--text":""},on:{"click:append":function(t){return e.showPasswordFunction(a)}},model:{value:e.model[s.key],callback:function(t){e.$set(e.model,s.key,t)},expression:"model[item.key]"}})],1)})),t(x.Z,{staticClass:"mt-6 white--text text-capitalize",attrs:{block:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.signUp()}}},[e._v(" Create an Account ")])],2)]),t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"8vh"}},[t("p",{staticClass:"font-style-paragraph"},[e._v("Privacy Policy")]),t("p",{staticClass:"font-style-paragraph pl-16"},[e._v("Terms of Service")])])])],1)],1)}),Q=[],G={name:"SignUp",components:{SnackBar:U},data:()=>({initials:[{key:"firstName",label:"First Name",placeholder:"Enter your First Name here",type:"text",icon:"mdi-account appColor--text"},{key:"lastName",label:"Last Name",placeholder:"Enter your Last Name here",type:"text",icon:"mdi-account appColor--text"},{key:"email",label:"Email",placeholder:"Enter your Email here",type:"email",icon:"mdi-email appColor--text"},{key:"password",label:"Password",placeholder:"Enter your Password here",type:"password",icon:"mdi-lock appColor--text"},{key:"confirmPassword",label:"Confirm Password",placeholder:"Enter your confirm Password here",type:"password",icon:"mdi-lock appColor--text"}],model:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},successResponse:!1,loader:!1,dashboardPermission:null,items:[],showPassword:!1,isPasswordVisible:!1,rules:{min:e=>e.length>=8||"Min 8 characters",min1:e=>/.+@.+/.test(e)||"E-mail must be valid"}}),computed:{},methods:{showPasswordFunction(e){"password"===this.initials[e].type?this.initials[e].type="text":"text"===this.initials[e].type&&(this.initials[e].type="password")},signUp(){this.loader=!0;let e=Object.values(this.model).findIndex((e=>null===e.trim()||""===e.trim()));if(-1!==e)return this.error(`${this.initials[e].label} field is empty`);if(this.model.password!==this.model.confirmPassword)return this.error("Password's dont match");if(!this.validateEmail(this.model.email))return this.error("Email is not valid");if(this.model.password.length<=6)return this.error("Password length should be greater than 6.");const{firstName:t,lastName:s,password:a,email:o}=this.model,i={name:t+" "+s,password:a,email:o};this.$store.dispatch("auth/signUp",i).then((e=>{p.$emit("show-snackbar",{text:e.message,type:"success"}),this.loader=!1,this.successResponse=!0})).catch((e=>{this.error(JSON.parse(e.request.response).message),this.loader=!1}))},error(e){p.$emit("show-snackbar",{text:e,type:"error"}),this.loader=!1},validateEmail(e){var t=/\S+@\S+\.\S+/;return t.test(e)},resendEmail(){this.$store.dispatch("auth/resendEmail",this.model.email).then((e=>{p.$emit("show-snackbar",{text:"Email has been sent",type:"success"})})).catch((e=>{let t=e.message;this.error(t)}))}}},J=G,ee=(0,P.Z)(J,Y,Q,!1,null,"668f3761",null),te=(ee.exports,a(3305)),se=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t(b.Z,[t(_.Z,{staticClass:"hidden-sm-and-down",attrs:{cols:"5"}},[t("span",{staticClass:"bg"})]),t(_.Z,{attrs:{md:"7",sm:"12"}},[t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"92vh"}},[t("div",[t("h1",{staticClass:"font-style-heading-auth mb-2"},[e._v("Verifiying")]),t(te.Z,{staticClass:"ml-8 mt-7",attrs:{size:70,width:10,color:"appColor",indeterminate:""}})],1)]),t("div",{staticClass:"d-flex align-center justify-center",staticStyle:{"min-height":"8vh"}},[t("p",{staticClass:"font-style-paragraph"},[e._v("Privacy Policy")]),t("p",{staticClass:"font-style-paragraph pl-16"},[e._v("Terms of Service")])])])],1)],1)},ae=[];const oe={login:"/login",resendEmail:"/signup/resend-email/",signUp:"/signup/",selectWorkspace:"/workspace/by-id/",getUsers:"/user/",getWorkspaces:"/workspace/",getTickets:"/ticket",getWorkspacesForSpecificUser:"/user-workspaces/by-user-id",forgotPassword:"/forget-password",resetPassword:"/reset-password",getAllMessagesByTicketId:"message/by-ticket-id",updateFaq:"faq/",getFaq:"faq",getTasks:"ticket/by-workspace-id/",setTicketAsReadable:"ticket/mark-as-read",addUserWorkspaces:"/user-workspaces/assign-user",getworkspacesWithFilter:"workspace/by-filter/",getWorkspaces:"workspace/",createUser:"/user/",deleteUser:"/user/",unAssignWorkspace:"/user-workspaces/unassign-user",updateSupervisor:"/user/supervisor/update-profile",getInvoices:"xero/ocr/fileUrl",submitInvoices:"/xero/submit/",verification:"signup/verify",ListAllinWorkspace:"/user-workspaces/by-workspace-id-and-role",getTicketDetails:"ticket/by-id/",changeStatus:"ticket/update-status/",createTicket:"ticket/",ticketTypes:"/ticket-types/",createWorkspace:"workspace/",slack:"slack",sendMessage:"slack/add-message/",getActiveSupervisorsForSpecificWorkspace:"/user-workspaces/get-supervisors",rerouteTicketToSupervisor:"ticket/route-supervisor",getActiveAccountantsForSpecificWorkspace:"/user-workspaces/get-accountants",rerouteTicketToAccountant:"ticket/route-accountant",changeRequestType:"ticket/update-type/",updateUserType:"/user/update-type",updateWorkspaceType:"/workspace/update-type",getWorkspaceCategories:"xero/get-categories",getAccounts:"/xero/get-accounts",getItems:"/xero/get-items",getTaxRates:"/xero/get-tax-rates",getPaymentApprovalInvoices:"/xero/invoices",submitInvoicePayment:"/xero/invoices/payments",saveTicketDraft:"ticket/draft",getAccountItems:"xero/items-accounts",createAccountItems:"xero/create-items-accounts",updateAccountItems:"xero/update-item-account",createAccountsToXero:"xero/create-accounts-to-xero",mapAccountsTodb:"xero/map-xero-accounts-to-db",getItemsFromXero:"xero/fetch-items",createitemsToXero:"xero/create-item"};var ie=oe,ne={name:"Verification",components:{SnackBar:U},data:()=>({}),created(){const e=this.$route.params.token;e&&this.sendVerification(e)},methods:{sendVerification(e){v().get(`${ie.verification}?token=${e}`).then((e=>{this.reRoute(e.data.message,"success")})).catch((e=>{this.reRoute(JSON.parse(e.request.response).message,"error")}))},reRoute(e,t){localStorage.setItem("response",JSON.stringify({val:e,type:t})),this.$router.push("/login")}}},re=ne,le=(0,P.Z)(re,se,ae,!1,null,"ee82c72c",null),ce=(le.exports,function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),"supervisor"==e.role?t("div",[t("NavigationBar"),t("SupervisorMainPage")],1):t("div",[t("MainPage")],1)],1)}),de=[],ue=a(3423),pe=a(1154),me=a(5495),he=a(5808),ge=a(4525),fe=a(6021),ke=a(4611),ye=a(9709),ve=function(){var e=this,t=e._self._c;return t(ye.Z,{attrs:{app:"",id:"navigation"}},[t("a",{staticClass:"closebtn d-xs-flex d-sm-flex d-md-none",attrs:{href:"javascript:void(0)"},on:{click:e.closeDrawer}},[e._v("×")]),t(me.Z,{staticClass:"my-5 ml-14",attrs:{src:a(4429),contain:"",height:"40",width:"140"}}),t("span",{staticClass:"font-style-heading secondaryTextColor--text pl-4"},[e._v(e._s("superadmin"==e.role?"ROUTES":"COMPANIES"))]),t(he.Z,{attrs:{dense:"",nav:""}},["superadmin"==e.role?e._l(e.routes,(function(s,a){return t(ge.Z,{key:a,class:{"color-active":e.$route.path==s.route},on:{click:function(t){return e.navigate(s.route)}}},[t(ke.Z,{staticClass:"mr-2"},[e.$route.path==s.route?t(A.Z,{attrs:{color:"appColor"}},[e._v(e._s(s.icon))]):t(A.Z,{attrs:{color:"secondaryTextColor"}},[e._v(e._s(s.icon))])],1),t(fe.km,[t(fe.V9,{staticClass:"font-style-heading"},[e._v(e._s(e._f("truncate")(s.name))+" ")])],1)],1)})):e._l(e.workspaces,(function(s,a){return t(ge.Z,{key:a,class:{"color-active":s.workspaceId==e.currentWorkspace.workspaceId},attrs:{link:"",ripple:!1},on:{click:function(t){return e.updateCurrentWorkspace(s)}}},[t(ke.Z,{staticClass:"mr-2"},[t(ue.Z,{staticClass:"mb-1",attrs:{color:"appLightColor navBarTextColor--text",rounded:"",size:"26"}},[e._v(" "+e._s(s.workspaceName[0].toUpperCase()))])],1),t(fe.km,[t(fe.V9,[e._v(" "+e._s(e._f("truncate")(s.workspaceName)))])],1),s.isAccountingSoftConnected?t(pe.Z,{attrs:{value:"444",color:"red",content:"xero",inline:""}}):e._e()],1)}))],2)],1)},Ce=[],xe={name:"NavigationBarComponent",computed:{...(0,f.Se)({workspaces:"auth/getWorkspaces",currentWorkspace:"auth/getCurrentWorkspace",role:"auth/getUserRole"})},data(){return{routes:[{name:"ACCOUNTANTS",active:!1,icon:"mdi-account",route:"/accountants"},{name:"CLIENTS",active:!1,icon:"mdi-account",route:"/clients"},{name:"WORKSPACES",active:!1,icon:"mdi-office-building",route:"/workspaces"},{name:"TICKETS",active:!1,icon:"mdi-file",route:"/tickets"},{name:"SUPERVISOR",active:!1,icon:"mdi-account",route:"/supervisor"},{name:"ITEMS",active:!1,icon:"mdi-shopping",route:"/all-items"},{name:"CHART OF ACCOUNTS",active:!1,icon:"mdi-bank",route:"/account-items"}]}},methods:{async updateCurrentWorkspace(e){e.workspaceId!=this.currentWorkspace.workspaceId&&(p.$emit("update-loader",!0),this.$store.dispatch("auth/selectWorkspace",e).then((e=>{this.$store.dispatch("ticket/getTasks").then((e=>p.$emit("update-loader",!1)))})).catch((e=>console.log(e))))},navigate(e){this.$router.replace({path:e})},closeDrawer(){document.getElementById("navigation").style.visibility="hidden",document.getElementById("navigation").style.transform="translateX(0%)"}},mounted(){"superadmin"!==this.role&&this.$store.dispatch("auth/getWorkspacesForSpecificUser")}},_e=xe,be=(0,P.Z)(_e,ve,Ce,!1,null,"7c1e2850",null),we=be.exports,Te=function(){var e=this,t=e._self._c;return t("div",[t("AppBar"),t("AccountantPage")],1)},Ze=[],Ae=a(6843),Se=a(5550),Ie=a(4127),De=a(4568),$e=a(3687),Fe=function(){var e=this,t=e._self._c;return t(Ae.Z,{staticStyle:{"border-bottom":"1px solid #e0e0e0"},attrs:{app:"",color:"#f6f6f6",elevation:"0"}},["superadmin"===e.role?t(Se.Z,{staticClass:"drawer-icon d-xs-flex d-sm-flex d-md-none",on:{click:e.openDrawer}}):e._e(),"superadmin"===e.role?t("h1",{staticClass:"font-style-heading"},[e._v(" "+e._s(this.$route.path.substring(1).toUpperCase())+" ")]):"supervisor"===e.role&&e.currentWorkspace.workspaceName&&!["/supervisor-ticketpool"].includes(e.$route.path)?t("h1",{staticClass:"font-style-heading"},[e._v(" "+e._s(e.currentWorkspace.workspaceName)+" ")]):e._e(),t($e.Z),"accountant"===e.user.role||"supervisor"===e.user.role&&"/supervisor-ticketpool"===this.$route.path?t("div",[e.onlineStatusValue?t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"green",small:"",dense:""},on:{click:function(t){return e.statusUpdated()}}},[t(A.Z,{attrs:{"x-small":"",color:"green darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v("Online")])],1):t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"red",small:"",dense:""},on:{click:function(t){return e.statusUpdated()}}},[t(A.Z,{attrs:{"x-small":"",color:"red darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v("Offline")])],1)],1):"supervisor"===e.user.role&&"/supervisor-ticketpool"!==this.$route.path?t("div",[t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"appColor",small:"",dense:""},on:{click:function(t){return e.openSupervisorPool()}}},[t(A.Z,{attrs:{"x-small":"",color:"appColor darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v("Open Pool in new Window")])],1)],1):e._e(),t(ue.Z,{staticClass:"ma-2",attrs:{color:"appLightColor appColor--text",rounded:"",size:"31"}},[e._v(" "+e._s(e.user.name[0].toUpperCase())+" ")]),t("p",{staticClass:"font-style-paragraph mx-2"},[e._v(e._s(e.user.name))]),t(De.Z,{attrs:{left:"",bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(x.Z,e._g(e._b({staticClass:"mx-2",attrs:{icon:""}},"v-btn",a,!1),s),[t(A.Z,[e._v("mdi-arrow-down-drop-circle-outline")])],1)]}}])},[t(he.Z,e._l(e.dropDown,(function(s){return t(ge.Z,{key:s.id,on:{click:function(t){return e.dropDownFunctionalities(s.id)}}},[t(fe.V9,{staticClass:"font-style-paragraph mainTextColor--text"},[e._v(e._s(s.text))])],1)})),1)],1)],1)},Pe=[],Ee={name:"AppBarComponent",data(){return{dropDown:[{id:1,text:"Logout",path:this.$route.path}],userStatusInterval:null,channel:new BroadcastChannel("online-status")}},computed:{...(0,f.Se)({user:"auth/getUser",onlineStatus:"auth/getOnlineStatus",role:"auth/getUserRole",currentWorkspace:"auth/getCurrentWorkspace"}),onlineStatusValue:{get(){return this.onlineStatus},set(e){return e}}},created(){p.$on("change-user-status",(e=>{p.$emit("user-status-offline"),this.statusUpdated()})),Jd.on("disconnect",(()=>{1==this.onlineStatus&&(p.$emit("user-status-offline"),this.statusUpdated())}))},mounted(){this.channel.addEventListener("message",(e=>{location.origin===e.origin&&"superadmin"!==this.role&&this.$store.commit("auth/setOnlineStatus",e.data)})),!0===this.onlineStatusValue&&"superadmin"!==this.role&&Jd.emit("userConnected",this.user._id)},methods:{openSupervisorPool(){Jd.emit("userConnected",this.user._id),this.$store.commit("auth/setOnlineStatus",!0),window.open("/supervisor-ticketpool")},statusUpdated(){clearTimeout(this.userStatusInterval),!1===this.onlineStatusValue?("supervisor"===this.role&&window.open("/supervisor-ticketpool"),Jd.emit("userConnected",this.user._id),this.userStatusInterval=setTimeout((function(){p.$emit("user-status-online")}),1e3)):("supervisor"===this.role&&this.$router.push("/"),Jd.emit("userDisconnected",this.user._id)),this.$store.commit("auth/setOnlineStatus",!this.onlineStatusValue),this.channel.postMessage(this.onlineStatusValue)},dialogOpen(){p.$emit("open-online-status-dialog")},dropDownFunctionalities(e){1===e&&this.logout()},openDrawer(){document.getElementById("navigation").style.visibility="visible",document.getElementById("navigation").style.transform="translateX(0%)"},logout(){this.axios.get("user/log-out").then((e=>{console.log(e.data,"SUCCESS"),this.$store.commit("auth/logout"),this.$store.commit("ticket/logout"),this.$store.commit("user/logout"),this.$store.commit("xeroForm/logout"),this.$router.push("/login"),Jd.removeAllListeners(),window.location.reload()})).catch((e=>{console.log(e.response,"ERR")}))}},beforeDestroy(){this.channel.close()}},Ue=Ee,je=(0,P.Z)(Ue,Fe,Pe,!1,null,"544bc908",null),Re=je.exports,Be=function(){var e=this,t=e._self._c;return e.userOnline?t("div",[t("CompleteStatusDialog"),t("XeroFormDialog"),t("RerouteTicketDialog"),t("ChangeRequestType",{on:{"update-request-type":e.updateRequestType}}),1==e.step?t("Loader",{scopedSlots:e._u([{key:"text",fn:function(){return[e._v("Waiting for new ticket ...")]},proxy:!0}],null,!1,2214646758)}):2==e.step?t("NewTicketNotification",{attrs:{newTicketNotification:e.newTicketNotification,ticket:e.ticket},on:{"change-step":e.getTicketDetails}}):4==e.step?t("TicketComponent",{attrs:{ticket:e.ticket}}):e._e()],1):t("div",[t("Loader",{scopedSlots:e._u([{key:"text",fn:function(){return[e._v("Please change your status to online")]},proxy:!0}])})],1)},ze=[],Ne=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex justify-center align-end",staticStyle:{height:"50vh"}},[t(me.Z,{attrs:{src:a(9290),contain:"",height:"250",width:"250"}})],1),t("div",[t("p",{staticClass:"font-style-heading d-flex justify-center my-10"},[e._t("text")],2)])])},We=[],Oe={name:"index",components:{},data:()=>({}),watch:{},mounted(){},computed:{...(0,f.Se)({})},methods:{},created(){}},qe=Oe,Le=(0,P.Z)(qe,Ne,We,!1,null,"250fc48f",null),Me=Le.exports,He=a(4886),Xe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("TicketDetailsHeader",{attrs:{ticket:e.ticket},on:{closeDialog:function(t){return e.closeDialog(t)}}}),t("div",{on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[t(He.h7,{staticClass:"pt-0"},[t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{ref:"chatBox",staticClass:"overflow-auto",staticStyle:{height:"55vh","max-height":"55vh"},attrs:{cols:"9",id:"chatBox"}},[t("ChatModule")],1),t(_.Z,{staticClass:"overflow-auto backgroundFAQColor",staticStyle:{height:"55vh","max-height":"55vh"},attrs:{cols:"3"}},[t("LogsandFAQModule",{attrs:{ticket:e.ticket}})],1)],1)],1),t("TicketDetailsFooter",{attrs:{ticket:e.ticket},on:{"move-div-to-bottom":e.moveDivToBottom}})],1)],1)},Ve=[],Ke=a(3924),Ye=a(2165),Qe=a(7771),Ge=a(5085),Je=function(){var e=this,t=e._self._c;return t("div",[t(Qe.Z,{attrs:{"fixed-tabs":"","background-color":"appColor",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(Ke.Z,{staticClass:"font-style-paragraph",attrs:{href:"#tab-1"}},[e._v(" FAQ ")]),t(Ke.Z,{staticClass:"font-style-paragraph",attrs:{href:"#tab-2"}},[e._v(" Logs ")]),t(Ke.Z,{staticClass:"font-style-paragraph",attrs:{href:"#tab-3"}},[e._v(" Notes ")])],1),t(Ge.Z,{staticClass:"backgroundFAQColor",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(3,(function(s){return t(Ye.Z,{key:s,attrs:{value:"tab-"+s}},[1===s?t("div",{staticClass:"font-style-paragraph"},[t("FAQ")],1):e._e(),2===s?t("div",{staticClass:"font-style-paragraph"},[t("LogsModule",{attrs:{ticket:e.ticket}})],1):e._e(),3===s?t("div",{staticClass:"font-style-paragraph"},[t("NotesModule",{attrs:{ticket:e.ticket}})],1):e._e()])})),1)],1)},et=[],tt=a(8893),st=a(2082),at=function(){var e=this,t=e._self._c;return t("div",[e.ticket.logs?.length>0?t(tt.Z,{attrs:{small:""}},e._l(e.ticket.logs,(function(s,a){return t(st.Z,{key:a,attrs:{dense:"",small:"",right:""},scopedSlots:e._u([{key:"opposite",fn:function(){return[t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(e._s(e._f("formatTime")(s.createdAt)))]),t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt)))])]},proxy:!0}],null,!0)},[s.action?"change_status"==s.action?t("div",["Created"==s.status?t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket created by "),t("b",[e._v(e._s(s.userId?.name))])]):"Assign"==s.status?t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket Assigned to "),t("b",[e._v(e._s(s.userId?.name))])]):t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket marked as "),t("b",[e._v(e._s(s.status))]),e._v(" by "),t("b",[e._v(e._s(s.userId?.name))])])]):"route"==s.action||"Route"==s.action?t("div",[t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket rerouted to "),t("b",[e._v(e._s(s?.toUserId?.name?s?.toUserId?.name:"Anyone"))]),e._v(" by "),t("b",[e._v(e._s(s.userId?.name))])])]):"change_request_type"==s.action?t("div",[t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[t("b",[e._v(e._s(s.userId?.name))]),e._v(" changed Request Type from "),t("b",[e._v(e._s(s?.data?.oldType))]),e._v(" to "),t("b",[e._v(e._s(s?.data?.newType))])])]):"review"==s.action||"Review"==s.action?t("div",[t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[t("b",[e._v(e._s(s.userId?.name))]),e._v(" requested for Review ticket.")])]):e._e():t("div",["Created"==s.status?t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket created by "),t("b",[e._v(e._s(s.userId?.name))])]):"Assign"==s.status?t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket Assigned to "),t("b",[e._v(e._s(s.userId?.name))])]):t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Ticket marked as "),t("b",[e._v(e._s(s.status))]),e._v(" by "),t("b",[e._v(e._s(s.userId?.name))])])])])})),1):t("div",{staticClass:"d-flex justify-center mt-4"},[t("h4",{staticClass:"font-style-paragraph"},[e._v("No logs have been genertated")])])],1)},ot=[],it=a(381),nt=a.n(it),rt={name:"index",components:{},props:{ticket:Object},data(){return{}},mounted(){},created(){},computed:{...(0,f.Se)({})},methods:{}},lt=rt,ct=(0,P.Z)(lt,at,ot,!1,null,"5e4c1eeb",null),dt=ct.exports,ut=function(){var e=this,t=e._self._c;return t("div",[e.ticket?.note?.length>0?t("div",{staticClass:"mt-4"},e._l(e.ticket.note,(function(e,s){return t("div",{key:s,staticClass:"my-2 rounded-lg appLightColor"},[t("ShowDetails",{attrs:{heading:"From",text:e.from}}),t("ShowDetails",{attrs:{heading:"To",text:e.to}}),t("ShowDetails",{attrs:{heading:"Note",text:e.note}}),t("ShowDetails",{attrs:{heading:"Time",date:e.time}})],1)})),0):t("div",{staticClass:"d-flex mt-4"},[t("h4",{staticClass:"font-style-paragraph"},[e._v("No notes have been genertated")])])])},pt=[],mt=function(){var e=this,t=e._self._c;return t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"ma-0 pa-0",attrs:{cols:"2"}},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" "+e._s(e.heading)+" ")])]),t(_.Z,{staticClass:"ma-0 pa-0 text-left",attrs:{cols:"10"}},[e.text?t("div",[e.text.length>100&&e.textCheck?t("p",{staticClass:"font-style-paragraph pr-2",staticStyle:{"word-break":"break-all"}},[e._v(" "+e._s(e.text.slice(0,100))+" "),t("span",{staticClass:"font-style-paragraph pr-2 blue--text",staticStyle:{cursor:"pointer"},on:{click:function(t){e.textCheck=!1}}},[e._v("See more ...")])]):t("p",{staticClass:"font-style-paragraph pr-2",staticStyle:{"word-break":"break-all"}},[e._v(" "+e._s(e.text)+" "),e.text.length>100?t("span",{staticClass:"font-style-paragraph pr-2 blue--text",staticStyle:{cursor:"pointer"},on:{click:function(t){e.textCheck=!0}}},[e._v("See less ...")]):e._e()])]):e.date?t("p",{staticClass:"font-style-paragraph pr-2"},[e._v(" "+e._s(e._f("formatTime")(e.date))+", "+e._s(e._f("formatDate")(e.date))+". ")]):e._e()])],1)},ht=[],gt={name:"index",components:{},props:{heading:String,text:String,date:String},data(){return{textCheck:!0}},mounted(){},created(){},computed:{...(0,f.Se)({})},methods:{}},ft=gt,kt=(0,P.Z)(ft,mt,ht,!1,null,"f256a360",null),yt=kt.exports,vt={name:"index",components:{ShowDetails:yt},props:{ticket:Object},data(){return{}},mounted(){},created(){},computed:{...(0,f.Se)({})},methods:{}},Ct=vt,xt=(0,P.Z)(Ct,ut,pt,!1,null,"4169faf2",null),_t=xt.exports,bt=a(255),wt=a(2348),Tt=a(400),Zt=a(1214),At=function(){var e=this,t=e._self._c;return t("div",[t("EditCustomDefinedMessages"),t(Zt.Z,{attrs:{flat:""}},e._l(e.items,(function(s,a){return t(bt.Z,{key:a,staticClass:"backgroundFAQColor"},[t(Tt.Z,{staticClass:"font-style-paragraph"},[e._v(" "+e._s(s.type)+" ")]),t(wt.Z,e._l(s.questions,(function(s,a){return t("div",{key:a,staticClass:"text-hover text-left",on:{click:function(t){return e.sendMessage(s)}}},[t("span",{staticClass:"text-caption font-style-paragraph"},[e._v(e._s(a+1)+". "+e._s(s))])])})),0)],1)})),1)],1)},St=[],It=a(4145),Dt=a(4061),$t=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center"},[e._v(" Update FAQ ")]),t(He.ZB,[e._v(" Note : Updated value will be changed permanently. ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t(w.Z,{attrs:{dense:"",flat:"","full-width":"","hide-details":"",color:"#7C7C7C"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateField()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0))return null;e.dialog=!1}]},model:{value:e.questionText,callback:function(t){e.questionText=t},expression:"questionText"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:"","text-capitalize":""},on:{click:function(t){e.dialog=!1}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:""},on:{click:function(t){return e.updateField()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-content-save ")])],1)],1)],1)],1)],1)},Ft=[],Pt={name:"EditCustomDefinedMessages",data(){return{dialog:!1,index:"",details:"",questionText:""}},mounted(){p.$on("change-questionnare",(e=>{this.dialog=!0,this.index=e.index,this.questionText=e.details.questions[this.index],this.details=e.details}))},created(){},methods:{updateField(){let e=this.questionText.trim();e?(this.details.questions[this.index]=this.questionText,this.$store.dispatch("ticket/updateFaq",this.details),this.dialog=!1):p.$emit("show-snackbar",{text:"Input Field cannot be empty",type:"error"})}}},Et=Pt,Ut=(0,P.Z)(Et,$t,Ft,!1,null,"53b54741",null),jt=Ut.exports,Rt={components:{EditCustomDefinedMessages:jt},name:"PreDefinedComponent",data(){return{dialog:!1,inputField:""}},mounted(){this.$store.dispatch("ticket/getFaq")},computed:{...(0,f.Se)({items:"ticket/getFaq"})},methods:{sendMessage(e){p.$emit("predefined-message",e)},changeQuestion(e,t){let s={index:t,details:e};p.$emit("change-questionnare",s)}}},Bt=Rt,zt=(0,P.Z)(Bt,At,St,!1,null,"71b2a7f2",null),Nt=zt.exports,Wt={name:"index",components:{LogsModule:dt,FAQ:Nt,NotesModule:_t},props:{ticket:Object},data(){return{tab:null,text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}},mounted(){},created(){},computed:{...(0,f.Se)({})},methods:{}},Ot=Wt,qt=(0,P.Z)(Ot,Je,et,!1,null,"27ad5d82",null),Lt=qt.exports,Mt=function(){var e=this,t=e._self._c;return t("div",[e.updatedMessages&&e.updatedMessages.length?e._l(e.updatedMessages,(function(s,a){return t("div",{key:a,class:`index-${a}`},[s.newDate?t("div",{staticClass:"d-flex justify-center"},[t(Ie.Z,{attrs:{color:"appLightColor font-style-paragraph"}},[e._v(e._s(e._f("formatDate")(s.createdAt)))])],1):e._e(),"slack"===e.currentWorkspace.source?t("div",{staticClass:"d-flex my-2",class:{"justify-end text-left ml-12":"User"==e.comment.commentType,"justify-start text-left mr-12":"User"!=e.comment.commentType}},[t("div",{staticClass:"pa-2",class:{backgroundLightColor:"User"==e.comment.commentType,appLightColor:"User"!=e.comment.commentType},staticStyle:{"border-radius":"10px"}},[t("MessageModule",{attrs:{message:s},on:{openPrivateUrl:function(t){return e.openPrivateUrl(t)}}})],1)]):e._e(),"app"===s.type&&"accountant"===e.user.role?t("div",{staticClass:"d-flex my-2",class:{"justify-end text-left ml-12":s.userRole==e.user.role,"justify-start text-left mr-12":s.userRole!=e.user.role}},[t("div",{staticClass:"pa-2",class:{backgroundLightColor:s.userRole==e.user.role,appLightColor:s.userRole!=e.user.role},staticStyle:{"border-radius":"10px"}},[t("MessageModule",{attrs:{message:s},on:{openPrivateUrl:function(t){return e.openPrivateUrl(t)}}})],1)]):e._e(),"app"===s.type&&"supervisor"===e.user.role?t("div",{staticClass:"d-flex my-2",class:{"justify-end text-left ml-12":!1===["client","employee"].includes(s.userRole),"justify-start text-left mr-12":!0===["client","employee"].includes(s.userRole)}},[t("div",{staticClass:"pa-2",class:{backgroundLightColor:!1===["client","employee"].includes(s.userRole),appLightColor:!0===["client","employee"].includes(s.userRole)},staticStyle:{"border-radius":"10px"}},[t("MessageModule",{attrs:{message:s},on:{openPrivateUrl:function(t){return e.openPrivateUrl(t)}}})],1)]):e._e(),"app"===s.type&&"superadmin"===e.user.role?t("div",{staticClass:"d-flex my-2",class:{"justify-end text-left ml-12":!1===["client","employee"].includes(s.userRole),"justify-start text-left mr-12":!0===["client","employee"].includes(s.userRole)}},[t("div",{staticClass:"pa-2",class:{backgroundLightColor:!1===["client","employee"].includes(s.userRole),appLightColor:!0===["client","employee"].includes(s.userRole)},staticStyle:{"border-radius":"10px"}},[t("MessageModule",{attrs:{message:s},on:{openPrivateUrl:function(t){return e.openPrivateUrl(t)}}})],1)]):e._e()])})):[t("div",{staticClass:"font-style-paragraph"},[e._v("No comments are added yet")])]],2)},Ht=[],Xt=function(){var e=this,t=e._self._c;return t("div",[e.message.file&&e.message.fileUrl.includes("audio.wav")?t("div",[t("audio",{attrs:{controls:""}},[t("source",{attrs:{src:e.url}}),e._v(" Your browser does not support the audio element. ")])]):t("p",{staticClass:"message-comment font-style-paragraph",staticStyle:{"white-space":"pre-line"}},[e._v(" "+e._s(e.message.text)+" "),t("span",{staticClass:"text-caption d-block my-1 text-end"},[e.message.fileUrl?[t("p",{staticClass:"appColor--text message-comment font-style-paragraph",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.openPrivateUrl(e.message.fileUrl)}}},[e._v(" "+e._s(e.message.file.originalname?e.message.file.originalname:"Attachment")+" ")])]:e._e(),e._v(" "+e._s(e._f("formatTime")(e.message.createdAt))+" ")],2)])])},Vt=[],Kt=(a(2801),a(8675),a(7380),a(1118),{name:"MessageModule",data(){return{url:""}},props:{message:Object},mounted(){if(this.message.file&&this.message.fileUrl.includes("audio.wav")){const e=async()=>{this.url=await this.b64toBlob(this.message.file),this.url=window.URL.createObjectURL(this.url),console.log(this.url)};e()}},computed:{},methods:{openPrivateUrl(e){this.$emit("openPrivateUrl",e)},async b64toBlob(e,t="",s=512){const a=atob(e),o=[];for(let n=0;n<a.length;n+=s){const e=a.slice(n,n+s),t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);const i=new Uint8Array(t);o.push(i)}const i=new Blob(o,{type:t});return i}}}),Yt=Kt,Qt=(0,P.Z)(Yt,Xt,Vt,!1,null,"276e9910",null),Gt=Qt.exports,Jt={name:"ChatModule",components:{MessageModule:Gt},data(){return{}},mounted(){},created(){},computed:{...(0,f.Se)({messages:"ticket/getMessages",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace"}),updatedMessages(){let e=this.messages;return e=e.map(((e,t,s)=>{if(0==t)return e["newDate"]=!0,e;const a=nt()(e.createdAt).format("YYYY MM DD"),o=nt()(s[t-1].createdAt).format("YYYY MM DD");return e["newDate"]=!0,a===o&&(e["newDate"]=!1),e})),e}},methods:{openPrivateUrl(e){var t={token:"slack"===this.currentWorkspace.source?this.currentWorkspace.botToken:"test-string"};t["file"]=e.search("files/")>-1?e:e.split("https://files.slack.com/")[1];var s={method:"post",url:ie.slack,data:t,responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}};v()(s).then((function(t){let s=new Blob([t.data],{type:t.headers["content-type"]});var a=new FileReader;a.readAsDataURL(s),a.onloadend=function(){var e=a.result;this.imageUrl=e};let o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=e.split("/")[e.split("/").length-1],o.click(),o.remove()})).catch((function(e){console.log(e)}))}},beforeCreate(){this.$store.commit("ticket/setMessages",[])}},es=Jt,ts=(0,P.Z)(es,Mt,Ht,!1,null,"26061f6c",null),ss=ts.exports,as=a(9223),os=a(1346),is=function(){var e=this,t=e._self._c;return t("div",[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" Ticket Details : #"+e._s(e.ticket.ticketNo)+" "),t($e.Z),"superadmin"===e.role||"supervisor"===e.role&&e.crossBtn?t("div",[t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1):t("span",["accountant"===e.role?t("Button",{staticClass:"mr-2",on:{"button-clicked":function(t){return e.changeRequestType()}},scopedSlots:e._u([{key:"buttonHeading",fn:function(){return[e._v(" Change Request Type ")]},proxy:!0}],null,!1,3043514988)}):e._e(),t("Button",{staticClass:"mr-2",on:{"button-clicked":function(t){return e.rerouteTicket()}},scopedSlots:e._u([{key:"buttonHeading",fn:function(){return[e._v(" Route Ticket ")]},proxy:!0}])}),t("Button",{staticClass:"mr-2",on:{"button-clicked":function(t){return e.markComplete()}},scopedSlots:e._u([{key:"buttonHeading",fn:function(){return[e._v(" Change Status ")]},proxy:!0}])})],1)],1),t(as.Z),t(He.ZB,{staticClass:"pt-3"},[t(b.Z,{attrs:{justify:"center"}},[t(_.Z,{attrs:{cols:"6"}},[t("div",[t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Ticket ID : ")]),t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v(" "+e._s(e.ticket.ticketNo)+" ")])]),"supervisor"===e.role&&e.crossBtn?t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Workspace : ")]),t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v(" "+e._s(e.currentWorkspace.workspaceName)+" ")])]):"superadmin"===e.role?t("div",{staticClass:"d-flex"}):t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Workspace : ")]),t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v(" "+e._s(e.ticket.workspaceName)+" ")])]),t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Created At : ")]),t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v(" "+e._s(e._f("formatTime")(e.ticket.createdAt))+", "+e._s(e._f("formatDate")(e.ticket.createdAt))+" ")])]),""!=e.ticket.message?t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Message : ")]),t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("p",e._g(e._b({staticClass:"pl-2 font-style-paragraph"},"p",a,!1),s),[e._v(" "+e._s(e._f("truncate")(e.ticket.message,54))+" ")])]}}],null,!1,4222627052)},[t("span",[e._v(e._s(e.ticket.message))])])],1):e._e()])]),t(_.Z,{attrs:{cols:"6"}},[t("div",[t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Status : ")]),"supervisor"===e.role&&e.crossBtn||"superadmin"===e.role?t(Ie.Z,{class:"Complete"!==e.ticket.status?"pendingColor--text":"completedColor--text",attrs:{color:"Complete"!==e.ticket.status?"pendingBackGroundColor":"completedBackgroundColor",small:""}},[e._v(e._s(e.ticket.status))]):t(Ie.Z,{staticClass:"ml-2 font-style-paragraph",attrs:{small:"",color:"pendingBackGroundColor pendingColor--text"}},[e._v("In Progress")])],1),t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Request Type : ")]),t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v(" "+e._s(e.ticket.requestType)+" ")])]),t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Completed On : ")]),"superadmin"===e.role&&"Complete"==e.ticket.status||"supervisor"===e.role&&e.crossBtn&&"Complete"==e.ticket.status?t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v(" "+e._s(e._f("formatTime")(e.ticket.statusLastUpdatedAt))+", "+e._s(e._f("formatDate")(e.ticket.statusLastUpdatedAt))+" ")]):t("p",{staticClass:"pl-2 font-style-paragraph"},[e._v("-")])]),e.ticket.attachmentUrl?t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Attachment : ")]),t(A.Z,{staticClass:"ml-2 mb-2",attrs:{color:"appColor"},on:{click:function(t){return e.openPrivateURL(e.ticket.attachmentUrl)}}},[e._v(" mdi-cloud-download-outline")])],1):e._e(),"superadmin"!==e.role?t("div",{staticClass:"d-flex"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Xero Form: ")]),!0===e.ticket?.xeroSubmission?t(A.Z,{staticClass:"ml-2 mb-2",attrs:{color:"appColor"},on:{click:function(t){return e.openXeroFormFromDraft(e.ticket.attachmentUrl)}}},[e._v(" mdi-pencil-box-outline")]):t(A.Z,{staticClass:"ml-2 mb-2",attrs:{color:"appColor"},on:{click:function(t){return e.openXeroForm(e.ticket.attachmentUrl)}}},[e._v(" mdi-link-box-outline")])],1):e._e()])])],1)],1),t(as.Z)],1)},ns=[],rs=function(){var e=this,t=e._self._c;return t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor",loading:e.loader},on:{click:function(t){return e.buttonClicked()}}},[e._t("buttonHeading")],2)},ls=[],cs={name:"Button",props:{loader:Boolean},methods:{buttonClicked(){this.$emit("button-clicked")}}},ds=cs,us=(0,P.Z)(ds,rs,ls,!1,null,"7ada05da",null),ps=us.exports;const ms=async(e,t,s)=>{var a;await v().get(`${ie.getWorkspaceCategories}/${e.workspaceId}`,{headers:{Authorization:s.auth.authToken}}).then((e=>{a=e,Qd.commit("xeroForm/addCategories",e.data)})).catch((e=>{p.$emit("show-snackbar",{text:e.response.data.message,type:"error"})})),t["request_type"]=s.ticket.ticket.requestType,t["ticket_id"]=s.ticket.ticket.ticketId,t.invoices=t.invoices.map((e=>{if("string"===typeof e.date&&hs(e,"date"),"string"===typeof e.dueDate&&hs(e,"dueDate"),!e.lineItems){let t={description:"",unitAmount:"0",quantity:"0",taxAmount:"0",lineAmount:"0",disc:"0"};e["lineItems"]=[t]}return 0!=a.data.trackingCategories.length&&e.lineItems?e.lineItems=e?.lineItems.map((e=>{let t=a.data.trackingCategories.map((e=>({trackingCategoryID:e.trackingCategoryID,trackingOptionID:""})));return{...e,tracking:t,itemCode:"",accountCode:"",taxType:""}})):e.lineItems&&(e.lineItems=e?.lineItems.map((e=>({...e,itemCode:"",accountCode:"",taxType:""})))),e.type?{...e,status:"DRAFT"}:{...e,status:"DRAFT",type:"ACCREC",lineAmountTypes:"Exclusive"}}))};function hs(e,t){var s=e[t].split("-");"string"===typeof s[2]&&4==s[0].length&&2==s[1].length&&2==s[2].length?console.log("right type"):"string"===typeof s[2]&&2==s[0].length&&2==s[1].length&&4==s[2].length?e[t]=s.reverse().join("-"):(e[t]=null,e[`validation${t}`]=!0)}var gs={name:"TicketDetailsHeader",data(){return{crossBtn:!1,newInvoiceForm:{invoices:[{address:"",balanceDue:"",currencyCode:"",date:"",discount:"",dueDate:"",email:"",invoiceNumber:"",lineItems:[{description:"",disc:"0",lineAmount:"0",quantity:"0",taxAmount:"0",unitAmount:"0",itemCode:"",accountCode:"",taxType:""}],name:"",subTotal:"",totalTax:"",total:"",status:"",type:"ACCREC",lineAmountTypes:"Exclusive"}]}}},props:{ticket:Object},components:{Button:ps},created(){this.crossBtn="/supervisor-ticketpool"!==this.$route.path},methods:{async apiCallForCategories(){try{let e={method:"get",url:`${ie.getWorkspaceCategories}/${this.ticket.workspaceId}`,headers:{Authorization:this.token}},t=await v()(e);return void this.$store.commit("xeroForm/addCategories",t.data)}catch(e){p.$emit("show-snackbar",{text:e.response.data.message,type:"error"})}},async openXeroFormFromDraft(e){this.$store.commit("xeroForm/setWorkspaceId",this.ticket.workspaceId),this.$store.commit("xeroForm/addDraftCheck",!0),p.$emit("open-xero-form-dialog",this.ticket),e?this.$store.commit("xeroForm/setAttachementUrl",e):this.$store.commit("xeroForm/setAttachementUrl",""),this.$store.commit("ticket/setTicket",{request_type:this.ticket.requestType,ticket_id:this.ticket._id}),await this.apiCallForCategories(),this.$store.commit("xeroForm/addInvoices",this.ticket.draft)},async openXeroForm(e){if(this.ticket.draft)return this.openXeroFormFromDraft(e);this.$store.commit("ticket/setTicket",{request_type:this.ticket.requestType,ticket_id:this.ticket._id});const t={url:e,token:"slack"===this.currentWorkspace.source?this.currentWorkspace.botToken:void 0,workspaceId:this.ticket.workspaceId};e?(this.$store.commit("xeroForm/setAttachementUrl",e),this.$store.dispatch("xeroForm/getInvoices",t)):(this.$store.commit("xeroForm/setAttachementUrl",""),this.$store.dispatch("xeroForm/getInvoicesWithoutAttachment",{invoice:this.newInvoiceForm,data:t})),p.$emit("open-xero-form-dialog",this.ticket)},openPrivateURL(e){var t={token:"slack"===this.currentWorkspace.source?this.currentWorkspace.botToken:"test-string"};t["file"]=e.search("files/tickets")>-1?e:e.split("https://files.slack.com/")[1];var s={method:"post",url:ie.slack,data:t,responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}};v()(s).then((function(t){let s=new Blob([t.data],{type:t.headers["content-type"]});var a=new FileReader;a.readAsDataURL(s),a.onloadend=function(){var e=a.result;this.imageUrl=e};let o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=e.split("/")[e.split("/").length-1],o.click(),o.remove()})).catch((function(e){console.log(e)}))},closeDialog(){this.$emit("closeDialog")},changeRequestType(){p.$emit("open-change-request-type-dialog",this.ticket)},markComplete(){p.$emit("open-complete-status-dialog",this.ticket)},rerouteTicket(){"accountant"===this.role?p.$emit("open-reroute-ticket-dialog",this.ticket):"supervisor"===this.role&&p.$emit("open-reroute-ticket-supervisor-dialog",this.ticket)}},computed:{...(0,f.Se)({user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace",role:"auth/getUserRole",token:"auth/getAuthToken"})}},fs=gs,ks=(0,P.Z)(fs,is,ns,!1,null,"549e2a18",null),ys=ks.exports,vs=a(1625),Cs=a(6072),xs=function(){var e=this,t=e._self._c;return t("div",[t(He.h7,[t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"py-0 ma-0",attrs:{cols:"11"}},[t("div",{staticClass:"d-flex"},[t(Cs.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",placeholder:"Send Message",filled:"","auto-grow":"",rows:"1","row-height":"15"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void t.preventDefault()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:e.newline.apply(null,arguments):null}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.sendMessage()}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)]),t(_.Z,{staticClass:"ma-0 pa-0",attrs:{cols:"1"}},[t("div",{staticClass:"d-flex"},[t(x.Z,{staticClass:"ma-0 pa-0",attrs:{fab:"","x-small":"",depressed:"",dark:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.sendMessage()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage()}}},[t(A.Z,[e._v("mdi-send")])],1),t(vs.Z,{staticClass:"my-0 ml-2 mr-0 pa-0",attrs:{chips:"","show-size":"","hide-input":"","small-chips":"","truncate-length":"50"},on:{change:e.vInputFileChange},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)])],1)],1),t(He.h7,{staticClass:"ma-0 py-0 px-6"},[0!=e.file.length?t("span",{staticClass:"font-style-paragraph"},[e._v(e._s(e.file.name)+" | "+e._s(e.bytesToSize))]):e._e(),0!=e.file.length?t("span",{staticClass:"pl-2 font-style-paragraph appColor--text",staticStyle:{cursor:"pointer"},on:{click:e.clearFiles}},[e._v("clear")]):e._e(),0==e.file.length?t("span",{staticClass:"font-style-paragraph"},[e._v("No file has been selected")]):e._e(),t("img",{staticClass:"img-fluid preview-img",class:{"d-none":e.isActive},attrs:{src:e.preview}})])],1)},_s=[],bs={name:"TicketDetailsFooter",data(){return{message:"",file:[],previewFromFileInput:null,isActive:!0,preview:null,loader:!1}},props:{ticket:Object},mounted(){this.$emit("move-div-to-bottom")},methods:{async sendMessage(){if(0===this.message.trim().length&&0===this.file.length)return;this.loader=!0;let e=new FormData;0!=this.file.length&&e.append("file",this.file),e.append("message",this.message),v().post(`${ie.sendMessage}${this.ticket.workspaceId}/${this.ticket._id}/${this.ticket.fileTimestamp||23}`,e,{headers:{Authorization:this.token,"Content-Type":"multipart/form-data"}}).then((e=>{this.loader=!1;let t="";0!=this.file.length&&(t=this.file),this.clearFiles(),this.$emit("move-div-to-bottom")}))},vInputFileChange(e){if(this.preview=null,this.isActive=!0,0!=this.bytesToSize){if(e.type.startsWith("image/"))return new Promise(((t,s)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(this.preview=a.result),a.onerror=e=>s(e),this.isActive=!1,this.file.value=""}))}else this.file.value="",this.clearFiles(),p.$emit("show-snackbar",{text:"File size should be less than 5 MB.",type:"error"})},clearFiles(){this.file=[],this.previewFromFileInput=null,this.isActive=!0,this.message=""}},computed:{...(0,f.Se)({token:"auth/getAuthToken"}),bytesToSize(){const e=this.file.size;if(e>5e6)return!1;var t=["Bytes","KB","MB","GB","TB"];if(0==e)return"0 Byte";var s=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,s),2)+" "+t[s]}},created(){p.$on("predefined-message",(e=>{this.message=e})),p.$on("update-preview",(e=>{this.vInputFileChange(e)})),p.$on("update-file-input",(e=>{this.file=e}))}},ws=bs,Ts=(0,P.Z)(ws,xs,_s,!1,null,"72e2e84b",null),Zs=Ts.exports,As={name:"index",components:{ChatModule:ss,TicketDetailsHeader:ys,TicketDetailsFooter:Zs,LogsandFAQModule:Lt},props:{ticket:Object},data(){return{dialog:!1}},computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace"})},created(){this.subscribe()},beforeDestroy(){Jd.removeListener("comment")},methods:{moveDivToBottom(){setTimeout((()=>{const e=document.getElementById("chatBox");e.scrollTop=e.scrollHeight}),1e3)},dragover(e){e.preventDefault()},dragleave(e){},drop(e){e.preventDefault(),e.dataTransfer.files[0]&&p.$emit("update-file-input",e.dataTransfer.files[0]);var t=e.dataTransfer.files[0];if(p.$emit("update-preview",e.dataTransfer.files[0]),t.files){var s=new FileReader;s.onload=e=>{},s.readAsDataURL(t.files[0])}},closeDialog(){this.dialog=!1,p.$emit("close-details-dialog",this.ticket),this.$store.commit("ticket/setMessages",[])},convertBlobToBase64:e=>new Promise(((t,s)=>{const a=new FileReader;a.onerror=s,a.onload=()=>{t(a.result)},a.readAsDataURL(e)})),async previewImage(e){var t={token:this.currentWorkspace.botToken};t["file"]=e.search("files/tickets")>-1?e:e.split("https://files.slack.com/")[1];var s={method:"post",url:ie.slack,data:t,responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return v()(s)},async previewURL(e){if(!e.attachmentUrl)return;let t=await this.previewImage(e.attachmentUrl),s=new Blob([t.data],{type:t.headers["content-type"]});const a=await this.convertBlobToBase64(s);this.imageUrl=a},subscribe(){Jd.on("comment",(e=>{this.token&&this.ticket.ticketNo==e.ticketNo&&(this.$store.dispatch("ticket/getAllMessagesByTicketId",{id:this.ticket._id}),this.user._id!==e.userId&&p.$emit("play-new-message-sound"))}))}},mounted(){this.$store.dispatch("ticket/getAllMessagesByTicketId",{id:this.ticket._id})}},Ss=As,Is=(0,P.Z)(Ss,Xe,Ve,!1,null,"fc9b7868",null),Ds=Is.exports,$s=a(2118),Fs=function(){var e=this,t=e._self._c;return t(Dt.Z,{attrs:{width:"450",persistent:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.accept()}},model:{value:e.newTicketNotification,callback:function(t){e.newTicketNotification=t},expression:"newTicketNotification"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" New Ticket has arrived ")]),t(as.Z),t($s.Z,{staticClass:"py-0 pt-1"},[t(He.ZB,{staticClass:"py-0 pt-3 d-flex justify-center"},[e._v(" Ticket type : "+e._s(e.ticket.requestType)+" ")]),t(He.ZB,{staticClass:"py-0 pt-3 d-flex justify-center"},[e._v(" Message : "+e._s(e._f("truncate")(e.ticket.message,40))+" ")]),t(He.h7,{},[t(_.Z,{staticClass:"pb-0 pr-0 d-flex",attrs:{cols:"12"}},[t($e.Z),t("Button",{staticClass:"mr-2",attrs:{loader:e.loader},on:{"button-clicked":function(t){return e.accept()}},scopedSlots:e._u([{key:"buttonHeading",fn:function(){return[e._v(" Accept ")]},proxy:!0}])})],1)],1)],1)],1)],1)},Ps=[],Es={name:"index",components:{Button:ps},created(){document.body.onkeyup=function(e){32==e.keyCode&&this.newTicketNotification&&this.accept()}},data(){return{loader:!1}},props:{newTicketNotification:Boolean,ticket:Object},computed:{...(0,f.Se)({})},methods:{accept(){this.loader=!0,this.modal=!1,this.$emit("change-step")}},mounted(){}},Us=Es,js=(0,P.Z)(Us,Fs,Ps,!1,null,"73b1f95e",null),Rs=js.exports,Bs=a(9481),zs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" Change Status ")]),t($s.Z,{staticClass:"py-0 pt-1"},[t(He.ZB,{staticClass:"py-0 font-style-paragraph"},[e._v(" Note : Status will be changed permanently. ")]),t(_.Z,{staticClass:"ma-0 px-0",attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"appColor--text default-input-field ma-1 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.status,placeholder:"Status",color:"appColor",dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}}]),model:{value:e.statusModel,callback:function(t){e.statusModel=t},expression:"statusModel"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.markComplete(e.ticket)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.markComplete(e.ticket)}}},[e._v(" Save ")])],1)],1)],1)],1)},Ns=[],Ws={name:"AddToWorkspace",data(){return{dialog:!1,ticket:"",status:["Complete","AwaitingResponse"],statusModel:""}},beforeDestroy(){p.$off("open-complete-status-dialog")},mounted(){p.$on("open-complete-status-dialog",(e=>{this.dialog=!0,this.ticket=e}))},computed:{...(0,f.Se)({items:"user/getworkspacesWithFilter",user:"auth/getUser",token:"auth/getAuthToken"})},created(){},methods:{markComplete(e){if(!this.statusModel)return void p.$emit("show-snackbar",{text:"Select Status type",type:"error"});let t=e;t.status=this.statusModel,v().post(`${ie.changeStatus}${t._id}`,{status:this.statusModel,userId:this.user._id},{headers:{Authorization:this.token}}).then((e=>{this.$store.dispatch("ticket/getTasks"),p.$emit("show-snackbar",{text:`Marked ${this.statusModel} successfully`,type:"success"}),p.$emit("ticket-status-completed"),this.closeDialog()})).catch((e=>{let t=e.response.data.data;p.$emit("show-snackbar",{text:t,type:"error"})}))},closeDialog(){this.dialog=!1,this.ticket="",this.statusModel=""}}},Os=Ws,qs=(0,P.Z)(Os,zs,Ns,!1,null,"fbf0d59e",null),Ls=qs.exports,Ms=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" Change Request Type ")]),t($s.Z,{staticClass:"py-0 pt-1"},[t(He.ZB,{staticClass:"py-0 font-style-paragraph"},[e._v(" Note : Request Type will be changed permanently. ")]),t(_.Z,{staticClass:"ma-0 px-0",attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"appColor--text default-input-field ma-1 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.requestTypes,placeholder:"Request Type*",color:"appColor",dense:""},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}}]),model:{value:e.request_type,callback:function(t){e.request_type=t},expression:"request_type"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor",loading:e.loader},on:{click:function(t){return e.changeRequestType()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeRequestType()}}},[e._v(" Save ")])],1)],1)],1)],1)},Hs=[],Xs={name:"ChangeRequestType",components:{},data(){return{requestTypes:[],dialog:!1,request_type:"",loader:!1,ticket:""}},computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace"})},methods:{closeDialog(){this.dialog=!1,this.request_type="",this.ticket="",this.loader=!1},changeRequestType(){if(!0!==this.loader){if(this.loader=!0,!this.request_type)return p.$emit("show-snackbar",{text:"Please provide all the required fields",type:"error"}),void(this.loader=!1);v().post(`${ie.changeRequestType}${this.ticket._id}`,{type:this.request_type},{headers:{Authorization:this.token}}).then((e=>{p.$emit("show-snackbar",{text:"Successfully updated",type:"success"}),this.$emit("update-request-type",this.request_type),this.closeDialog()})).catch((e=>{p.$emit("show-snackbar",{text:"Something went wrong!",type:"error"}),this.loader=flase}))}}},beforeDestroy(){p.$off("open-change-request-type-dialog")},mounted(){var e=this;p.$on("open-change-request-type-dialog",(t=>{this.ticket=t;var s={method:"get",url:ie.ticketTypes,headers:{}};v()(s).then((function(t){t.data.length>0&&(e.requestTypes=[]);for(let s=0;s<t.data.length;s++)e.requestTypes.push(t.data[s].title)})).catch((function(e){console.log(e)})),this.dialog=!0}))}},Vs=Xs,Ks=(0,P.Z)(Vs,Ms,Hs,!1,null,"7335e6a2",null),Ys=Ks.exports,Qs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"ma-0 pa-0",attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"ma-0 pa-0"},[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" Xero Form "),t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1)],1),e.dialog?t("XeroForm",{attrs:{ticket:e.ticket},on:{"close-dialog":function(t){e.dialog=!1}}}):e._e()],1)],1)],1)},Gs=[],Js=a(4978),ea=function(){var e=this,t=e._self._c;return t($s.Z,[t("Snackbar"),e.response&&e.categories?t("h1",{staticClass:"d-flex justify-center font-style-heading"},[e._v(" Xero Form ")]):e._e(),e.response&&e.categories&&"PAID"!=e.requestType?t(x.Z,{staticClass:"mt-6 mb-6 white--text text-capitalize",attrs:{block:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.submitInvoices()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitInvoices()}}},[e._v(" Submit Invoices ")]):e._e(),e.response&&e.categories&&"PAID"==e.requestType?t(x.Z,{staticClass:"mt-6 mb-6 white--text text-capitalize",attrs:{block:"",color:"appColor",loading:e.paymentLoader},on:{click:function(t){return e.submitPayment()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitPayment()}}},[e._v(" Submit Payment ")]):e._e(),e.response&&e.categories?t("h1",{staticClass:"d-flex justify-start font-style-paragraph"},[e._v(" Select manually on each invoice or select request type from dropdown for all invoices ")]):e._e(),e.response&&e.categories?t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{attrs:{lg:"6",sm:"12"}},[t(Bs.Z,{ref:"requestType",staticClass:"d-flex appColor--text default-input-field ma-0 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.statusValues,placeholder:"Request Type",color:"appColor",dense:"",value:e.requestType},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}}],null,!1,1185225272)})],1),t(_.Z,{attrs:{lg:"6",sm:"12"}},[t(x.Z,{staticClass:"white--text text-capitalize",attrs:{block:"",color:"appColor"},on:{click:function(t){return e.changeRequestType()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeRequestType()}}},[e._v(" Change Request Type for all Invoices ")])],1),"PAID"!=e.requestType?t(_.Z,{attrs:{lg:"6",sm:"12"}}):e._e(),"PAID"!=e.requestType?t(_.Z,{attrs:{lg:"6",sm:"12"}},[t(x.Z,{staticClass:"white--text text-capitalize float-right",attrs:{color:"appColor"},on:{click:function(t){return e.addInvoiceForm()}}},[e._v("+ Add Invoice Form")]),t(x.Z,{staticClass:"white--text text-capitalize float-right mx-4",attrs:{color:"appColor"},on:{click:function(t){return e.saveDraftForm()}}},[e._v("Save as a Draft")])],1):e._e()],1):e._e(),e.response&&e.categories?e._e():t("Loader"),"PAID"!=e.requestType?t(b.Z,{staticClass:"mt-0"},[e.response&&e.categories?t(_.Z,{staticClass:"pt-0 d-none d-md-flex",attrs:{cols:"5"}},[t("PdfPreview")],1):e._e(),e.response&&e.categories?t(_.Z,{staticClass:"invoices",attrs:{lg:"7",sm:"12"}},[e.draftCheck&&e.tableLoader?t(Js.Z,e._b({staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{height:"680",type:"article, text, table-row-divider@7, actions"}},"v-skeleton-loader",e.attrs,!1)):e.tableLoader?e._e():e._l(e.response.invoices,(function(s,a){return t("div",{key:a,staticClass:"mt-2"},[t("div",[t("label",{},[t("span",{staticClass:"secondaryTextColor d-flex justify-center font-style-heading"},[e._v("Invoice No : "+e._s(s.invoiceNumber))]),0!=a?t(A.Z,{staticClass:"float-right mr-2",attrs:{color:"red",size:"20"},on:{click:function(t){return e.removeForm(a)}}},[e._v("mdi-delete")]):e._e()],1),t("label",{staticClass:"d-flex justify-center inputBackground mr-1"},[e._v("Page No: "+e._s(a+1)+" ")])]),t("Form",{staticClass:"backgroundLightColor my-2 pa-2",attrs:{invoice:s,index:a}}),t(as.Z,{staticClass:"mt-3"})],1)}))],2):e._e()],1):e._e(),"PAID"==e.requestType?t(b.Z,{staticClass:"mt-0"},[t(_.Z,{staticClass:"pt-0 d-none d-md-flex",attrs:{cols:"12"}},[t("PaymentForm")],1)],1):e._e()],1)},ta=[],sa=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0"},[t("FormHeader",{attrs:{invoice:e.invoice,invoiceIndex:e.index}}),t("BillingForm",{attrs:{billing:e.invoice.lineItems?e.invoice.lineItems:e.sampleArray,invoiceindex:e.index,type:e.invoice.lineAmountTypes}}),t("FormFooter",{attrs:{invoice:e.invoice,type:e.invoice.lineAmountTypes}})],1)},aa=[],oa=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0"},[t("div",{staticClass:"d-flex justify-center"},[t("p",{staticClass:"font-style-heading"},[e._v("Billing Details")])]),t("div",{staticClass:"d-flex justify-left"},[t("p",{staticClass:"ml-2 font-style-paragraph appColor--text",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.addnewProduct()}}},[e._v(" Add new Product in Invoice ")])]),t("div",{staticClass:"d-flex flex-column full-width"},[t("BillingHeading",{attrs:{type:e.type}}),e._l(e.billing,(function(s,a){return t("div",{key:a},[t("BillingFormEditable",{attrs:{product:s,index:e.invoiceindex,type:e.type},on:{"delete-field":function(t){return e.deleteField(a)}}})],1)}))],2)])},ia=[],na=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0 appColor"},[t(b.Z,{staticClass:"ma-0 pa-0 flex-nowrap"},e._l(e.headerFields,(function(s,a){return t(_.Z,{key:a,staticClass:"ma-0 pa-0 data-table justify-center d-flex align-center appColor",style:{display:"Tax"===s.text&&"Exclusive"!==e.type||"Discount"===s.text&&"ACCPAY"===e.requestType?"none !important":""},attrs:{cols:s.colSize}},["Tax"!==s.text||"Tax"===s.text&&"Exclusive"==e.type?t("span",[t("p",{staticClass:"font-style-section-section overflow-hidden"},[e._v(e._s(s.heading))])]):e._e()])})),1)],1)},ra=[],la={name:"index",props:{type:String},components:{},data:()=>({headerFields:[{heading:"Description",colSize:2},{heading:"Quantity",colSize:2},{heading:"Unit Price",colSize:2},{heading:"Discount %",text:"Discount",colSize:2},{heading:"Tax",text:"Tax",colSize:2},{heading:"Total",colSize:2}]}),watch:{},inject:["requestType"],mounted(){this.headerFields.unshift({heading:"Items",colSize:2}),this.headerFields.push({heading:"Accounts",colSize:2}),this.headerFields.push({heading:"Tax Rate",colSize:2}),this.categories?.trackingCategories.forEach((e=>{this.headerFields.push({heading:e.name,colSize:2})})),this.headerFields.push({heading:"Action",colSize:1})},computed:{...(0,f.Se)({categories:"xeroForm/getCategories",accounts:"xeroForm/getAccounts",taxRate:"xeroForm/getTaxRates",items:"xeroForm/getItemsField"})},methods:{},created(){}},ca=la,da=(0,P.Z)(ca,na,ra,!1,null,"f5a69684",null),ua=da.exports,pa=a(5125),ma=a(6750),ha=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0",staticStyle:{"min-height":"57px"}},[t(pa.Z,{ref:"myForm"},[t(b.Z,{staticClass:"ma-0 pa-0 ma-0 pa-0 flex-nowrap"},e._l(e.Fields,(function(s,a){return t(_.Z,{key:a,staticClass:"ma-0 pa-0 data-table justify-left d-flex align-center",style:{display:"taxAmount"===s.key&&"Exclusive"!==e.type||"disc"===s.key&&"ACCPAY"===e.requestType?"none !important":""},attrs:{cols:s.colSize}},["textField"!=s.selectionType||s.text||"Exclusive"!=e.type&&"taxAmount"===s.key?e._e():t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"",min:"number"==s.type?"0":"",max:"disc"==s.key?"100":"","hide-details":"",color:"appColor",placeholder:s.placeholder,type:s.type,dense:"",rules:[e=>!!e||"Field is required"],required:""},model:{value:e.product[s.key],callback:function(t){e.$set(e.product,s.key,t)},expression:"product[item.key]"}}),"textField"==s.selectionType&&"total"==s.text?t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"",min:"0","hide-details":"",color:"appColor",placeholder:s.placeholder,type:s.type,value:e.calcTotalAmount,disabled:"",dense:""}}):"button"==s.selectionType?t("div",{staticClass:"red white--text border-radius ml-2"},[t("p",{staticClass:"font-style-paragraph justify-center d-flex px-1 pt-1",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.deleteField()}}},[e._v(" Delete ")])]):"select"==s.selectionType&&"categories"==s.text?t("div",e._l(e.product.tracking,(function(a,o){return t("div",{key:o},[a.trackingCategoryID==s.trackingId?t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{flat:"",solo:"","hide-details":"",items:s.dropDownValues,placeholder:s.placeholder,color:"appColor",dense:"","item-text":"name","item-value":"trackingOptionID"},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.name))])]}}],null,!0),model:{value:e.product.tracking[o].trackingOptionID,callback:function(t){e.$set(e.product.tracking[o],"trackingOptionID",t)},expression:"product.tracking[index].trackingOptionID"}}):e._e()],1)})),0):"select"==s.selectionType&&"taxRates"==s.text?t("div",[t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width select-type",attrs:{flat:"",solo:"","hide-details":"",height:"1",items:e.returnValues,placeholder:s.placeholder,"no-data-text":e.loadingTaxRates?"Loading...":"No Items available",color:"appColor",dense:"",disabled:"NoTax"===e.type,"item-value":"taxType"},on:{click:function(t){return t.stopPropagation(),e.getResponseFromParent(s.key)}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.name+" ("+s.displayTaxRate+"%)"))])]}},{key:"selection",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.name.substr(0,8)))])]}}],null,!0),model:{value:e.product[s.key],callback:function(t){e.$set(e.product,s.key,t)},expression:"product[item.key]"}})],1):"select"==s.selectionType&&"items"==s.text?t("div",[t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width select-type",attrs:{flat:"",solo:"","hide-details":"",items:e.product["accountCode"]&&e.xeroHashMaps.accountsHashmap.ids[e.product["accountCode"]]?e.xeroHashMaps.accountsHashmap.ids[e.product["accountCode"]].items:e.xeroHashMaps.itemsHashmap.all,placeholder:s.placeholder,color:"appColor",dense:"","no-data-text":e.loadingItems?"Loading...":"No Items available","item-value":"id","item-text":"name"},on:{click:function(t){return t.stopPropagation(),e.getResponseFromParent(s.key)}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.name))])]}},{key:"append-item",fn:function(){return[t("div",{directives:[{def:ma.Z,name:"intersect",rawName:"v-intersect",value:e.loadMoreData,expression:"loadMoreData"}]})]},proxy:!0}],null,!0),model:{value:e.product[s.key],callback:function(t){e.$set(e.product,s.key,t)},expression:"product[item.key]"}})],1):"select"==s.selectionType&&"account"==s.text?t("div",[t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width select-type",attrs:{flat:"",solo:"","hide-details":"",items:e.product["itemCode"]&&e.xeroHashMaps.itemsHashmap.ids[e.product["itemCode"]]?e.xeroHashMaps.itemsHashmap.ids[e.product["itemCode"]].accounts:e.xeroHashMaps.accountsHashmap.all,placeholder:s.placeholder,"no-data-text":e.loadingAccounts?"Loading...":"No accounts available",color:"appColor",dense:"","return-object":"","item-text":"name",value:e.product[s.key]},on:{click:function(t){return t.stopPropagation(),e.getResponseFromParent(s.key)},input:function(t){return e.selectAccountType(t,s.key)}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.name))])]}},{key:"selection",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.name)+" ")])]}},{key:"append-item",fn:function(){return[t("div",{directives:[{def:ma.Z,name:"intersect",rawName:"v-intersect",value:e.loadMoreData,expression:"loadMoreData"}]})]},proxy:!0}],null,!0)})],1):e._e()],1)})),1)],1)],1)},ga=[],fa={name:"index",props:{product:Object,index:Number,type:String},inject:["requestType","responseSuccessOfItems","responseSuccessOfTaxRates","responseSuccessOfAccounts","loadingItems","loadingTaxRates","loadingAccounts","itemUp","taxRatesDropdown","account"],data:()=>({Fields:[{selectionType:"select",text:"items",heading:"Item",placeholder:"items",colSize:2,key:"itemCode"},{selectionType:"textField",label:"Description",placeholder:"Description",type:"string",key:"description",colSize:2},{selectionType:"textField",label:"Quantity",placeholder:"Quantity",type:"number",key:"quantity",colSize:2},{selectionType:"textField",label:"Unit Price",placeholder:"Unit Price",type:"number",key:"unitAmount",colSize:2},{selectionType:"textField",label:"Discount %",placeholder:"Discount %",type:"number",key:"disc",colSize:2},{selectionType:"textField",label:"Tax",placeholder:"Tax",type:"number",key:"taxAmount",colSize:2},{selectionType:"textField",label:"Total",text:"total",placeholder:"Total",type:"number",key:"lineAmount",colSize:2},{selectionType:"select",text:"account",heading:"Account",placeholder:"Accounts",colSize:2,key:"accountCode"},{selectionType:"select",text:"taxRates",heading:"Tax Rate",placeholder:"Tax Rate",colSize:2,key:"taxType"}],accountType:null,taxRateType:"",discount:null,unitPrice:null,quantity:null,totalAmount:null,types:{EXPENSE:"canApplyToExpenses",LIABILITY:"canApplyToLiabilities",EQUITY:"canApplyToEquity",ASSET:"canApplyToAssets",REVENUE:"canApplyToRevenue"}}),computed:{...(0,f.Se)({authToken:"auth/getAuthToken",workspaceId:"xeroForm/getWorkspaceId",categories:"xeroForm/getCategories",invoices:"xeroForm/getInvoices",xeroHashMaps:"xeroForm/getXeroHashMaps"}),calcTotalAmount(){isNaN(this.product.quantity)&&(this.product.quantity="0"),isNaN(this.product.unitAmount)&&(this.product.unitAmount="0"),isNaN(this.product.disc)&&(this.product.disc="0"),isNaN(this.product.taxAmount)&&(this.product.taxAmount="0"),"string"===typeof this.product.disc&&(this.product.disc=this.product.disc.replace(/^%|%$/g,"")),"string"===typeof this.product.taxAmount&&(this.product.taxAmount=this.product.taxAmount.replace(/^%|%$/g,""));const e="ACCPAY"===this.requestType?1:(100-this.product.disc)/100,t=+this.product.quantity*+this.product.unitAmount*e;return this.product.lineAmount=t.toFixed(2).toString(),t.toFixed(2)},returnValues(){if(this.accountType){const e=this.types[this.accountType];return this.taxRatesDropdown.filter((t=>t[e]))}return this.taxRatesDropdown}},watch:{},mounted(){this.categories?.trackingCategories.forEach((e=>{this.Fields.push({selectionType:"select",text:"categories",heading:e.name,placeholder:e.name,dropDownValues:e.options,colSize:2,trackingId:e.trackingCategoryID})})),this.Fields.push({selectionType:"button",colSize:1})},methods:{getResponseFromParent(e){("itemCode"===e&&!this.responseSuccessOfItems&&this.loadingItems||"accountCode"===e&&!this.responseSuccessOfAccounts&&this.loadingAccounts||"taxType"===e&&!this.responseSuccessOfTaxRates&&this.loadingTaxRates)&&this.$root.$emit("check-response",e)},saveField(){this.$emit("save-editable-field")},getSpecificValues(e,t){return t=this.types[t],e.filter((e=>e[t]))},selectAccountType(e,t){console.log("selected account>>",e,t);const s={name:e.name,type:e.type};this.product[t]=s},deleteField(){this.$emit("delete-field",this.index)},loadMoreData(){this.$root.$emit("load-more-data")}}},ka=fa,ya=(0,P.Z)(ka,ha,ga,!1,null,"e7502f68",null),va=ya.exports,Ca={name:"index",props:{billing:Array,invoiceindex:Number,type:String},components:{BillingHeading:ua,BillingFormEditable:va},data:()=>({}),computed:{...(0,f.Se)({categories:"xeroForm/getCategories"})},methods:{addnewProduct(){let e={description:"",unitAmount:"0",quantity:"0",taxAmount:"0",lineAmount:"0",disc:"0"},t=[];this.categories?.trackingCategories.forEach((e=>{let s={trackingCategoryID:e.trackingCategoryID,trackingOptionID:""};t.push(s)})),t.length>0&&(e["tracking"]=t),this.billing.push(e)},deleteField(e){this.billing.splice(e,1)}}},xa=Ca,_a=(0,P.Z)(xa,oa,ia,!1,null,"6a50ad3c",null),ba=_a.exports,wa=a(9674),Ta=a(1030),Za=a(6243),Aa=a(8687),Sa=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0"},[t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{attrs:{lg:"6",md:"6",sm:"12"}},[t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Invoice Number ")])]),t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Invoice Number",dense:"",rules:e.requiredField},model:{value:e.invoice.invoiceNumber,callback:function(t){e.$set(e.invoice,"invoiceNumber",t)},expression:"invoice.invoiceNumber"}})],1),t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v("Name")])]),t(wa.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{color:"appColor","hide-details":"",flat:"",solo:"",dense:"",attach:"",rules:e.requiredField,items:e.contactOptions,placeholder:"Select Contacts","item-text":"name","item-value":"name"},on:{input:function(t){return e.setContact()},focus:function(t){return e.fetchContacts()},change:function(t){return e.fetchContacts()}},scopedSlots:e._u([{key:"append-item",fn:function(){return[e.contactLoader?t("div",{staticClass:"text-center"},[t("span",[e._v("Loading...")])]):e._e()]},proxy:!0}]),model:{value:e.invoice.name,callback:function(t){e.$set(e.invoice,"name",t)},expression:"invoice.name"}})],1),t("div",{staticClass:"d-flex justify-end align-baseline"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Created At ")])]),t(De.Z,{staticClass:"field-width",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("div",{staticClass:"date-field"},[t(w.Z,e._g(e._b({staticClass:"font-style-paragraph ma-1 pa-0 text-no-wrap rounded-md custom",attrs:{placeholder:"Date",color:"appColor",flat:"",dense:"",solo:"",autocomplete:"off","hide-details":"",readonly:""},model:{value:e.invoice.date,callback:function(t){e.$set(e.invoice,"date",t)},expression:"invoice.date"}},"v-text-field",a,!1),s)),e.invoice.validationdate?t("span",{staticClass:"red--text font-size pl-3"},[e._v(" Format not supported ")]):e._e()],1)]}}]),model:{value:e.datePickerModal,callback:function(t){e.datePickerModal=t},expression:"datePickerModal"}},[t(Ta.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.invoice.date,callback:function(t){e.$set(e.invoice,"date",t)},expression:"invoice.date"}},[t($e.Z),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.noDateSelect()}}},[e._v(" Cancel ")]),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:e.dateSelected}},[e._v(" OK ")])],1)],1)],1),t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Expected Payment Date ")])]),t(De.Z,{staticClass:"field-width",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(w.Z,e._g(e._b({staticClass:"font-style-paragraph ma-1 pa-0 text-no-wrap rounded-md custom appColor",attrs:{placeholder:"Expected Payment Date",color:"appColor",flat:"",dense:"",solo:"",autocomplete:"off","persistent-placeholder":"","hide-details":"",readonly:""},model:{value:e.invoice.expectedPaymentDate,callback:function(t){e.$set(e.invoice,"expectedPaymentDate",t)},expression:"invoice.expectedPaymentDate"}},"v-text-field",a,!1),s))]}}]),model:{value:e.expectedPaymentDate,callback:function(t){e.expectedPaymentDate=t},expression:"expectedPaymentDate"}},[t(Ta.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.invoice.expectedPaymentDate,callback:function(t){e.$set(e.invoice,"expectedPaymentDate",t)},expression:"invoice.expectedPaymentDate"}},[t($e.Z),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.noExpectedDateSelect()}}},[e._v(" Cancel ")]),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.expectedPaymentDate=!1}}},[e._v(" OK ")])],1)],1)],1),t("div",{staticClass:"d-flex align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Branding Themes ")])]),t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{flat:"",solo:"",attach:"","hide-details":"",placeholder:"Select Branding Theme",color:"appColor",dense:"","no-data-text":e.brandingLoader?"Loading..":"No brands available",items:e.brandingThemes,"item-value":"brandingThemeID","item-text":"name"},on:{click:function(t){return e.fetchBrandingThemes()}},model:{value:e.invoice.brandingThemeID,callback:function(t){e.$set(e.invoice,"brandingThemeID",t)},expression:"invoice.brandingThemeID"}})],1),t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Reference ")])]),t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Reference",dense:""},model:{value:e.invoice.reference,callback:function(t){e.$set(e.invoice,"reference",t)},expression:"invoice.reference"}})],1),t("div",{staticClass:"d-flex align-center"},[t("div",{staticClass:"field-width mr-15"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Status ")])]),e._l(e.radioButtonValues,(function(s,a){return t(Aa.Z,{key:a,model:{value:e.invoice.status,callback:function(t){e.$set(e.invoice,"status",t)},expression:"invoice.status"}},[t(Za.Z,{staticClass:"d-flex appColor--text default-input-field mr-4",attrs:{label:s.label,color:s.color,value:s.value}})],1)}))],2)]),t(_.Z,[t("div",{staticClass:"d-flex align-center"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v("Email")]),t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 ml-8",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Email",dense:"",rules:e.requiredField},model:{value:e.invoice.email,callback:function(t){e.$set(e.invoice,"email",t)},expression:"invoice.email"}})],1),t("div",{staticClass:"d-flex align-center"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Address ")]),t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 ml-4",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Address",dense:"",rules:e.requiredField},model:{value:e.invoice.address,callback:function(t){e.$set(e.invoice,"address",t)},expression:"invoice.address"}})],1),t("div",{staticClass:"d-flex align-baseline"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Due Date ")]),t(De.Z,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t("div",{staticClass:"due-date-field"},[t(w.Z,e._g(e._b({staticClass:"font-style-paragraph ma-1 ml-11 pa-0 text-no-wrap rounded-md custom",attrs:{placeholder:"Due Date",flat:"",dense:"",solo:"",autocomplete:"off","hide-details":"",readonly:"",rules:e.requiredField},model:{value:e.invoice.dueDate,callback:function(t){e.$set(e.invoice,"dueDate",t)},expression:"invoice.dueDate"}},"v-text-field",a,!1),s)),e.invoice.validationdueDate?t("span",{staticClass:"red--text font-size pl-13"},[e._v(" Format not supported ")]):e._e()],1)]}}]),model:{value:e.dueDatePicker,callback:function(t){e.dueDatePicker=t},expression:"dueDatePicker"}},[t(Ta.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.invoice.dueDate,callback:function(t){e.$set(e.invoice,"dueDate",t)},expression:"invoice.dueDate"}},[t($e.Z),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.noDueDateSelect()}}},[e._v(" Cancel ")]),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.dueDateSelected()}}},[e._v(" OK ")])],1)],1)],1),t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Planned Payment Date ")])]),t(De.Z,{staticClass:"field-width",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(w.Z,e._g(e._b({staticClass:"font-style-paragraph ma-1 pa-0 text-no-wrap rounded-md custom",attrs:{placeholder:"Planned Payment Date",color:"appColor",flat:"",dense:"",solo:"",autocomplete:"off","persistent-placeholder":"","hide-details":"",readonly:""},model:{value:e.invoice.plannedPaymentDate,callback:function(t){e.$set(e.invoice,"plannedPaymentDate",t)},expression:"invoice.plannedPaymentDate"}},"v-text-field",a,!1),s))]}}]),model:{value:e.plannedPaymentDate,callback:function(t){e.plannedPaymentDate=t},expression:"plannedPaymentDate"}},[t(Ta.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.invoice.plannedPaymentDate,callback:function(t){e.$set(e.invoice,"plannedPaymentDate",t)},expression:"invoice.plannedPaymentDate"}},[t($e.Z),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.noPlannedDateSelect()}}},[e._v(" Cancel ")]),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.plannedPaymentDate=!1}}},[e._v(" OK ")])],1)],1)],1),t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" Line Amount Types ")])]),t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{items:e.lineAmountTypes,flat:"",solo:"",dense:"",attach:"","hide-details":""},on:{change:e.sendIndexOfInvoice},model:{value:e.invoice.lineAmountTypes,callback:function(t){e.$set(e.invoice,"lineAmountTypes",t)},expression:"invoice.lineAmountTypes"}})],1),t("div",{staticClass:"d-flex justify-end align-center"},[t("div",{staticClass:"field-width"},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" URL ")])]),t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"URL",dense:"",rules:e.urlRules},model:{value:e.invoice.url,callback:function(t){e.$set(e.invoice,"url",t)},expression:"invoice.url"}})],1)])],1)],1)},Ia=[],Da={name:"index",props:{invoice:Object,invoiceIndex:Number},inject:["brandingThemes","brandingLoader","brandingResponse"],data:()=>({editHeader:!0,datePickerModal:!1,dueDatePicker:!1,expectedPaymentDate:!1,plannedPaymentDate:!1,contactLoader:!1,lineAmountTypes:["Exclusive","Inclusive","NoTax"],page:1,radioButtonValues:[{label:"Draft",color:"primary",value:"DRAFT"},{label:"Submitted",color:"primary",value:"SUBMITTED"},{label:"Authorised",color:"primary",value:"AUTHORISED"}],contactOptions:[],requiredField:[e=>!!e||"Field is required"],emailRules:[e=>!!e||"Field is required",e=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/.test(e)||"E-mail must be valid"],urlRules:[e=>!!e||"Field is required",e=>/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})$/.test(e)||"URL must be valid"],nameRules:[e=>!!e||"Field is required",e=>e&&e.length>=3||"Name must be greater than or equal to 3 characters"]}),computed:{...(0,f.Se)({authToken:"auth/getAuthToken",workspaceId:"xeroForm/getWorkspaceId",draftCheck:"xeroForm/getDraftCheck"})},methods:{setContact(){this.invoice.name="object"==typeof this.invoice.name?this.invoice.name.name:this.invoice.name,this.fetchContacts()},async fetchContacts(){this.contactLoader=!0,this.invoice.name=null==this.invoice.name?"":this.invoice.name,await v().get(`xero/get-contacts/${this.workspaceId}?search=${this.invoice.name}`,{headers:{Authorization:this.authToken}}).then((e=>(this.contactLoader=!1,this.contactOptions=e.data.contacts))).catch((e=>{this.contactLoader=!1,console.log(e)}))},fetchBrandingThemes(){!this.brandingResponse&&this.brandingLoader&&this.$root.$emit("check-response-brands")},editHeaderFields(){this.editHeader=!0},saveHeaderFields(){this.editHeader=!1},setDate(){this.datePickerModal=!1},dueDate(){this.dueDatePicker=!1},noDateSelect(){this.invoice.date||(this.invoice.date=""),this.datePickerModal=!1},dateSelected(){this.datePickerModal=!1,delete this.invoice.validationdate},dueDateSelected(){this.dueDatePicker=!1,delete this.invoice.validationdueDate},noExpectedDateSelect(){this.invoice.expectedPaymentDate||(this.invoice.expectedPaymentDate=""),this.expectedPaymentDate=!1},noPlannedDateSelect(){this.invoice.plannedPaymentDate||(this.invoice.plannedPaymentDate=""),this.plannedPaymentDate=!1},noDueDateSelect(){this.invoice.dueDate||(this.invoice.dueDate=""),this.dueDatePicker=!1},sendIndexOfInvoice(){this.$store.commit("xeroForm/performActionOnInvoiceTypeChanged",this.invoiceIndex)}}},$a=Da,Fa=(0,P.Z)($a,Sa,Ia,!1,null,"568946ce",null),Pa=Fa.exports,Ea=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0"},[t(pa.Z,{ref:"myForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(b.Z,{staticClass:"ma-0 pa-0 d-flex justify-end align-center"},[t(_.Z,{attrs:{lg:"6",md:"8",sm:"12"}},[t("div",e._l(e.footerFields,(function(s,a){return t(b.Z,{key:a,staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"ma-0 pa-0 d-flex justify-center align-center",attrs:{cols:"3"}},[t("h4",{staticClass:"font-style-section-heading mainTextColor--text"},[e._v(" "+e._s(s.label)+" ")])]),t(_.Z,{staticClass:"ma-0 pa-0",attrs:{cols:"9"}},["currencyCode"!=s.key?t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:s.placeholder,type:s.type,dense:"",rules:e.requiredField,value:"subTotal"==s.key?e.calcSubTotal:"totalTax"==s.key?e.calcTotalTax:"total"==s.key?e.calcTotal:"",disabled:""}}):e._e(),"currencyCode"==s.key?t(wa.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.currencies,placeholder:"Currency",color:"appColor",dense:"","item-value":"code","return-object":!1},on:{input:function(t){return e.setCurrency(t)},focus:function(t){return e.fetchCurrency()},change:function(t){return e.fetchCurrency()}},scopedSlots:e._u([{key:"selection",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}},{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.code+" - "+s.description))])]}},{key:"append-item",fn:function(){return[e.currencyLoader?t("div",{staticClass:"text-center"},[t("span",[e._v("Loading...")])]):e._e()]},proxy:!0}],null,!0),model:{value:e.invoice[s.key],callback:function(t){e.$set(e.invoice,s.key,t)},expression:"invoice[item.key]"}}):e._e()],1)],1)})),1)])],1)],1)],1)},Ua=[],ja={name:"index",props:{invoice:Object,type:String},data:()=>({editFooter:!0,invoiceTypes:["ACCPAY","ACCREC"],currencies:[],currencyLoader:!1,footerFields:[{label:"Sub Total",placeholder:"Sub Total",type:"number",key:"subTotal"},{label:"Tax Amount",placeholder:"Tax Amount",type:"number",key:"totalTax"},{label:"Currency",placeholder:"Currency",type:"string",key:"currencyCode"},{label:"Total",placeholder:"Total",type:"number",key:"total"}],requiredField:[e=>!!e||"Field is required"],valid:!1}),computed:{...(0,f.Se)({authToken:"auth/getAuthToken",workspaceId:"xeroForm/getWorkspaceId",invoices:"xeroForm/getInvoices"}),calcSubTotal(){let e=0;return this.invoice.lineItems.forEach((t=>{let s=Number(t.lineAmount);e+=s})),this.invoice["subTotal"]=e.toFixed(2),e.toFixed(2)},calcTotalTax(){let e=0;return"Exclusive"==this.type?(this.invoice.lineItems.forEach((t=>{if(void 0==t.taxAmount)return t.taxAmount;let s=Number(t.taxAmount);e+=s})),this.invoice["totalTax"]=e.toFixed(2),e.toFixed(2)):(this.invoice["totalTax"]=e.toFixed(2),e.toFixed(2))},calcTotal(){let e=Number(this.calcSubTotal)+Number(this.calcTotalTax);return this.invoice["total"]=e.toFixed(2),e.toFixed(2)}},mounted(){},methods:{fetchCurrency(){this.currencyLoader=!0,this.axios.get(`xero/currencies/${this.workspaceId}`,{headers:{Authorization:this.authToken}}).then((e=>{this.currencyLoader=!1,this.currencies=e.data.currencies})).catch((e=>{this.currencyLoader=!1,console.log(e)}))},setCurrency(e){null!=e&&(this.invoice.currencyCode=e.toUpperCase())}}},Ra=ja,Ba=(0,P.Z)(Ra,Ea,Ua,!1,null,"028b2cc7",null),za=Ba.exports,Na={name:"index",props:{invoice:Object,index:Number},components:{BillingForm:ba,FormHeader:Pa,FormFooter:za},data:()=>({sampleArray:[{description:"",unitAmount:0,quantity:0,taxAmount:0,lineAmount:0,disc:0,itemCode:"",accoundCode:"",taxType:""}]}),watch:{},mounted(){if(!this.invoice.lineItems){let e=[];this.categories?.trackingCategories.forEach((t=>{let s={trackingCategoryID:t.trackingCategoryID,trackingOptionID:""};e.push(s)})),e.length>0&&(this.sampleArray[0]["tracking"]=e)}},computed:{...(0,f.Se)({categories:"xeroForm/getCategories"})},methods:{},created(){}},Wa=Na,Oa=(0,P.Z)(Wa,sa,aa,!1,null,"542401af",null),qa=Oa.exports,La=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"ma-0 pa-0 mt-3"},[t("p",{staticClass:"d-flex justify-center font-style-heading"},[e._v("Payment")]),t("div",[t("div",{staticClass:"pa-4 mt-2 backgroundLightColor"},[t("div",{staticClass:"d-flex justify-space-between font-style-paragraph"},[t("span",{},[e._v("Fill the required options")]),t("span",[e._v("Required fields*")])]),t("div",{staticClass:"mt-6 ml-16 pl-16"},[t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"font-style-section-heading mainTextColor--text",attrs:{cols:"2"}},[e._v(" Account Code: ")]),t(_.Z,{staticClass:"ma-0 pa-0 justify-center d-flex align-center",attrs:{cols:"2"}},[t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width select-type",attrs:{flat:"",solo:"","hide-details":"",items:e.paidAccounts,"no-data-text":e.loadingPaidAccounts?"Loading..":"No account available",placeholder:"Account code",color:"appColor",dense:"","return-object":"","item-value":"code","item-text":"label"},on:{click:function(t){return t.stopPropagation(),e.getPaidAccounts()},input:function(t){return e.selectAccountType(t)}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.code+" - "+s.label))])]}},{key:"selection",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.code+" - "+s.label.substr(0,13)+".."))])]}}])})],1)],1),t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"font-style-section-heading mainTextColor--text",attrs:{cols:"2"}},[e._v(" Dated on ")]),t(_.Z,{staticClass:"ma-0 pa-0 justify-center d-flex align-center",attrs:{cols:"2"}},[t(De.Z,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(w.Z,e._g(e._b({staticClass:"font-style-paragraph default-input-field ma-1 pa-0 text-no-wrap rounded-md custom",attrs:{placeholder:"Date",color:"appColor",flat:"",dense:"",solo:"",autocomplete:"off","persistent-placeholder":"","hide-details":"",readonly:""},model:{value:e.payments[0].date,callback:function(t){e.$set(e.payments[0],"date",t)},expression:"payments[0].date"}},"v-text-field",a,!1),s))]}}]),model:{value:e.datePaid,callback:function(t){e.datePaid=t},expression:"datePaid"}},[t(Ta.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.payments[0].date,callback:function(t){e.$set(e.payments[0],"date",t)},expression:"payments[0].date"}},[t($e.Z),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.noDateSelected()}}},[e._v(" Cancel ")]),t(x.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePaid=!1}}},[e._v(" OK ")])],1)],1)],1)],1),t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"font-style-section-heading mainTextColor--text",attrs:{cols:"2"}},[e._v(" Amount: ")]),t(_.Z,{staticClass:"ma-0 pa-0 justify-center d-flex align-center",attrs:{cols:"2"}},[t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,min:"0",flat:"",solo:"","hide-details":"",placeholder:"Amount",type:"number",dense:"",rules:[e=>!!e||"Amount is required"],required:""},model:{value:e.payments[0].amount,callback:function(t){e.$set(e.payments[0],"amount",t)},expression:"payments[0].amount"}})],1)],1),t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{staticClass:"font-style-section-heading mainTextColor--text",attrs:{cols:"2"}},[e._v(" Invoice: ")]),t(_.Z,{staticClass:"ma-0 pa-0 justify-center d-flex align-center",attrs:{cols:"3"}},[t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0 field-width select-type",attrs:{flat:"",solo:"","hide-details":"",items:e.invoices,"menu-props":{maxHeight:170,top:!e.$vuetify.breakpoint.lg,offsetY:!e.$vuetify.breakpoint.lg},"no-data-text":e.invoiceLoader?"Loading..":"No invoice available",placeholder:"Search by payment amount",color:"appColor",dense:"","return-object":""},on:{click:function(t){return t.stopPropagation(),e.getInvoices()},input:function(t){return e.selectInvoiceType(t)}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.label+" -- "+s.reference+" -- "+s.amountDue))])]}},{key:"selection",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s.label+" -- "+s.reference+" -- "+s.amountDue))])]}},{key:"append-item",fn:function(){return[e.moreBtnLoader?t("div",{staticClass:"text-center font-style-paragraph"},[t("span",{staticClass:"cursor-pointer font-style-section-heading mainTextColor--text",on:{click:e.getMoreInvoice}},[e._v("Load More")])]):e._e()]},proxy:!0}])})],1)],1)],1)])])])},Ma=[],Ha={name:"index",data:()=>({datePaid:!1,invoices:[],payments:[{invoice:{invoiceID:null},account:{code:null},date:"",amount:""}],paidAccounts:[],invoiceLoader:!1,loadingPaidAccounts:!1,moreBtnLoader:!1,responseSuccessOfPaidAccounts:!1}),computed:{...(0,f.Se)({authToken:"auth/getAuthToken",workspaceId:"xeroForm/getWorkspaceId"})},watch:{payments:{deep:!0,handler(){this.$root.$emit("submit-payment",this.payments)}}},methods:{getPaidAccounts(){this.responseSuccessOfPaidAccounts||(this.loadingPaidAccounts=!0,this.axios.get(`${ie.getAccounts}/${this.workspaceId}?enablePaymentsToAccount=true`,{headers:{Authorization:this.authToken}}).then((e=>{let t=[];this.responseSuccessOfPaidAccounts=!0,e.data?.accounts.forEach((e=>{t.push({label:e.name,code:"BANK"!==e.type?e.code:e.bankAccountNumber,accountID:e.accountID})})),this.paidAccounts=t,this.loadingPaidAccounts=!1})).catch((e=>{console.log(e)})))},getInvoices(){this.invoiceLoader=!0,this.moreBtnLoader=!1,this.invoices=[],this.axios.get(`${ie.getPaymentApprovalInvoices}/${this.workspaceId}?amountDue=${this.payments[0].amount}`,{headers:{Authorization:this.authToken}}).then((e=>{let t=[];e.data?.data.forEach((e=>{t.push({label:e.invoiceNumber,reference:e.reference,amountDue:e.amountDue,invoiceID:e.invoiceID})})),this.invoices=t,this.invoices.length<100?this.moreBtnLoader=!1:this.moreBtnLoader=!0,this.invoiceLoader=!1})).catch((e=>{this.invoiceLoader=!1,console.log(e)}))},getMoreInvoice(){this.getInvoices()},noDateSelected(){this.date||(this.date=""),this.datePaid=!1},selectAccountType(e){this.payments[0].account.accountID=e.accountID},selectInvoiceType(e){this.payments[0].invoice.invoiceID=e.invoiceID}}},Xa=Ha,Va=(0,P.Z)(Xa,La,Ma,!1,null,"693df04f",null),Ka=Va.exports,Ya=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex justify-center align-end",staticStyle:{height:"50vh"}},[t(te.Z,{attrs:{indeterminate:"",color:"appColor",size:200,width:10}})],1),e._m(0)])},Qa=[function(){var e=this,t=e._self._c;return t("div",[t("p",{staticClass:"font-style-paragraph d-flex justify-center my-10"},[e._v(" Please wait, while we are setting up the form ")])])}],Ga={name:"index",components:{},data:()=>({}),watch:{},mounted(){},computed:{...(0,f.Se)({})},methods:{},created(){}},Ja=Ga,eo=(0,P.Z)(Ja,Ya,Qa,!1,null,"6e41192b",null),to=eo.exports,so=function(){var e=this,t=e._self._c;return t("div",[t("center",{staticClass:"mt-2"},[t("object",{ref:"obj",attrs:{data:e.pdfUrl,width:"470",height:"700"}})])],1)},ao=[],oo=a(5258),io=(a(9016),{name:"index",components:{pdf:oo.Z},data(){return{}},mounted(){this.$refs.obj.onload=()=>{const e=this.$refs.obj.contentDocument.querySelector("body img");e&&(e.style="width:100%;height:100%")}},computed:{...(0,f.Se)({pdfUrl:"xeroForm/getPdfLink"})}}),no=io,ro=(0,P.Z)(no,so,ao,!1,null,null,null),lo=ro.exports,co={name:"index",components:{Form:qa,PaymentForm:Ka,Loader:to,PdfPreview:lo,Snackbar:U},props:{ticket:Object},data:()=>({attrs:{class:"mb-6",boilerplate:!0,elevation:2},tableLoader:!1,resItems:{},resTaxRates:{},resAccountsCode:{},resBrandingTheme:{},loader:!1,statusValues:["ACCPAY","ACCREC","PAID"],requestType:"ACCREC",loadingItems:!1,loadingTaxRates:!0,loadingAccounts:!1,responseSuccessOfItems:"",responseSuccessOfTaxRates:"",responseSuccessOfAccounts:"",brandingResponse:"",brandingLoader:!0,brandingThemes:[],taxRatesDropdown:[],itemUp:[],account:[],payments:[{invoice:{invoiceID:null},account:{code:null},date:"",amount:""}],paymentLoader:!1,isSold:!0,newInvoiceForm:{address:"",balanceDue:"",currencyCode:"",date:"",discount:"",dueDate:"",email:"",invoiceNumber:"",lineItems:[{description:"",disc:"0",lineAmount:"0",quantity:"0",taxAmount:"0",unitAmount:"0",itemCode:"",accountCode:"",taxType:""}],name:"",subTotal:"",totalTax:"",total:"",status:"",type:"ACCREC",lineAmountTypes:"Exclusive"},paginate:{size:10,page:1,lastPage:10,total:0}}),provide(){return{requestType:(0,i.Fl)((()=>this.requestType)),responseSuccessOfItems:(0,i.Fl)((()=>this.responseSuccessOfItems)),responseSuccessOfTaxRates:(0,i.Fl)((()=>this.responseSuccessOfTaxRates)),loadingItems:(0,i.Fl)((()=>this.loadingItems)),loadingTaxRates:(0,i.Fl)((()=>this.loadingTaxRates)),loadingAccounts:(0,i.Fl)((()=>this.loadingAccounts)),itemUp:(0,i.Fl)((()=>this.itemUp)),taxRatesDropdown:(0,i.Fl)((()=>this.taxRatesDropdown)),responseSuccessOfAccounts:(0,i.Fl)((()=>this.responseSuccessOfAccounts)),account:(0,i.Fl)((()=>this.account)),brandingResponse:(0,i.Fl)((()=>this.brandingResponse)),brandingLoader:(0,i.Fl)((()=>this.brandingLoader)),brandingThemes:(0,i.Fl)((()=>this.brandingThemes))}},async mounted(){await this.$store.dispatch("xeroForm/getAccountsToDb"),this.$store.dispatch("xeroForm/getAccountItems",this.paginate),this.draftCheck&&(this.tableLoader=!0,Promise.all([this.getAccounts(),this.getTaxRates(),this.fetchBrandingThemes()]).then((e=>{console.log("all response>>>",e),this.tableLoader=!1}))),this.pdfUrl&&await this.savePdfLink(this.pdfUrl)},beforeMount(){this.$store.commit("xeroForm/setPdfLink",""),this.$store.commit("xeroForm/addCategories",""),this.$store.commit("xeroForm/setAccountItemsHashMaps","")},beforeDestroy(){this.tableLoader=!1},computed:{...(0,f.Se)({response:"xeroForm/getInvoices",currentWorkspace:"auth/getCurrentWorkspace",pdfUrl:"xeroForm/getAttachmentUrl",pdfLink:"xeroForm/getPdfLink",categories:"xeroForm/getCategories",authToken:"auth/getAuthToken",workspaceId:"xeroForm/getWorkspaceId",draftCheck:"xeroForm/getDraftCheck",total:"xeroForm/getTotalItems",noOfRecords:"xeroForm/getNoOfRecords",page:"xeroForm/getPage"})},methods:{async saveDraftForm(){try{let e={method:"post",url:`${ie.saveTicketDraft}/${this.ticket._id}`,data:{data:this.response?this.response:""},headers:{Authorization:this.authToken}};await v()(e),p.$emit("update-draft-form",this.response),p.$emit("show-snackbar",{text:"Draft has been saved",type:"success"})}catch(e){console.log("error =>",e)}},addInvoiceForm(){let e=[];this.categories?.trackingCategories.forEach((t=>{let s={trackingCategoryID:t.trackingCategoryID,trackingOptionID:""};e.push(s)})),e.length>0&&(this.newInvoiceForm.lineItems[0]["tracking"]=e),this.$store.commit("xeroForm/addNewInvoice",JSON.parse(JSON.stringify(this.newInvoiceForm)))},removeForm(e){this.$store.commit("xeroForm/removeInvoiceForm",e)},changeRequestType(){const e=this.requestType;this.newInvoiceForm.type=this.requestType=this.$refs.requestType.lazyValue,e!=this.requestType&&(this.loadingItems=!0,this.responseSuccessOfItems=!1,this.itemUp=[],"ACCREC"==this.requestType?this.isSold=!0:this.isSold=!1,this.getItemsUp(),this.response.invoices=this.response.invoices.map((e=>(e.lineItems.forEach((e=>{e.itemCode=""})),e["type"]=this.requestType,e))))},async savePdfLink(e){var t=this,s={token:"slack"===this.currentWorkspace.source?this.currentWorkspace.botToken:"test-string"};s["file"]=e.search("files/tickets")>-1?e:e.split("https://files.slack.com/")[1];var a={method:"post",url:ie.slack,data:s,responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}},o=await v()(a);if(!o)return;let i=new Blob([o.data],{type:o.headers["content-type"]});var n=new FileReader;n.readAsDataURL(i),n.onloadend=function(){var e=n.result;this.image_url=e};let r=document.createElement("a");r.href=window.URL.createObjectURL(i),t.$store.commit("xeroForm/setPdfLink",r.href)},submitInvoices(){let e="";if(this.loader=!0,e=this.response.invoices.find((e=>{if(!["ACCPAY","ACCREC"].includes(e.type))return e})),e)return p.$emit("show-snackbar",{text:`Please provide the request type of ${e.invoiceNumber}`,type:"error"}),void(this.loader=!1);this.$store.dispatch("xeroForm/submitInvoices",this.ticket).then((e=>{p.$emit("update-draft-form",this.response),this.loader=!1,p.$emit("change-ticket-xero-form-to-complete",!0),p.$emit("show-snackbar",{text:"Response has been submitted",type:"success"}),setTimeout((()=>{this.$store.commit("xeroForm/addInvoices",""),this.$emit("close-dialog")}),2e3)})).catch((e=>{this.loader=!1,p.$emit("show-snackbar",{text:e,type:"error"})}))},submitPayment(){const e=JSON.parse(JSON.stringify(this.payments[0]));e.account.accountID?e.date?e.amount?e.amount<=0?p.$emit("show-snackbar",{text:"Payment amounts must be positive amounts",type:"error"}):e.invoice.invoiceID?(this.paymentLoader=!0,delete e.account.code,this.axios.post(`${ie.submitInvoicePayment}/${this.workspaceId}`,{payments:[e]},{headers:{Authorization:this.authToken}}).then((e=>{this.paymentLoader=!1,p.$emit("show-snackbar",{text:"Payment has been submitted",type:"success"}),setTimeout((()=>{this.$emit("close-dialog")}),2e3)})).catch((e=>{this.paymentLoader=!1,p.$emit("show-snackbar",{text:e.response.data.message,type:"error"}),console.log(e)}))):p.$emit("show-snackbar",{text:"Invoice is required",type:"error"}):p.$emit("show-snackbar",{text:"Amount is required",type:"error"}):p.$emit("show-snackbar",{text:"Date is required",type:"error"}):p.$emit("show-snackbar",{text:"Account Code is required",type:"error"})},async fetchBrandingThemes(){var e={method:"get",url:`xero/get-branding-themes/${this.workspaceId}`,headers:{Authorization:this.authToken}};return this.resBrandingTheme=await v()(e),200==this.resBrandingTheme.status?(this.brandingResponse=!0,this.brandingThemes=this.resBrandingTheme.data.brandingThemes,this.brandingLoader=!1):200!=this.resBrandingTheme.status&&(this.brandingLoader=!1,console.log("error",this.resBrandingTheme)),this.resBrandingTheme},checkResponse(e){"itemCode"==e?this.getItemsUp():"accountCode"==e?this.getAccounts():"taxType"==e&&this.getTaxRates()},async getItemsUp(){},async getTaxRates(){var e={method:"get",url:`${ie.getTaxRates}/${this.workspaceId}`,headers:{Authorization:this.authToken}};if(this.resTaxRates=await v()(e),200==this.resTaxRates.status){let e=[];this.responseSuccessOfTaxRates=!0,e=this.resTaxRates.data.taxRates,this.taxRatesDropdown=e,this.loadingTaxRates=!1}else 200!=this.resTaxRates.status&&console.log("error",this.resTaxRates);return this.resTaxRates},async getAccounts(){},getPaidAccounts(){this.axios.get(`${ie.getAccounts}/${this.workspaceId}`,{headers:{Authorization:this.authToken}}).then((e=>{let t=[];this.responseSuccessOfPaidAccounts=!0,e.data?.accounts.forEach((e=>{e.enablePaymentsToAccount&&t.push({label:e.name,code:e.code})})),this.paidAccount=t,this.loadingPaidAccounts=!1})).catch((e=>{console.log(e)}))},async endIntersect(){this.paginate.page=this.page+1;const e=this.paginate.page*this.paginate.size;(e<this.total||10===this.noOfRecords)&&await this.$store.dispatch("xeroForm/getAccountItems",this.paginate)}},created(){this.$root.$on("check-response-brands",this.fetchBrandingThemes),this.$root.$on("check-response",this.checkResponse),this.$root.$on("submit-payment",(e=>{this.payments=e})),this.$root.$on("load-more-data",this.endIntersect)},beforeDestroy(){this.$root.$off("check-response"),this.$root.$off("submit-payment"),this.$root.$off("check-response-brands")}},uo=co,po=(0,P.Z)(uo,ea,ta,!1,null,"3abe9a72",null),mo=po.exports,ho={name:"AddToWorkspace",data(){return{dialog:!1,ticket:""}},components:{XeroForm:mo},mounted(){p.$on("open-xero-form-dialog",(e=>{this.ticket=e,this.dialog=!0}))},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},created(){},methods:{closeDialog(){this.dialog=!1,this.ticket="",this.$store.commit("xeroForm/addDraftCheck",!1)}},beforeDestroy(){p.$off("close-xero-form-dialog")}},go=ho,fo=(0,P.Z)(go,Qs,Gs,!1,null,"862c5ec4",null),ko=fo.exports,yo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" Reroute ticket ")]),e.loader?e._e():t($s.Z,{staticClass:"py-0 pt-1"},[t(He.ZB,{staticClass:"py-0 font-style-paragraph"},[e._v(" Note : Ticket will be moved to selected supervisor ")]),t(_.Z,{staticClass:"ma-0 px-0",attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"appColor--text default-input-field ma-1 pa-0",attrs:{items:[...e.supervisors,{user:!1,name:"Anyone ... "}],flat:"",solo:"","hide-details":"",placeholder:"Status",color:"appColor",dense:"","item-text":"name","item-value":"item"},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("p",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s?.name)+" ")]),t($e.Z),s.userRole?t("div",[s.socketId?t("div",[s.busy?t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"orange",small:"",dense:""}},[t(A.Z,{attrs:{"x-small":"",color:"orange darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v(" Busy ")])],1):t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"green",small:"",dense:""}},[t(A.Z,{attrs:{"x-small":"",color:"green darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v(" Online ")])],1)],1):t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"red",small:"",dense:""}},[t(A.Z,{attrs:{"x-small":"",color:"red darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v(" Offline ")])],1)],1):e._e()]}}],null,!1,491849652),model:{value:e.selectedSupervisor,callback:function(t){e.selectedSupervisor=t},expression:"selectedSupervisor"}})],1),t(_.Z,{staticClass:"ma-0 px-0 pb-0",attrs:{cols:"12"}},[t(Cs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",type:"text",dense:"","no-resize":"",required:"",placeholder:"Note"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1)],1),e.loader?t($s.Z,[t("div",{staticClass:"d-flex justify-center align-end"},[t(te.Z,{attrs:{indeterminate:"",color:"appColor"}})],1)]):t(He.h7,[t($e.Z),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.rerouteTicket()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.rerouteTicket()}}},[e._v(" Save ")])],1)],1)],1)],1)},vo=[],Co={name:"RerouteTicketDialog",data(){return{loader:!0,dialog:!1,ticket:"",selectedSupervisor:"",note:"",supervisors:[]}},mounted(){p.$on("open-reroute-ticket-dialog",(e=>{this.dialog=!0,this.ticket=e,this.getActiveSupervisors()}))},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},created(){},methods:{closeDialog(){this.dialog=!1,this.ticket="",this.selectedSupervisor="",this.note="",this.supervisors=[]},rerouteTicket(){let e="";if(0==this.selectedSupervisor.trim().length)return void p.$emit("show-snackbar",{type:"error",text:"Please fill all fields"});if("Anyone..."!==this.selectedSupervisor&&(e=this.supervisors.find((e=>e.name===this.selectedSupervisor))),0==this.note.trim().length)return void p.$emit("show-snackbar",{type:"error",text:"Please fill all fields"});const t={note:this.note};v().post(`${ie.rerouteTicketToSupervisor}/${this.ticket._id}?supervisorId=${e?._id}`,t,{headers:{Authorization:this.token}}).then((e=>{console.log(e),this.closeDialog(),p.$emit("ticket-status-completed")})).catch((e=>{console.log(e),p.$emit("show-snackbar",{type:"error",text:e.response.data.data})}))},getActiveSupervisors(){v().get(`${ie.getActiveSupervisorsForSpecificWorkspace}?workspaceId=${this.ticket.workspaceId}`,{headers:{Authorization:this.token}}).then((e=>{console.log("users Supervisor---\x3e",e.data.users),this.supervisors=e.data.users,this.loader=!1})).catch((e=>{p.$emit("show-snackbar",{text:e.response.data.message,type:"error"})}))}}},xo=Co,_o=(0,P.Z)(xo,yo,vo,!1,null,"4bbe8607",null),bo=_o.exports;let wo=null,To=null,Zo=null;var Ao={name:"DataTable",components:{Loader:Me,TicketComponent:Ds,NewTicketNotification:Rs,CompleteStatusDialog:Ls,XeroFormDialog:ko,RerouteTicketDialog:bo,ChangeRequestType:Ys},data:()=>({ticket:{},step:1,newTicketNotification:!1,workspaceName:""}),watch:{},computed:{...(0,f.Se)({user:"auth/getUser",onlineStatus:"auth/getOnlineStatus"}),userOnline(){return!(!this.user._id||!0!==this.onlineStatus)&&(this.resetData(),!0)}},created(){p.$on("ticket-status-completed",(()=>{this.getTicketFromSockets()})),p.$on("user-status-online",(()=>{this.resetData(),this.emitTicketSocket(),this.onlineIntervalCheck()})),p.$on("update-draft-form",(e=>{this.ticket["draft"]=e})),p.$on("change-ticket-xero-form-to-complete",(e=>{this.ticket["xeroSubmission"]=e})),this.listenTicketSocket()},mounted(){this.getTicketFromSockets()},methods:{onlineIntervalCheck(){null!==wo&&clearInterval(wo),wo=setInterval((()=>{let e=navigator.onLine;0==e&&!0===this.onlineStatus&&(p.$emit("change-user-status"),clearInterval(wo))}),2e3)},updateRequestType(e){this.ticket.requestType=e},resetData(){this.step=1,this.emptyCount=0,this.newTicketNotification=!1,this.ticket={},this.workspaceName=""},emitTicketSocket(){Jd.emit("findTicket",this.user._id)},listenTicketSocket(){null!==To&&clearInterval(To),Jd.on("ticketAssign",(e=>{null!==e&&0===Object.keys(this.ticket).length?(clearInterval(To),this.assignTicketToUser(e)):e||(null!==To&&clearInterval(To),To=setTimeout((()=>{this.user._id&&!0===this.onlineStatus?this.emitTicketSocket():clearInterval(To)}),1e4))}))},socketForChangeStatus(e){Jd.emit("changeStatus",{ticketId:this.ticket._id,userId:this.user._id,status:e})},assignTicketToUser(e){this.step=2,this.newTicketNotification=!0,this.ticket=e,this.workspaceName=e?.workspaceName,console.log("body here =>",this.ticket),null!==Zo&&clearInterval(Zo),Zo=setTimeout((()=>{this.resetData(),p.$emit("change-user-status",!1)}),6e4)},getTicketDetails(){this.socketForChangeStatus("InProgress"),clearTimeout(Zo),setTimeout((()=>this.APIcalling()),1e3)},async APIcalling(){let e=await v().get(ie.getTicketDetails+this.ticket._id);e.data&&e.data.ticket&&(console.log("here resp =>",e.data.ticket),this.ticket=e.data.ticket,this.ticket["workspaceName"]=this.workspaceName,this.step=4)},getTicketFromSockets(){this.user._id&&!0===this.onlineStatus&&(this.resetData(),this.emitTicketSocket(),this.onlineIntervalCheck())}},beforeDestroy(){p.$off("ticket-status-completed"),p.$off("user-status-online"),p.$off("update-draft-form"),p.$off("change-ticket-xero-form-to-complete")}},So=Ao,Io=(0,P.Z)(So,Be,ze,!1,null,"7344f114",null),Do=Io.exports,$o={name:"MainPage",components:{AppBar:Re,AccountantPage:Do},data:()=>({})},Fo=$o,Po=(0,P.Z)(Fo,Te,Ze,!1,null,null,null),Eo=Po.exports,Uo=function(){var e=this,t=e._self._c;return t($s.Z,[t("AppBar"),t("DataTable")],1)},jo=[],Ro=a(3863),Bo=a(9592),zo=function(){var e=this,t=e._self._c;return t("div",{},[t("TicketDetails"),t("CompleteStatusDialog"),t("CreateTicket"),t("CreateWorkspace"),t("MajorCreateWorkspaceDialog"),t("ConnectAccountingSoftware"),t("XeroFormDialog"),t("div",[t($s.Z,{staticClass:"justify-right my-0 py-0"},[t(b.Z,{staticClass:"ma-0 pa-0 justify-right hidden-sm-and-down"},[t(_.Z,{staticClass:"ma-0 pa-0",attrs:{lg:"8"}},["client"==e.user.role?t("div",{staticClass:"d-flex align-center"},[0!==e.workspaces.length?t(x.Z,{staticClass:"white--text text-capitalize ml-2",attrs:{color:"appColor"},on:{click:function(t){return e.createTicket()}}},[e._v(" Create Ticket ")]):e._e(),t(x.Z,{staticClass:"white--text text-capitalize ml-2",attrs:{color:"appColor"},on:{click:function(t){return e.createWorkspaceLatest()}}},[e._v(" Create Workspace ")]),e.currentWorkspace.isAccountingSoftConnected?e._e():t(x.Z,{staticClass:"white--text text-capitalize ml-2",attrs:{color:"appColor"},on:{click:function(t){return e.connectAccountingSoftware()}}},[e._v(" Connect Accounting Software ")])],1):e._e()]),t(_.Z,{staticClass:"ma-0 pa-0",attrs:{lg:"2"}},[t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Search",type:"text",dense:""},on:{input:function(t){return e.onChange()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(_.Z,{staticClass:"ma-0 pa-0",attrs:{lg:"2"}},[t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.statusValues,placeholder:"Status",color:"appColor",dense:""},on:{change:function(t){return e.onChange()}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}}]),model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1)],1),t("div",{staticClass:"hidden-sm-and-up"},["client"==e.user.role?t("div",[0!==e.workspaces.length?t(x.Z,{staticClass:"white--text text-capitalize mx-0 my-1",attrs:{block:"",color:"appColor"},on:{click:function(t){return e.createTicket()}}},[e._v(" Create Ticket ")]):e._e(),t(x.Z,{staticClass:"white--text text-capitalize mx-0 my-1",attrs:{block:"",color:"appColor"},on:{click:function(t){return e.createWorkspaceLatest()}}},[e._v(" Create Workspace ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-0 my-1",attrs:{block:"",color:"appColor"},on:{click:function(t){return e.connectAccountingSoftware()}}},[e._v(" Connect Accounting Software ")])],1):e._e(),t(w.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",placeholder:"Search",type:"text",dense:""},on:{input:function(t){return e.onChange()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(Bs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.statusValues,placeholder:"Status",color:"appColor",dense:""},on:{change:function(t){return e.onChange()}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}}]),model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1)],1)],1),t(Ro.Z,{staticClass:"elevation-0 font-style-paragraph",attrs:{headers:e.headers,items:e.items,"footer-props":{disableItemsPerPage:!0},page:e.page,"server-items-length":e.totalItems.count,loading:e.loader},on:{"update:page":e.updatePagination},scopedSlots:e._u([{key:"progress",fn:function(){return[t(Bo.Z,{attrs:{color:"appColor",indeterminate:""}})]},proxy:!0},{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.ticketNo",fn:function({item:s}){return[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"font-style-paragraph",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.openTicketDetails(s)}}},[e._v(" "+e._s(s.ticketNo)+" ")]),s.unreadBy&&void 0!==s.unreadBy[e.user._id]&&s.unreadBy[e.user._id]>0?t(pe.Z,{attrs:{color:"red",content:s.unreadBy[e.user._id],inline:""}}):e._e(),s.isSeen?e._e():t(pe.Z,{attrs:{color:"red",content:"new",inline:""}})],1)]}},{key:"item.no",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(10*(e.totalItems.pageNo-1)+s.no)+" ")])]}},{key:"item.statusLastUpdatedAt",fn:function({item:s}){return["Complete"===s.status?t("div",[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.statusLastUpdatedAt))+" ")]),t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatTime")(s.statusLastUpdatedAt))+" ")])]):t("div",[t("div",{staticClass:"font-style-paragraph"},[e._v("-")])])]}},{key:"item.status",fn:function({item:s}){return[t(Ie.Z,{class:"Complete"!==s.status?"pendingColor--text":"completedColor--text",attrs:{color:"Complete"!==s.status?"pendingBackGroundColor":"completedBackgroundColor",small:""}},[e._v(e._s(s.status))])]}},{key:"item.actions",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(De.Z,e._g(e._b({attrs:{bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""}},"v-btn",a,!1),s),[t(A.Z,{attrs:{small:""}},[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},"v-menu",o,!1),a),[t(he.Z,[t(ge.Z,{on:{click:function(t){return e.openTicketDetails(s)}}},[t(fe.V9,{staticClass:"font-style-paragraph mainTextColor--text"},[e._v("View Details")])],1),"supervisor"===e.user.role?t(ge.Z,{on:{click:function(t){return e.markComplete(s)}}},[t(fe.V9,{staticClass:"font-style-paragraph mainTextColor--text"},[e._v("Change Status")])],1):e._e()],1)],1)]}}],null,!0)},[t("span",[e._v("Click to Open Details")])])]}}],null,!0)},[t(Bo.Z)],1)],1)},No=[],Wo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center testingParentDiv"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"",justifyContent:"right","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t("TicketDetailsHeader",{attrs:{ticket:e.ticket},on:{closeDialog:function(t){return e.closeDialog(t)}}}),t("div",{on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[t(He.h7,{staticClass:"pt-0"},[t(b.Z,{staticClass:"ma-0 pa-0"},[t(_.Z,{ref:"chatBox",staticClass:"overflow-auto",staticStyle:{height:"60vh","max-height":"60vh"},attrs:{cols:"accountant"==e.user.role?8:12,id:"chatBox"}},[t("ChatModule")],1),"accountant"==e.user.role?t(_.Z,{staticClass:"overflow-auto backgroundFAQColor",staticStyle:{height:"60vh","max-height":"60vh"},attrs:{cols:"4"}},[t("PreDefinedMessages")],1):e._e()],1)],1),"superadmin"!=e.user.role?t("TicketDetailsFooter",{attrs:{ticket:e.ticket}}):e._e()],1)],1)],1)],1)},Oo=[],qo={name:"TicketDetailsComponent",components:{PreDefinedMessages:Nt,ChatModule:ss,TicketDetailsHeader:ys,TicketDetailsFooter:Zs},data(){return{dialog:!1,ticket:{}}},computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace"})},created(){this.subscribe()},methods:{dragover(e){e.preventDefault()},dragleave(e){},drop(e){e.preventDefault(),e.dataTransfer.files[0]&&p.$emit("update-file-input",e.dataTransfer.files[0]);var t=e.dataTransfer.files[0];if(p.$emit("update-preview",e.dataTransfer.files[0]),t.files){var s=new FileReader;s.onload=e=>{},s.readAsDataURL(t.files[0])}},closeDialog(){this.dialog=!1,p.$emit("close-details-dialog",this.ticket),this.$store.commit("ticket/setMessages",[])},convertBlobToBase64:e=>new Promise(((t,s)=>{const a=new FileReader;a.onerror=s,a.onload=()=>{t(a.result)},a.readAsDataURL(e)})),async previewImage(e){var t={token:this.currentWorkspace.botToken};t["file"]=e.search("files/tickets")>-1?e:e.split("https://files.slack.com/")[1];var s={method:"post",url:ie.slack,data:t,responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return v()(s)},async previewURL(e){if(!e.attachmentUrl)return;let t=await this.previewImage(e.attachmentUrl),s=new Blob([t.data],{type:t.headers["content-type"]});const a=await this.convertBlobToBase64(s);this.imageUrl=a},subscribe(){Jd.on("comment",(e=>{this.token&&this.ticket.ticketNo==e.ticketNo&&this.$store.dispatch("ticket/getAllMessagesByTicketId",{id:this.ticket._id})}))}},mounted(){p.$on("open-details-dialog",(e=>{this.dialog=!0,this.ticket=e,this.$store.dispatch("ticket/getAllMessagesByTicketId",{id:e._id})}))}},Lo=qo,Mo=(0,P.Z)(Lo,Wo,Oo,!1,null,"5f44f16d",null),Ho=Mo.exports,Xo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"",justifyContent:"right","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Create Ticket "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t("form",{on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[t(Bs.Z,{attrs:{items:e.requestTypes,label:"Request Type*",required:""},model:{value:e.request_type,callback:function(t){e.request_type=t},expression:"request_type"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(Cs.Z,{attrs:{"auto-grow":"",rows:"1","row-height":"15",label:"Message*",required:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),t(vs.Z,{attrs:{label:"File attachment",counter:"","show-size":"","truncate-length":"40"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),t("small",[e._v("*indicates required field")])],1),t(He.h7,[t($e.Z),t(x.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v(" Close ")]),t(x.Z,{attrs:{color:"blue darken-1",text:"",loading:e.loader},on:{click:function(t){return e.createTicket()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)},Vo=[],Ko={name:"CreateTicket",components:{},data(){return{requestTypes:["Bill","Invoice","Salary","Others"],dialog:!1,message:"",request_type:"",file:null,loader:!1}},computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace"})},methods:{dragover(e){e.preventDefault()},dragleave(e){},drop(e){e.preventDefault(),e.dataTransfer.files[0]&&(this.file=e.dataTransfer.files[0])},closeDialog(){this.dialog=!1,this.request_type="",this.file=null,this.message=""},handleChange(e,t){this[t]=e},createTicket(){if(!0===this.loader)return;if(this.loader=!0,!this.message|!this.request_type)return p.$emit("show-snackbar",{text:"Please provide all the required fields",type:"error"}),void(this.loader=!1);let e=new FormData;e.append("file",this.file),e.append("message",this.message),e.append("requestType",this.request_type),v().post(`${ie.createTicket}${this.currentWorkspace.workspaceId}`,e,{headers:{Authorization:this.token,"Content-Type":"multipart/form-data"}}).then((e=>{p.$emit("show-snackbar",{text:"Successfully created",type:"success"}),this.$store.dispatch("ticket/getTasks"),this.dialog=!1,this.loader=!1,this.file=null,this.message="",this.request_type=""})).catch((e=>{p.$emit("show-snackbar",{text:"Something went wrong!",type:"error"}),this.loader=flase}))}},mounted(){var e=this;p.$on("open-create-ticket-dialog",(()=>{this.dialog=!0}));var t={method:"get",url:ie.ticketTypes,headers:{}};v()(t).then((function(t){t.data.length>0&&(e.requestTypes=[]);for(let s=0;s<t.data.length;s++)e.requestTypes.push(t.data[s].title)})).catch((function(e){console.log(e)}))}},Yo=Ko,Qo=(0,P.Z)(Yo,Xo,Vo,!1,null,"2bd080de",null),Go=Qo.exports,Jo=function(){var e=this,t=e._self._c;return t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Create Workspace "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),1===e.step?t("form",[t(He.ZB,{staticClass:"pb-0"},[t($s.Z,{staticClass:"pb-0"},[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Workspace Name*"},model:{value:e.workspace_name,callback:function(t){e.workspace_name=t},expression:"workspace_name"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,[t($s.Z,{staticClass:"py-0 d-flex justify-end"},[t(x.Z,{staticClass:"white--text text-capitalize mr-2",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.createWorkspace()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createWorkspace()}}},[e._v(" Save ")])],1)],1)],1):2===e.step?t("form",[t(He.ZB,{staticClass:"pb-0"},[t($s.Z,{staticClass:"pb-0 d-flex"},[t("span",{staticClass:"font-style-paragraph pa-0 ma-0"},[e._v(' Great ! Now please connect "Xero" with email'),t("p",{staticClass:"font-style-paragraph pa-0 ma-0 appColor--text"},[e._v(e._s(e.email))])]),t($e.Z),t(x.Z,{staticClass:"text-capitalize mt-2",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.copyEmail()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-content-copy ")])],1)],1)],1),t(He.h7,[t($s.Z,{staticClass:"py-0 d-flex justify-end"},[t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.nextPhase()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextPhase()}}},[e._v(" Next ")])],1)],1)],1):3===e.step?t("form",[t(He.ZB,{staticClass:"pb-0"},[t($s.Z,{staticClass:"pb-0"},[e._v(' Press "Done" Button once Access is granted ')])],1),t(He.h7,[t($s.Z,{staticClass:"py-0 d-flex justify-end"},[t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.complete()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.complete()}}},[e._v(" Done ")])],1)],1)],1):e._e()],1)],1)},ei=[],ti={name:"CreateWorkspace",components:{},data(){return{dialog:!1,description:"",workspace_name:"",file:null,step:1,email:"bot@recordme.ai"}},computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace"})},methods:{closeDialog(){this.dialog=!1,this.workspace_name="",this.description="",this.step=1},handleChange(e,t){this[t]=e},createWorkspace(){if(!this.workspace_name)return p.$emit("show-snackbar",{text:"Please provide all the required fields",type:"error"});v().post(ie.createWorkspace,{name:this.workspace_name,description:this.description},{headers:{Authorization:this.token}}).then((e=>{p.$emit("show-snackbar",{text:"Successfully created",type:"success"}),this.$store.dispatch("auth/getWorkspacesForSpecificUser",{ascSort:!1}),this.workspace_name="",this.description="",this.step=2})).catch((e=>{p.$emit("show-snackbar",{text:"Something went wrong!",type:"error"})}))},nextPhase(){this.step=this.step+1},complete(){console.log("xero api is connected"),this.closeDialog()},copyEmail(){navigator.clipboard.writeText(this.email),p.$emit("show-snackbar",{text:"Email has been copied",type:"success"})}},mounted(){p.$on("open-create-workspace-dialog",(()=>{this.dialog=!0}))}},si=ti,ai=(0,P.Z)(si,Jo,ei,!1,null,"1e73d438",null),oi=ai.exports,ii=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Connect Workspace "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t("div",[t("p",{staticClass:"font-style-heading pl-4 pt-4 mb-0"},[e._v(" Third Party Integrations")]),t(_.Z,{staticClass:"py-2 d-flex justify-center",attrs:{md:"12"}},[t("a",{staticStyle:{"align-items":"center",color:"#fff","background-color":"#4A154B",border:"0","border-radius":"4px",display:"inline-flex","font-family":"Lato, sans-serif","font-size":"14px","font-weight":"600",height:"44px","justify-content":"center","text-decoration":"none",width:"224px"},attrs:{href:e.baseURL,target:"_blank"}},[t("svg",{staticStyle:{height:"16px",width:"16px","margin-right":"12px"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.8 122.8"}},[t("path",{attrs:{d:"M25.8 77.6c0 7.1-5.8 12.9-12.9 12.9S0 84.7 0 77.6s5.8-12.9 12.9-12.9h12.9v12.9zm6.5 0c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9V77.6z",fill:"#e01e5a"}}),t("path",{attrs:{d:"M45.2 25.8c-7.1 0-12.9-5.8-12.9-12.9S38.1 0 45.2 0s12.9 5.8 12.9 12.9v12.9H45.2zm0 6.5c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H12.9C5.8 58.1 0 52.3 0 45.2s5.8-12.9 12.9-12.9h32.3z",fill:"#36c5f0"}}),t("path",{attrs:{d:"M97 45.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9-5.8 12.9-12.9 12.9H97V45.2zm-6.5 0c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9V12.9C64.7 5.8 70.5 0 77.6 0s12.9 5.8 12.9 12.9v32.3z",fill:"#2eb67d"}}),t("path",{attrs:{d:"M77.6 97c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9-12.9-5.8-12.9-12.9V97h12.9zm0-6.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H77.6z",fill:"#ecb22e"}})]),e._v("Create with Slack")])]),t("p",{staticClass:"font-style-heading pl-4 pt-4 mb-0"},[e._v(" Custom Work Space")]),t(_.Z,{staticClass:"py-2 d-flex justify-center",attrs:{md:"12"}},[t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor",width:"150"},on:{click:function(t){return e.createWorkspace()}}},[e._v(" Create with App ")])],1)],1)],1)],1)],1)},ni=[];var ri={name:"MajorCreateWorkspaceDialog",data(){return{dialog:!1,baseURL:""}},mounted(){p.$on("open-major-create-workspace-dialog",(e=>{this.dialog=!0;let t=this.token;t=t.split(" "),t=t[t.length-1],this.baseURL=`https://dev-backend.recordme.ai/slack/slackInstall?token=${t}`}))},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},created(){},methods:{closeDialog(){this.dialog=!1},createWorkspace(){this.dialog=!1,p.$emit("open-create-workspace-dialog")},addToSlack(){this.dialog=!1}}},li=ri,ci=(0,P.Z)(li,ii,ni,!1,null,"36461e09",null),di=ci.exports,ui=function(){var e=this,t=e._self._c;return t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Connect Accounting Software "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t("form",[t(He.ZB,{staticClass:"pb-0"},[t($s.Z,{staticClass:"pb-0"},[t(b.Z,[t(_.Z,{staticClass:"ma-0 py-0 pl-2",attrs:{cols:"12"}},[t("p",{staticClass:"font-style-paragraph ma-0 pa-0"},[e._v(" Please select one of the following accounting software. ")])]),t(_.Z,{staticClass:"ma-0 px-0",attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"appColor--text default-input-field ma-1 pa-0",attrs:{flat:"",solo:"","hide-details":"",items:e.softwares,placeholder:"Status",color:"appColor",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.connectAccontingSoftware()}},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("span",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s))])]}}]),model:{value:e.software,callback:function(t){e.software=t},expression:"software"}})],1)],1)],1)],1),t(He.h7,[t($s.Z,{staticClass:"py-0 d-flex justify-end"},[t(x.Z,{staticClass:"white--text text-capitalize mr-2",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{loading:e.loader,color:"appColor"},on:{click:function(t){return e.connectAccontingSoftware()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.connectAccontingSoftware()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)},pi=[],mi={name:"ConnectAccountingSoftware",data(){return{dialog:!1,software:"",softwares:["Xero"],loader:!1}},computed:{...(0,f.Se)({token:"auth/getAuthToken",currentWorkspace:"auth/getCurrentWorkspace"})},methods:{closeDialog(){this.dialog=!1,this.software="",this.loader=!1},connectAccontingSoftware(){if(this.loader=!0,!this.software)return p.$emit("show-snackbar",{text:"Please provide all the required fields",type:"error"}),void(this.loader=!1);const{workspace_id:e}=this.currentWorkspace;let t=this.token;t=t.split(" "),t=t[t.length-1],window.location.replace(`https://dev-backend.recordme.ai/xero/connect?token=${t}&workspace_id=${e}`)}},mounted(){p.$on("open-connect-accounting-software-dialog",(()=>{this.dialog=!0}))}},hi=mi,gi=(0,P.Z)(hi,ui,pi,!1,null,null,null),fi=gi.exports,ki={name:"DataTableSupervisor",components:{TicketDetails:Ho,CompleteStatusDialog:Ls,CreateTicket:Go,CreateWorkspace:oi,MajorCreateWorkspaceDialog:di,ConnectAccountingSoftware:fi,XeroFormDialog:ko},data:()=>({getTransactions:[],headers:[{text:"Created At",value:"createdAt",sortable:!1},{text:"Ticket ID",value:"ticketNo",sortable:!1},{text:"Type",value:"requestType",sortable:!1},{text:"Completed ON",value:"statusLastUpdatedAt",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Action",value:"actions",sortable:!1}],statusValues:["All","Complete","Pending"],search:"",status:"All",page:1,loader:!0,crossBtn:!1}),watch:{},mounted(){this.$store.dispatch("ticket/getTasks").then((e=>this.loader=!1)).catch((e=>console.log(e))),this.search=this.searchFromStore,this.status=this.statusFromStore,p.$on("close-details-dialog",(e=>{(0==e.isSeen||e.unreadBy[this.user._id]>0)&&this.$store.dispatch("ticket/setTicketAsReadable",e,this.page)})),p.$on("update-loader",(e=>{this.loader=e,1==e&&this.$store.commit("ticket/addTickets",[])}))},computed:{...(0,f.Se)({items:"ticket/getTickets",user:"auth/getUser",token:"auth/getAuthToken",totalItems:"ticket/getTotalItems",workspaces:"auth/getWorkspaces",statusFromStore:"ticket/getStatus",searchFromStore:"ticket/getSearch",currentWorkspace:"auth/getCurrentWorkspace"})},methods:{onChange(){this.loader=!0,this.$store.commit("ticket/addTickets",[]),this.$store.commit("ticket/setStatus",this.status),this.$store.commit("ticket/setSearch",this.search.trim()),this.updatePagination(1)},async updatePagination(e){this.page=e,await this.$store.dispatch("ticket/getTasks",e),this.loader=!1},async openTicketDetails(e){var t=e;try{(0==e.isSeen||e.unreadBy[this.user._id]>0)&&this.$store.dispatch("ticket/setTicketAsReadable",e,this.page);let s=await v().get(ie.getTicketDetails+e._id);s.data&&s.data.ticket&&(t=s.data.ticket)}catch(s){console.log("error in retrieving data",s.message)}p.$emit("open-details-dialog",t)},markComplete(e){p.$emit("open-complete-status-dialog",e)},createTicket(){p.$emit("open-create-ticket-dialog")},createWorkspaceLatest(){p.$emit("open-major-create-workspace-dialog")},createWorkspace(){p.$emit("open-create-workspace-dialog")},connectAccountingSoftware(){p.$emit("open-connect-accounting-software-dialog")}},created(){}},yi=ki,vi=(0,P.Z)(yi,zo,No,!1,null,"d61eb640",null),Ci=vi.exports,xi={name:"SupervisorMainPage",components:{AppBar:Re,DataTable:Ci},data:()=>({})},_i=xi,bi=(0,P.Z)(_i,Uo,jo,!1,null,null,null),wi=bi.exports,Ti={name:"Dashboard",components:{SnackBar:U,NavigationBar:we,MainPage:Eo,SupervisorMainPage:wi},data:()=>({}),computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",role:"auth/getUserRole"})},methods:{},mounted(){this.onlineStatus&&this.token&&"accountant"===this.role&&Jd.emit("userConnected",this.user._id)}},Zi=Ti,Ai=(0,P.Z)(Zi,ce,de,!1,null,"5e6a4554",null),Si=Ai.exports,Ii=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("SupervisorPool")],1)},Di=[],$i=function(){var e=this,t=e._self._c;return t("div",[t("AppBar"),t("SupervisorPage")],1)},Fi=[],Pi=function(){var e=this,t=e._self._c;return e.userOnline?t("div",[t("CompleteStatusDialog"),t("XeroFormDialog"),t("RerouteTicketSupervisorDialog"),t("ChangeRequestType",{on:{"update-request-type":e.updateRequestType}}),1==e.step?t("Loader",{scopedSlots:e._u([{key:"text",fn:function(){return[e._v("Waiting for new ticket ...")]},proxy:!0}],null,!1,2214646758)}):2==e.step?t("NewTicketNotification",{attrs:{newTicketNotification:e.newTicketNotification,ticket:e.ticket},on:{"change-step":e.getTicketDetails}}):4==e.step?t("TicketComponent",{attrs:{ticket:e.ticket}}):e._e()],1):t("div",[t("Loader",{scopedSlots:e._u([{key:"text",fn:function(){return[e._v("Please change your status to online")]},proxy:!0}])})],1)},Ei=[],Ui=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._v(" Reroute ticket ")]),e.loader?e._e():t($s.Z,{staticClass:"py-0 pt-1"},[t(He.ZB,{staticClass:"py-0 font-style-paragraph"},[e._v(" Note : Ticket will be moved to selected accountant ")]),t(_.Z,{staticClass:"ma-0 px-0",attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"appColor--text default-input-field ma-1 pa-0",attrs:{items:e.accountants,flat:"",solo:"","hide-details":"",placeholder:"Status",color:"appColor",dense:"","item-text":"name","item-value":"item"},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("p",{staticClass:"font-style-paragraph mainTextColor--text ma-0 pa-0"},[e._v(" "+e._s(s?.name)+" ")]),t($e.Z),s.userRole?t("div",[s.socketId?t("div",[s.busy?t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"orange",small:"",dense:""}},[t(A.Z,{attrs:{"x-small":"",color:"orange darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v(" Busy ")])],1):t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"green",small:"",dense:""}},[t(A.Z,{attrs:{"x-small":"",color:"green darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v(" Online ")])],1)],1):t(Ie.Z,{staticClass:"d-flex row-pointer",attrs:{color:"red",small:"",dense:""}},[t(A.Z,{attrs:{"x-small":"",color:"red darken-4"}},[e._v("mdi-circle-medium")]),t("p",{staticClass:"white--text font-style-paragraph pl-2 pt-1"},[e._v(" Offline ")])],1)],1):e._e()]}}],null,!1,491849652),model:{value:e.selectedAccountant,callback:function(t){e.selectedAccountant=t},expression:"selectedAccountant"}})],1),t(_.Z,{staticClass:"ma-0 px-0 pb-0",attrs:{cols:"12"}},[t(Cs.Z,{staticClass:"d-flex appColor--text default-input-field ma-1 pa-0",attrs:{autocomplete:!1,flat:"",solo:"","hide-details":"",color:"appColor",type:"text",dense:"","no-resize":"",required:"",placeholder:"Note"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1)],1),e.loader?t($s.Z,[t("div",{staticClass:"d-flex justify-center align-end"},[t(te.Z,{attrs:{indeterminate:"",color:"appColor"}})],1)]):t(He.h7,[t($e.Z),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.rerouteTicket()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.rerouteTicket()}}},[e._v(" Save ")])],1)],1)],1)],1)},ji=[],Ri={name:"RerouteTicketSupervisorDialog",data(){return{loader:!0,dialog:!1,ticket:"",selectedAccountant:"",note:"",accountants:[]}},mounted(){p.$on("open-reroute-ticket-supervisor-dialog",(e=>{this.dialog=!0,this.ticket=e,this.getActiveAccountants()}))},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},created(){},methods:{closeDialog(){this.dialog=!1,this.ticket="",this.selectedAccountant="",this.note="",this.accountants=[]},rerouteTicket(){let e="";if(console.log(this.selectedAccountant),0==this.selectedAccountant.trim().length)return void p.$emit("show-snackbar",{type:"error",text:"Please fill all fields"});if(e=this.accountants.find((e=>e.name===this.selectedAccountant)),0==this.note.trim().length)return void p.$emit("show-snackbar",{type:"error",text:"Please fill all fields"});const t={note:this.note};v().post(`${ie.rerouteTicketToAccountant}/${this.ticket._id}?accountantId=${e?._id}`,t,{headers:{Authorization:this.token}}).then((e=>{console.log(e),this.closeDialog(),p.$emit("ticket-status-completed")})).catch((e=>{console.log(e),p.$emit("show-snackbar",{type:"error",text:e.response.data.data})}))},getActiveAccountants(){console.log("all accountants>>>"),v().get(`${ie.getActiveAccountantsForSpecificWorkspace}?workspaceId=${this.ticket.workspaceId}`,{headers:{Authorization:this.token}}).then((e=>{console.log("users Accountant---\x3e",e.data.users),this.accountants=e.data.users,this.loader=!1})).catch((e=>{p.$emit("show-snackbar",{text:e.response.data.message,type:"error"})}))}}},Bi=Ri,zi=(0,P.Z)(Bi,Ui,ji,!1,null,"d9e149f2",null),Ni=zi.exports;let Wi=null,Oi=null,qi=null;var Li={name:"DataTable",components:{Loader:Me,TicketComponent:Ds,NewTicketNotification:Rs,CompleteStatusDialog:Ls,XeroFormDialog:ko,RerouteTicketSupervisorDialog:Ni,ChangeRequestType:Ys},data:()=>({ticket:{},step:1,newTicketNotification:!1,workspaceName:"",xeroSubmission:!1}),watch:{},computed:{...(0,f.Se)({user:"auth/getUser",onlineStatus:"auth/getOnlineStatus"}),userOnline(){return!(!this.user._id||!0!==this.onlineStatus)&&(this.resetData(),!0)}},created(){p.$on("ticket-status-completed",(()=>{this.getTicketFromSockets()})),p.$on("user-status-online",(()=>{this.resetData(),this.emitTicketSocket(),this.onlineIntervalCheck()})),this.listenTicketSocket()},mounted(){this.getTicketFromSockets()},methods:{onlineIntervalCheck(){null!==Wi&&clearInterval(Wi),Wi=setInterval((()=>{let e=navigator.onLine;0==e&&!0===this.onlineStatus&&(p.$emit("change-user-status"),clearInterval(Wi))}),2e3)},updateRequestType(e){this.ticket.requestType=e},resetData(){this.step=1,this.emptyCount=0,this.newTicketNotification=!1,this.ticket={},this.workspaceName=""},emitTicketSocket(){Jd.emit("findSupervisorTicket",this.user._id)},listenTicketSocket(){null!==Oi&&clearInterval(Oi),Jd.on("ticketAssign",(e=>{null!==e&&0===Object.keys(this.ticket).length?(clearInterval(Oi),this.assignTicketToUser(e)):e||(null!==Oi&&clearInterval(Oi),Oi=setTimeout((()=>{this.user._id&&!0===this.onlineStatus?this.emitTicketSocket():clearInterval(Oi)}),1e4))}))},socketForChangeStatus(e){Jd.emit("changeSupervisorTicketStatus",{ticketId:this.ticket._id,userId:this.user._id,status:e})},assignTicketToUser(e){console.log("body here =>",e),this.step=2,this.newTicketNotification=!0,this.ticket=e,this.workspaceName=e?.workspaceName,null!==qi&&clearInterval(qi),qi=setTimeout((()=>{this.resetData(),p.$emit("change-user-status",!1)}),6e4)},getTicketDetails(){this.socketForChangeStatus("InProgress"),clearTimeout(qi),setTimeout((()=>this.APIcalling()),1e3)},async APIcalling(){let e=await v().get(ie.getTicketDetails+this.ticket._id);e.data&&e.data.ticket&&(console.log("here resp =>",e.data.ticket),this.xeroSubmission=e.data.ticket.xeroSubmission,this.ticket=e.data.ticket,this.ticket["workspaceName"]=this.workspaceName,this.step=4)},getTicketFromSockets(){this.user._id&&!0===this.onlineStatus&&(this.resetData(),this.emitTicketSocket(),this.onlineIntervalCheck())}},beforeDestroy(){p.$off("ticket-status-completed"),p.$off("user-status-online")}},Mi=Li,Hi=(0,P.Z)(Mi,Pi,Ei,!1,null,"954797de",null),Xi=Hi.exports,Vi={name:"MainPage",components:{AppBar:Re,SupervisorPage:Xi},data:()=>({})},Ki=Vi,Yi=(0,P.Z)(Ki,$i,Fi,!1,null,null,null),Qi=Yi.exports,Gi={name:"SupervisorTicketpool",components:{SnackBar:U,NavigationBar:we,SupervisorPool:Qi},data:()=>({}),computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",role:"auth/getUserRole"})},methods:{},mounted(){}},Ji=Gi,en=(0,P.Z)(Ji,Ii,Di,!1,null,"f00f8162",null),tn=en.exports,sn=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar")],1)},an=[],on={name:"AdminDashboard",components:{SnackBar:U,NavigationBar:we,MainPage:Eo},data:()=>({}),computed:{},methods:{}},nn=on,rn=(0,P.Z)(nn,sn,an,!1,null,"511a4c81",null),ln=(rn.exports,function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("AccountantPage")],1)}),cn=[],dn=function(){var e=this,t=e._self._c;return t($s.Z,[t("AppBar"),t("AccountantTable")],1)},un=[],pn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-4"},[t("WorkspacesDetails"),t("CreateUser"),t("AddToWorkspace"),t("DeleteDialog"),t("ChangeUserType"),t(w.Z,{staticClass:"ml-3",staticStyle:{width:"25%"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),[t(x.Z,{staticClass:"text-capitalize mt-5",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.createUser()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-plus ")])],1)],t(Ro.Z,{staticClass:"elevation-0 font-style-paragraph",attrs:{headers:e.headers,items:e.users,search:e.search},scopedSlots:e._u([{key:"item.name",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(String(s.name).toLocaleUpperCase())+" ")])]}},{key:"item.email",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(e._s(s.email))])]}},{key:"item.role",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(String(s.role).toLocaleUpperCase())+" ")])]}},{key:"item.workspaces",fn:function({item:s}){return["specific"===s.userType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.viewWorkspaces(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-eye ")])],1)]}}],null,!0)},[t("span",[e._v("View Workspaces")])]):e._e()]}},{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.userType",fn:function({item:s}){return[t("div",{staticClass:"d-flex"},[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.changeUserType(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-convert ")])],1)]}}],null,!0)},[t("span",[e._v("Change Accountant Type")])]),t("div",{staticClass:"font-style-paragraph ml-2 pt-1"},[e._v(" "+e._s(String(s.userType).toLocaleUpperCase())+" ")])],1)]}},{key:"item.actions",fn:function({item:s}){return["specific"===s.userType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.openTicketDetails(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-office-building-plus ")])],1)]}}],null,!0)},[t("span",[e._v("Assign Workspace")])]):e._e(),e._v("   "),t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.deleteUser(s._id)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-delete ")])],1)]}}],null,!0)},[t("span",[e._v("Delete User")])])]}}],null,!0)})],2)},mn=[],hn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("UnAssignAccountantFromWorkspace"),t("UnAssignSupervisorFromWorkspace"),t(Dt.Z,{attrs:{width:"700",scrollable:"",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2"},[e._v(" User Workspaces "),t($e.Z),t(A.Z,{on:{click:function(t){e.dialog=!1}}},[e._v("mdi-close")])],1),t(as.Z),t(He.ZB,{staticClass:"my-2"},[t(b.Z,{staticClass:"pa-3",attrs:{justify:"center"}},[t(Ro.Z,{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.workspaces,"hide-default-footer":!0},scopedSlots:e._u([{key:"item.name",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(e._s(s.name))])]}},{key:"item.actions",fn:function({item:s}){return["accountant"===e.user.role?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"red",outlined:"",small:""},on:{click:function(t){return e.unAssignAccountantFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-minus ")])],1)]}}],null,!0)},[t("span",[e._v("Unassign Workspace")])]):"supervisor"===e.user.role?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"red",outlined:"",small:""},on:{click:function(t){return e.unAssignSupervisorFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-minus ")])],1)]}}],null,!0)},[t("span",[e._v("Unassign Workspace")])]):t("div",[e._v(" - ")])]}}],null,!0)})],1)],1)],1)],1)],1)},gn=[],fn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center font-style-heading"},[e._v(" Un Assign Accountant ")]),t(He.ZB,{staticClass:"font-style-paragraph"},[e._v(" Note : Accountant will be removed permanently from workspace. ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t("h3",{staticClass:"font-style-section-heading"},[e._v(" Are you sure you want to unassign this accountant ?")])])],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.unAssignAccountant()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.unAssignAccountant()}}},[e._v(" Unassign ")])],1)],1)],1)],1)},kn=[],yn={name:"UnAssignAccountantFromWorkspace",data(){return{dialog:!1,selected:"",accountant:""}},mounted(){p.$on("unassign-accountant-from-workspace",(e=>{console.log("here",e),this.accountant=e,this.dialog=!0}))},computed:{...(0,f.Se)({items:"auth/getAccountantUsers",token:"auth/getAuthToken"})},created(){},methods:{closeDialog(){this.dialog=!1,this.selected=""},unAssignAccountant(){this.$store.dispatch("user/unAssignWorkspace",this.accountant).then((e=>{this.dialog=!1,this.$store.dispatch("auth/getUsers"),this.$store.dispatch("auth/getWorkspaces"),p.$emit("show-snackbar",{text:"Accountant Removed from Workspace",type:"success"})})).catch((e=>{console.log(e),p.$emit("show-snackbar",{text:"Something went wrong",type:"error"})}))}}},vn=yn,Cn=(0,P.Z)(vn,fn,kn,!1,null,"304a7936",null),xn=Cn.exports,_n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center font-style-heading"},[e._v(" Un Assign Supervisor ")]),t(He.ZB,{staticClass:"font-style-paragraph"},[e._v(" Note : Supervisor will be removed permanently from workspace. ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t("h3",{staticClass:"font-style-section-heading"},[e._v(" Are you sure you want to unassign this supervisor ?")])])],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize",attrs:{color:"appColor"},on:{click:function(t){return e.unAssignSupervisor()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.unAssignSupervisor()}}},[e._v(" Unassign ")])],1)],1)],1)],1)},bn=[],wn={name:"UnAssignSupervisorFromWorkspace",data(){return{dialog:!1,selected:"",supervisor:""}},mounted(){p.$on("unassign-supervisor-from-workspace",(e=>{console.log("obj>>>",e),this.supervisor=e,this.dialog=!0}))},computed:{...(0,f.Se)({items:"auth/getSupervisorUsers",token:"auth/getAuthToken"})},created(){},methods:{closeDialog(){this.dialog=!1,this.selected=""},unAssignSupervisor(){this.$store.dispatch("user/unAssignWorkspace",this.supervisor).then((e=>{this.dialog=!1,this.$store.dispatch("auth/getUsers"),this.$store.dispatch("auth/getWorkspaces"),p.$emit("show-snackbar",{text:"Supervisor Removed from Workspace",type:"success"})})).catch((e=>{console.log(e),p.$emit("show-snackbar",{text:"Something went wrong",type:"error"})}))}}},Tn=wn,Zn=(0,P.Z)(Tn,_n,bn,!1,null,"3fb380ce",null),An=Zn.exports,Sn={name:"WorkspaceDetails",components:{UnAssignAccountantFromWorkspace:xn,UnAssignSupervisorFromWorkspace:An},data(){return{dialog:!1,workspaces:[],headers:[{text:"Id",value:"workspaceId.workspaceId"},{text:"Name",value:"workspaceId.workspaceName"},{text:"Actions",value:"actions"}],user:""}},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},beforeDestroy(){p.$off("open-details-dialog-for-workspaces")},methods:{unAssignAccountantFromWorkspace(e){let t={objectId:e._id};p.$emit("unassign-accountant-from-workspace",t),this.dialog=!1},unAssignSupervisorFromWorkspace(e){let t={objectId:e._id};p.$emit("unassign-supervisor-from-workspace",t),this.dialog=!1},apiCall(e){var t={method:"get",url:`${ie.getWorkspacesForSpecificUser}?userId=${e._id}`,headers:{},headers:{Authorization:this.token}};v()(t).then((e=>{this.workspaces=e.data.workspaces})).catch((e=>{}))}},mounted(){p.$on("open-details-dialog-for-workspaces",(e=>{this.dialog=!0,this.user=e,this.apiCall(e)}))}},In=Sn,Dn=(0,P.Z)(In,hn,gn,!1,null,null,null),$n=Dn.exports,Fn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("Snackbar"),t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"",justifyContent:"right","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Create User "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t("form",[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Name *",maxLength:"50"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Email *",maxLength:"50"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Password * ",type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",maxLength:"30"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",items:e.accountantTypes,"item-text":"text","item-value":"value",label:"Accountant Type *"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)],1),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,{staticClass:"px-4"},[t($s.Z,[t(b.Z,{staticClass:"mx-1"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",color:"appColor"},on:{click:function(t){return e.createUser()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createUser()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)],1)],1)],1)},Pn=[],En={name:"CreateUser",components:{Snackbar:U},data(){return{dialog:!1,workspaces:"",name:"",email:"",password:"",type:"",accountantTypes:[{text:"Public",value:"public"},{text:"Specific",value:"specific"}],emailRules:[e=>/.+@.+/.test(e)||"Invalid Email address"],show:!1}},computed:{},methods:{validateEmail(e){var t=/\S+@\S+\.\S+/;return t.test(e)},createUser(){if(!this.name||!this.email||!this.password||!this.type)return p.$emit("show-snackbar",{text:"All fields are required!",type:"error"});if(!this.validateEmail(this.email))return p.$emit("show-snackbar",{text:"Email format is not correct",type:"error"});if(this.password.length<7)return p.$emit("show-snackbar",{text:"Password length should be greater than 6",type:"error"});const e={name:this.name,email:this.email.toLowerCase(),password:this.password,role:"accountant",userType:this.type};this.$store.dispatch("user/create",e).then((e=>{p.$emit("show-snackbar",{text:" User has been created",type:"success"}),this.dialog=!1,this.$store.dispatch("auth/getUsers"),this.closeDialog()})).catch((e=>{console.log("e =>",e),p.$emit("show-snackbar",{text:e,type:"error"})}))},closeDialog(){this.dialog=!1,this.name="",this.email="",this.password="",this.type=""}},beforeDestroy(){p.$off("open-user-dialog")},mounted(){p.$on("open-user-dialog",(e=>{this.dialog=!0,this.workspaces=e}))}},Un=En,jn=(0,P.Z)(Un,Fn,Pn,!1,null,"3e89de9f",null),Rn=jn.exports,Bn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center"},[e._v(" Assign a Workspace ")]),t(He.ZB,[e._v(" Note : User will be added to selected workspace ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t(Bs.Z,{attrs:{items:e.specificTypeWorkspaces,label:"Select Workspaces","item-text":"workspaceName"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:""},on:{click:function(t){return e.updateField()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateField()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-content-save ")])],1)],1)],1)],1)],1)},zn=[],Nn={name:"AddToWorkspace",data(){return{dialog:!1,selected:"",sentId:"",userId:""}},mounted(){p.$on("add-to-workspace-dialog",(e=>{this.userId=e._id,this.dialog=!0;e.role.charAt(0).toUpperCase(),e.role.slice(1);this.sentId=e.role,this.$store.dispatch("auth/getWorkspaces")}))},computed:{...(0,f.Se)({user:"auth/getUser",token:"auth/getAuthToken",items:"auth/getWorkspaces"}),specificTypeWorkspaces(){return this.items.filter((e=>"specific"===e.workSpaceType))},selectedWorkspace(){return this.items.find((e=>e.workspaceName===this.selected))}},created(){},beforeDestroy(){p.$off("add-to-workspace-dialog")},methods:{updateField(){if(!this.selectedWorkspace)return p.$emit("show-snackbar",{text:"Field cannot be empty",type:"error"});let e={workspace:this.selectedWorkspace,user:this.userId,token:this.token,sentId:this.sentId};this.$store.dispatch("user/addUserWorkspaces",e).then((e=>{this.closeDialog(),p.$emit("show-snackbar",{text:e.data.message,type:"success"}),this.$store.dispatch("auth/getUsers")})).catch((e=>{p.$emit("show-snackbar",{text:text,type:"error"})}))},closeDialog(){this.dialog=!1,this.selected=""}}},Wn=Nn,On=(0,P.Z)(Wn,Bn,zn,!1,null,"49113f5e",null),qn=On.exports,Ln=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center"},[e._v(" Delete User ")]),t(He.ZB,[e._v(" Note : Deleted User will not restored and will be deleted permanently. ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t("h3",[e._v(" Are you sure you want to delete this User ?")])])],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:""},on:{click:function(t){return e.deleteField()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.deleteField()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-delete ")])],1)],1)],1)],1)],1)},Mn=[],Hn={name:"AddToWorkspace",data(){return{dialog:!1,id:""}},mounted(){p.$on("open-delete-dialog",(e=>{this.dialog=!0,this.id=e}))},beforeUnmount(){p.$off("open-delete-dialog")},computed:{...(0,f.Se)({items:"user/getworkspacesWithFilter",user:"auth/getUser",token:"auth/getAuthToken"})},created(){},methods:{deleteField(){this.$store.dispatch("user/deleteUser",{id:this.id}).then((e=>{this.dialog=!1,this.$store.dispatch("auth/getUsers")})).catch((e=>{console.log(e)}))},closeDialog(){this.dialog=!1,this.id=""}}},Xn=Hn,Vn=(0,P.Z)(Xn,Ln,Mn,!1,null,"57911452",null),Kn=Vn.exports,Yn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",scrollable:"",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2"},[e._v(" Change "+e._s("accountant"===e.user.role?"Accountant":"Supervisor")+" Type "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t(He.ZB,{staticClass:"mt-2 pt-2"},[t(Bs.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",items:e.types,"item-text":"text","item-value":"value",label:"Change Type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),t(He.h7,[t($s.Z,[t(b.Z,{staticClass:"mx-1"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",loading:e.loader,color:"appColor"},on:{click:function(t){return e.changeUserType()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeUserType()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)],1)},Qn=[],Gn=(a(1703),{name:"ChangeUserType",data(){return{dialog:!1,loader:!1,user:{},types:[{text:"Public",value:"public"},{text:"Specific",value:"specific"}],type:""}},beforeDestroy(){p.$off("open-change-user-type-dialog")},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},methods:{async apiCall(){var e={method:"post",url:`${ie.updateUserType}`,headers:{},data:{id:this.user._id,userType:this.type},headers:{Authorization:this.token}};return await v()(e)},validation(){if(this.type===this.user?.userType)throw new Error(`User Type is already ${this.user?.userType}`);if(0===this.type.trim().length)throw new Error("User Type is not selected")},async changeUserType(){try{this.loader=!0,this.validation(),await this.apiCall(),this.$store.dispatch("auth/getUsers"),this.closeDialog(),p.$emit("show-snackbar",{text:"User type has been updated successfully",type:"success"})}catch(e){this.loader=!1,p.$emit("show-snackbar",{text:e?.response?.data?.error?e.response.data.error:e,type:"error"})}},closeDialog(){this.dialog=!1,this.loader=!1,this.user={},this.type=""}},mounted(){p.$on("open-change-user-type-dialog",(e=>{this.user=e,this.type=e.userType,this.dialog=!0}))}}),Jn=Gn,er=(0,P.Z)(Jn,Yn,Qn,!1,null,null,null),tr=er.exports,sr=function(){var e=this,t=e._self._c;return t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 secondaryTextColor appColor--text font-style-heading"},[e._t("header"),t($e.Z),t(A.Z,{on:{click:function(t){return e.close()}}},[e._v("mdi-close")])],2),t(as.Z),t($s.Z,{staticClass:"py-0 pt-1"},[t(He.ZB,{staticClass:"py-0 font-style-paragraph secondaryTextColor--text"},[e._t("text")],2),t(He.ZB,{staticClass:"py-0"},[e._t("content")],2),t(He.h7,{},[t(_.Z,{staticClass:"pb-0 pr-0 d-flex",attrs:{cols:"12"}},[t($e.Z),t("Button",{staticClass:"mr-2",attrs:{loader:e.cancelLoader},on:{"button-clicked":function(t){return e.close()}},scopedSlots:e._u([{key:"buttonHeading",fn:function(){return[e._v(" Cancel ")]},proxy:!0}])}),t("Button",{staticClass:"mr-2",attrs:{loader:e.saveLoader},on:{"button-clicked":function(t){return e.save()}},scopedSlots:e._u([{key:"buttonHeading",fn:function(){return[e._v(" Save ")]},proxy:!0}])})],1)],1)],1)],1)],1)},ar=[],or={name:"dialogBox",components:{Button:ps},props:{modal:Boolean},data(){return{cancelLoader:!1,saveLoader:!1}},mounted(){},computed:{},created(){},methods:{close(){this.$emit("close-clicked")},save(){this.$emit("save-clicked")}}},ir=or,nr=(0,P.Z)(ir,sr,ar,!1,null,"45b669b8",null),rr=nr.exports,lr={name:"UserTable",components:{TicketDetails:Ho,WorkspacesDetails:$n,CreateUser:Rn,AddToWorkspace:qn,DeleteDialog:Kn,DialogBox:rr,ChangeUserType:tr},data:()=>({headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Role",value:"role"},{text:"Type",value:"userType"},{text:"Workspaces",value:"workspaces"},{text:"Created At",value:"createdAt"},{text:"Actions",value:"actions"}],search:""}),mounted(){},computed:{...(0,f.Se)({user:"auth/getUser",users:"auth/getAccountantUsers",token:"auth/getAuthToken"})},methods:{async changeUserType(e){p.$emit("open-change-user-type-dialog",e)},async viewWorkspaces(e){p.$emit("open-details-dialog-for-workspaces",e)},async createUser(){p.$emit("open-user-dialog")},async deleteUser(e){p.$emit("open-delete-dialog",e)},openTicketDetails(e){p.$emit("add-to-workspace-dialog",e)}}},cr=lr,dr=(0,P.Z)(cr,pn,mn,!1,null,null,null),ur=dr.exports,pr={name:"AccountantPage",components:{AppBar:Re,AccountantTable:ur},data:()=>({})},mr=pr,hr=(0,P.Z)(mr,dn,un,!1,null,null,null),gr=hr.exports,fr={name:"AccountantView",components:{SnackBar:U,NavigationBar:we,AccountantPage:gr},mounted(){this.$store.dispatch("auth/getUsers")},data:()=>({}),computed:{},methods:{}},kr=fr,yr=(0,P.Z)(kr,ln,cn,!1,null,"10c006b4",null),vr=yr.exports,Cr=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("ClientPage")],1)},xr=[],_r=function(){var e=this,t=e._self._c;return t($s.Z,[t("AppBar"),t("ClientTable")],1)},br=[],wr=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-4"},[t("WorkspacesDetails"),t("CreateUser"),t("AddToWorkspace"),t("DeleteDialog"),t(w.Z,{staticClass:"ml-3",staticStyle:{width:"25%"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(Ro.Z,{staticClass:"elevation-0 font-style-paragraph mt-2",attrs:{search:e.search,headers:e.headers,items:e.users},scopedSlots:e._u([{key:"item.name",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(String(s.name).toLocaleUpperCase())+" ")])]}},{key:"item.email",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(e._s(s.email))])]}},{key:"item.role",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(String(s.role).toLocaleUpperCase())+" ")])]}},{key:"item.workspaces",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.viewWorkspaces(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-eye ")])],1)]}}],null,!0)},[t("span",[e._v("View Workspaces")])])]}},{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.actions",fn:function({item:s}){return[e._v("   "),t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.deleteUser(s._id)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-delete ")])],1)]}}],null,!0)},[t("span",[e._v("Delete User")])])]}}],null,!0)})],1)},Tr=[],Zr={name:"ClientTable",components:{TicketDetails:Ho,WorkspacesDetails:$n,CreateUser:Rn,AddToWorkspace:qn,DeleteDialog:Kn},data:()=>({headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Role",value:"role"},{text:"Workspaces",value:"workspaces"},{text:"Created At",value:"createdAt"},{text:"Actions",value:"actions"}],search:""}),mounted(){},computed:{...(0,f.Se)({user:"auth/getUser",users:"auth/getClientUsers",token:"auth/getAuthToken"})},methods:{async viewWorkspaces(e){this.$store.dispatch("user/addUserWorkspaces",e.workspaces),p.$emit("open-details-dialog-for-workspaces",e)},async createUser(){p.$emit("open-user-dialog")},async deleteUser(e){p.$emit("open-delete-dialog",e)},openTicketDetails(e){p.$emit("add-to-workspace-dialog",e)}}},Ar=Zr,Sr=(0,P.Z)(Ar,wr,Tr,!1,null,null,null),Ir=Sr.exports,Dr={name:"ClientView",components:{AppBar:Re,ClientTable:Ir},data:()=>({})},$r=Dr,Fr=(0,P.Z)($r,_r,br,!1,null,null,null),Pr=Fr.exports,Er={name:"ClientView",components:{SnackBar:U,NavigationBar:we,ClientPage:Pr},mounted(){this.$store.dispatch("auth/getUsers")},data:()=>({}),computed:{},methods:{}},Ur=Er,jr=(0,P.Z)(Ur,Cr,xr,!1,null,"a2aae19e",null),Rr=jr.exports,Br=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("WorkspacesPage")],1)},zr=[],Nr=function(){var e=this,t=e._self._c;return t($s.Z,[t("AppBar"),t("WorkspaceTable")],1)},Wr=[],Or=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-4"},[t("WorkspacesDetails"),t("AddAccountantToWorkspace"),t("AddSupervisorToWorkspace"),t("AddClientToWorkspace"),t("ListAllInWorkspace"),t("ChangeWorkspaceType"),t(w.Z,{staticClass:"ml-3",staticStyle:{width:"25%"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(Ro.Z,{staticClass:"elevation-0 font-style-paragraph mt-2",attrs:{search:e.search,headers:e.headers,items:e.workspaces},scopedSlots:e._u([{key:"item.accountantActions",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize ml-2",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.getAllAccountantsFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-eye ")])],1)]}}],null,!0)},[t("span",[e._v("List of all Accountants")])]),"specific"===s.workSpaceType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize ml-2",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.addAccountantToWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-plus ")])],1)]}}],null,!0)},[t("span",[e._v("Add Accountant in Workspace")])]):e._e()]}},{key:"item.supervisorActions",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize ml-2",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.getAllSupervisorsFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-eye ")])],1)]}}],null,!0)},[t("span",[e._v("List of all Supervisor")])]),"specific"===s.workSpaceType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize ml-2",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.addSupervisorToWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-plus ")])],1)]}}],null,!0)},[t("span",[e._v("Add Supervisor in Workspace")])]):e._e()]}},{key:"item.clientActions",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize ml-2",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.getAllClientsFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-eye ")])],1)]}}],null,!0)},[t("span",[e._v("List of all Clients")])])]}},{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.workSpaceType",fn:function({item:s}){return[t("div",{staticClass:"d-flex"},[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.changeWorkspaceType(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-convert ")])],1)]}}],null,!0)},[t("span",[e._v("Change Workspace Type")])]),t("div",{staticClass:"font-style-paragraph ml-2 pt-1"},[e._v(" "+e._s(String(s.workSpaceType).toLocaleUpperCase())+" ")])],1)]}}],null,!0)})],1)},qr=[],Lr=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center"},[e._v(" Assign to Accountant ")]),t(He.ZB,[e._v(" Note : Accountant will be added to the respected workspace ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t(Bs.Z,{attrs:{items:e.itemsUpdated,label:"Select Accountant","item-text":"name"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:""},on:{click:function(t){return e.updateField()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateField()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-content-save ")])],1)],1)],1)],1)],1)},Mr=[],Hr={name:"AddToWorkspace",data(){return{dialog:!1,selected:"",workspace:""}},mounted(){p.$on("add-accountant-to-workspace",(e=>{this.workspace=e,this.dialog=!0}))},beforeDestroy(){p.$off("add-accountant-to-workspace")},computed:{...(0,f.Se)({items:"auth/getAccountantUsers",token:"auth/getAuthToken"}),itemsUpdated(){return this.items.filter((e=>"specific"===e.userType))},selectedUser(){return this.items.find((e=>e.name===this.selected))._id}},created(){},methods:{updateField(){if(!this.selectedUser)return p.$emit("show-snackbar",{text:"Field cannot be empty",type:"error"});let e={workspace:this.workspace,user:this.selectedUser,token:this.token,sentId:"accountant"};this.$store.dispatch("user/addUserWorkspaces",e).then((e=>{this.closeDialog(),p.$emit("show-snackbar",{text:e.data.message,type:"success"}),this.$store.dispatch("auth/getWorkspaces")})).catch((e=>{p.$emit("show-snackbar",{text:"Something went wrong",type:"error"})}))},closeDialog(){this.dialog=!1,this.selected=""}}},Xr=Hr,Vr=(0,P.Z)(Xr,Lr,Mr,!1,null,"b69cb0b8",null),Kr=Vr.exports,Yr=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center"},[e._v(" Assign to Supervisor ")]),t(He.ZB,[e._v(" Note : Supervisor will be added to the respected workspace ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t(Bs.Z,{attrs:{items:e.itemsUpdated,label:"Select Workspaces","item-text":"name"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:""},on:{click:function(t){return e.updateField()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateField()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-content-save ")])],1)],1)],1)],1)],1)},Qr=[],Gr={name:"AddSupervisorToWorkspace",data(){return{dialog:!1,selected:"",workspace:""}},mounted(){p.$on("add-supervisor-to-workspace",(e=>{this.workspace=e,this.dialog=!0}))},computed:{itemsUpdated(){return this.items.filter((e=>"specific"===e.userType))},...(0,f.Se)({items:"auth/getSupervisorUsers",token:"auth/getAuthToken"}),selectedUser(){return this.items.find((e=>e.name===this.selected))._id}},created(){},methods:{updateField(){if(!this.selectedUser)return p.$emit("show-snackbar",{text:"Field cannot be empty",type:"error"});let e={workspace:this.workspace,user:this.selectedUser,token:this.token,sentId:"supervisor"};this.$store.dispatch("user/addUserWorkspaces",e).then((e=>{this.closeDialog(),p.$emit("show-snackbar",{text:e.data.message,type:"success"}),this.$store.dispatch("auth/getWorkspaces")})).catch((e=>{p.$emit("show-snackbar",{text:"Something went wrong",type:"error"})}))},closeDialog(){this.dialog=!1,this.selected=""}}},Jr=Gr,el=(0,P.Z)(Jr,Yr,Qr,!1,null,"1c6b3c38",null),tl=el.exports,sl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"text-h5 justify-center"},[e._v(" Assign to Client ")]),t(He.ZB,[e._v(" Note : Client will be added to the respected workspace ")]),t("div",{staticClass:"justify-content : center"},[t(_.Z,{staticClass:"py-2 px-4",attrs:{md:"12"}},[t(Bs.Z,{attrs:{items:e.items,label:"Select Workspaces","item-text":"name"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),t(He.h7,[t($e.Z),t(x.Z,{staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"#7C7C7C",outlined:"",small:"","text-capitalize":""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-close ")])],1),t(x.Z,{staticClass:"text-capitalize",attrs:{depressed:"",color:"#7C7C7C",outlined:"",small:""},on:{click:function(t){return e.updateField()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateField()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-content-save ")])],1)],1)],1)],1)],1)},al=[],ol={name:"AddToWorkspace",data(){return{dialog:!1,selected:"",workspace:""}},mounted(){p.$on("add-client-to-workspace",(e=>{this.workspace=e,this.dialog=!0}))},computed:{...(0,f.Se)({items:"auth/getClientUsers",token:"auth/getAuthToken"}),selectedUser(){return this.items.find((e=>e.name===this.selected))._id}},created(){},methods:{updateField(){if(!this.selectedUser)return p.$emit("show-snackbar",{text:"Field cannot be empty",type:"error"});let e={workspace:this.workspace,user:this.selectedUser,token:this.token,sentId:"client"};this.$store.dispatch("user/addUserWorkspaces",e).then((e=>{this.closeDialog(),p.$emit("show-snackbar",{text:e.data.message,type:"success"}),this.$store.dispatch("auth/getWorkspaces")})).catch((e=>{p.$emit("show-snackbar",{text:text,type:"error"})}))},closeDialog(){this.dialog=!1,this.selected=""}}},il=ol,nl=(0,P.Z)(il,sl,al,!1,null,"4b0ef770",null),rl=nl.exports,ll=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",scrollable:"",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2"},[e._v(" Change Workspace Type "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t(He.ZB,{staticClass:"mt-2 pt-2"},[t(Bs.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",items:e.types,"item-text":"text","item-value":"value",label:"Change Type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),t(He.h7,[t($s.Z,[t(b.Z,{staticClass:"mx-1"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",loading:e.loader,color:"appColor"},on:{click:function(t){return e.changeWorkspaceType()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeWorkspaceType()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)],1)},cl=[],dl={name:"ChangeWorkspaceType",data(){return{dialog:!1,loader:!1,workspace:{},types:[{text:"Public",value:"public"},{text:"Specific",value:"specific"}],type:""}},beforeDestroy(){p.$off("open-change-workspace-type-dialog")},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},methods:{async apiCall(){var e={method:"post",url:`${ie.updateWorkspaceType}`,headers:{},data:{id:this.workspace._id,workSpaceType:this.type},headers:{Authorization:this.token}};return await v()(e)},validation(){if(this.type===this.workspace?.workSpaceType)throw new Error(`Workspace Type is already ${this.workspace?.workSpaceType}`);if(0===this.type.trim().length)throw new Error("Workspace Type is not selected")},async changeWorkspaceType(){try{this.loader=!0,this.validation(),await this.apiCall(),this.$store.dispatch("auth/getWorkspaces"),this.closeDialog(),p.$emit("show-snackbar",{text:"Workspace type has been updated successfully",type:"success"})}catch(e){this.loader=!1,p.$emit("show-snackbar",{text:e?.response?.data?.error?e.response.data.error:e,type:"error"})}},closeDialog(){this.dialog=!1,this.loader=!1,this.workspace={},this.type=""}},mounted(){p.$on("open-change-workspace-type-dialog",(e=>{this.workspace=e,this.type=e.workSpaceType,this.dialog=!0}))}},ul=dl,pl=(0,P.Z)(ul,ll,cl,!1,null,null,null),ml=pl.exports,hl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(Dt.Z,{attrs:{width:"450",scrollable:"",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,[t(He.EB,{staticClass:"lighten-2"},[e._v(" List of All "+e._s(e.type)+" in Workspace "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t(He.ZB,{staticClass:"my-2"},[t(b.Z,{staticClass:"pa-3",attrs:{justify:"center"}},[t(Ro.Z,{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.users,"hide-default-footer":!0,loading:e.loader},scopedSlots:e._u([{key:"item.actions",fn:function({item:s}){return["accountant"===s.userRole&&"specific"===e.workspace.workSpaceType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"red",outlined:"",small:""},on:{click:function(t){return e.unAssignAccountantFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-minus ")])],1)]}}],null,!0)},[t("span",[e._v("Unassign accountant from this workspace")])]):"supervisor"===s.userRole&&"specific"===e.workspace.workSpaceType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"red",outlined:"",small:""},on:{click:function(t){return e.unAssignSupervisorFromWorkspace(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-minus ")])],1)]}}],null,!0)},[t("span",[e._v("Unassign supervisor from this workspace")])]):t("div",[e._v(" - ")])]}}],null,!0)})],1)],1)],1)],1)],1)},gl=[],fl={name:"ListAllAccountantsInWorkspace",data(){return{dialog:!1,headers:[{text:"Name",value:"userId.name"},{text:"Email",value:"userId.email"},{text:"Actions",value:"actions"}],users:[],type:"",workspace:"",loader:!1}},beforeDestroy(){p.$off("list-all-in-workspace")},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},methods:{closeDialog(){this.users=[],this.type="",this.dialog=!1,this.workspace=""},unAssignAccountantFromWorkspace(e){let t={objectId:e._id};p.$emit("unassign-accountant-from-workspace",t),this.closeDialog()},unAssignSupervisorFromWorkspace(e){let t={objectId:e._id};p.$emit("unassign-supervisor-from-workspace",t),this.closeDialog()},apiCall(e){var t={method:"get",url:`${ie.ListAllinWorkspace}?workspaceId=${e._id}&userRole=${this.type}`,headers:{},headers:{Authorization:this.token}};v()(t).then((e=>{this.users=e.data.users,this.loader=!1})).catch((e=>{}))}},mounted(){p.$on("list-all-in-workspace",((e,t)=>{this.loader=!0,this.type=t,this.dialog=!0,this.workspace=e,this.apiCall(e)}))}},kl=fl,yl=(0,P.Z)(kl,hl,gl,!1,null,null,null),vl=yl.exports,Cl={name:"WorkspaceTable",components:{TicketDetails:Ho,WorkspacesDetails:$n,AddAccountantToWorkspace:Kr,AddClientToWorkspace:rl,ListAllInWorkspace:vl,AddSupervisorToWorkspace:tl,ChangeWorkspaceType:ml},data:()=>({headers:[{text:"Workspace Name",value:"workspaceName"},{text:"Channel Name",value:"channelName"},{text:"Workspace Type",value:"workSpaceType"},{text:"Accountant",value:"accountantActions"},{text:"Supervisor",value:"supervisorActions"},{text:"Client",value:"clientActions"},{text:"Created At",value:"createdAt"}],search:""}),mounted(){},computed:{...(0,f.Se)({workspaces:"auth/getWorkspaces"})},methods:{async changeWorkspaceType(e){p.$emit("open-change-workspace-type-dialog",e)},addAccountantToWorkspace(e){p.$emit("add-accountant-to-workspace",e)},addSupervisorToWorkspace(e){p.$emit("add-supervisor-to-workspace",e)},unAssignAccountantFromWorkspace(e){p.$emit("unassign-accountant-from-workspace",e)},unAssignSupervisorFromWorkspace(e){p.$emit("unassign-supervisor-from-workspace",e)},addClientToWorkspace(e){p.$emit("add-client-to-workspace",e)},getAllAccountantsFromWorkspace(e){p.$emit("list-all-in-workspace",e,"accountant")},getAllClientsFromWorkspace(e){p.$emit("list-all-in-workspace",e,"client")},getAllSupervisorsFromWorkspace(e){p.$emit("list-all-in-workspace",e,"supervisor")}}},xl=Cl,_l=(0,P.Z)(xl,Or,qr,!1,null,null,null),bl=_l.exports,wl={name:"MainPage",components:{AppBar:Re,WorkspaceTable:bl},data:()=>({})},Tl=wl,Zl=(0,P.Z)(Tl,Nr,Wr,!1,null,null,null),Al=Zl.exports,Sl={name:"WorkspaceView",components:{SnackBar:U,NavigationBar:we,WorkspacesPage:Al},mounted(){this.$store.dispatch("auth/getWorkspaces")},data:()=>({}),computed:{},methods:{}},Il=Sl,Dl=(0,P.Z)(Il,Br,zr,!1,null,"98c00f44",null),$l=Dl.exports,Fl=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("TicketsPage")],1)},Pl=[],El=function(){var e=this,t=e._self._c;return t($s.Z,[t("AppBar"),t("TicketTable")],1)},Ul=[],jl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-4"},[t("TicketDetails"),t(Ro.Z,{staticClass:"elevation-0 font-style-paragraph cursor-pointer",attrs:{headers:e.headers,items:e.tickets.data,"footer-props":{disableItemsPerPage:!0},page:e.page,"server-items-length":e.tickets.count,soratable:"false"},on:{"update:page":e.updatePagination,"click:row":e.testFunction},scopedSlots:e._u([{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.request_type",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(s.request_type||"OTHERS")+" ")])]}}],null,!0)})],1)},Rl=[],Bl={name:"TicketTable",components:{TicketDetails:Ho},data:()=>({headers:[{text:"Created At",value:"createdAt",sortable:!1},{text:"Ticket No",value:"ticketNo",sortable:!1},{text:"Type",value:"requestType",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Workspace ID",value:"workspaceId",sortable:!1}],page:1,search:""}),mounted(){},computed:{...(0,f.Se)({tickets:"auth/getTickets"})},methods:{testFunction(e){p.$emit("open-details-dialog",e)},updatePagination(e){this.page=e,this.$store.dispatch("auth/getTickets",e)}}},zl=Bl,Nl=(0,P.Z)(zl,jl,Rl,!1,null,null,null),Wl=Nl.exports,Ol={name:"MainPage",components:{AppBar:Re,TicketTable:Wl},data:()=>({})},ql=Ol,Ll=(0,P.Z)(ql,El,Ul,!1,null,null,null),Ml=Ll.exports,Hl={name:"Tickets",components:{SnackBar:U,NavigationBar:we,TicketsPage:Ml},mounted(){this.$store.dispatch("auth/getTickets",1)},data:()=>({}),computed:{},methods:{}},Xl=Hl,Vl=(0,P.Z)(Xl,Fl,Pl,!1,null,"71d09a50",null),Kl=Vl.exports,Yl=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("SupervisorPage")],1)},Ql=[],Gl=function(){var e=this,t=e._self._c;return t($s.Z,[t("AppBar"),t("SupervisorTable")],1)},Jl=[],ec=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-4"},[t("WorkspacesDetails"),t("CreateSupervisor"),t("UpdateSupervisor"),t("AddToWorkspace"),t("DeleteDialog"),t("ChangeUserType"),t(w.Z,{staticClass:"ml-3",staticStyle:{width:"25%"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),[t(x.Z,{staticClass:"text-capitalize mt-3",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.createSupervisor()}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-plus ")])],1)],t(Ro.Z,{staticClass:"elevation-0 font-style-paragraph",attrs:{search:e.search,headers:e.headers,items:e.users},scopedSlots:e._u([{key:"item.name",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(String(s.name).toLocaleUpperCase())+" ")])]}},{key:"item.email",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(e._s(s.email))])]}},{key:"item.role",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(String(s.role).toLocaleUpperCase())+" ")])]}},{key:"item.workspaces",fn:function({item:s}){return["specific"===s.userType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.viewWorkspaces(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-eye ")])],1)]}}],null,!0)},[t("span",[e._v("View Workspaces")])]):e._e()]}},{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.userType",fn:function({item:s}){return[t("div",{staticClass:"d-flex"},[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.changeUserType(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-account-convert ")])],1)]}}],null,!0)},[t("span",[e._v("Change Supervisor Type")])]),t("div",{staticClass:"font-style-paragraph ml-2 pt-1"},[e._v(" "+e._s(String(s.userType).toLocaleUpperCase())+" ")])],1)]}},{key:"item.actions",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.updateSuperVisor(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-plus ")])],1)]}}],null,!0)},[t("span",[e._v("Update Supervisor")])]),e._v("   "),"specific"===s.userType?t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.openTicketDetails(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-office-building-plus ")])],1)]}}],null,!0)},[t("span",[e._v("Assign Workspace")])]):e._e(),e._v("   "),t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.deleteUser(s._id)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-delete ")])],1)]}}],null,!0)},[t("span",[e._v("Delete Supervisor")])])]}}],null,!0)})],2)},tc=[],sc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("Snackbar"),t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"",justifyContent:"right","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Create Supervisor "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t("form",[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Name *",maxLength:"50"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",rules:e.emailRules,color:"appColor",dense:"",outlined:"",filled:"",label:"Email *",maxLength:"50"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Password * ",type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",maxLength:"30"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(Bs.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",items:e.supervisorTypes,"item-text":"text","item-value":"value",label:"Supervisor Type *"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)],1),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,{staticClass:"px-4"},[t($s.Z,[t(b.Z,{staticClass:"mx-1"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",color:"appColor"},on:{click:function(t){return e.createSupervisor()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createSupervisor()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)],1)],1)],1)},ac=[],oc={name:"CreateSupervisor",components:{Snackbar:U},data(){return{dialog:!1,workspaces:"",name:"",email:"",password:"",emailRules:[e=>/.+@.+/.test(e)||"Invalid Email address"],type:"",show:!1,supervisorTypes:[{text:"Public",value:"public"},{text:"Specific",value:"specific"}]}},computed:{},methods:{validateEmail(e){var t=/\S+@\S+\.\S+/;return t.test(e)},createSupervisor(){if(!this.name||!this.email||!this.password||!this.type)return p.$emit("show-snackbar",{text:"All fields are required!",type:"error"});if(!this.validateEmail(this.email))return p.$emit("show-snackbar",{text:"Email format is not correct",type:"error"});if(this.password.length<7)return p.$emit("show-snackbar",{text:"Password length should be greater than 6",type:"error"});const e={name:this.name,email:this.email.toLowerCase(),password:this.password,role:"supervisor",userType:this.type};this.$store.dispatch("user/create",e).then((e=>{p.$emit("show-snackbar",{text:" Supervisor has been created",type:"success"}),this.dialog=!1,this.$store.dispatch("auth/getUsers"),this.closeDialog()})).catch((e=>{p.$emit("show-snackbar",{text:e,type:"error"})}))},closeDialog(){this.dialog=!1,this.name="",this.email="",this.password="",this.type=""}},mounted(){p.$on("open-supervisor-dialog",(e=>{this.dialog=!0,this.workspaces=e}))},beforeUnmount(){p.$off("open-supervisor-dialog")}},ic=oc,nc=(0,P.Z)(ic,sc,ac,!1,null,"743c09f4",null),rc=nc.exports,lc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("Snackbar"),t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"",justifyContent:"right","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Update Supervisor "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t("form",[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Name *",maxLength:"50"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",dense:"",outlined:"",filled:"",label:"Password * ",type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",maxLength:"30"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t(_.Z,{attrs:{cols:"12"}},[t(w.Z,{staticClass:"font-style-paragraph",attrs:{"hide-details":"",color:"appColor",filled:"",dense:"",outlined:"",label:"Confirm Password * ",type:e.showPassword?"text":"password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",maxLength:"30"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,{staticClass:"px-4"},[t($s.Z,[t(b.Z,{staticClass:"mx-1"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",color:"appColor"},on:{click:function(t){return e.updateSupervisor()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateSupervisor()}}},[e._v(" Save ")])],1)],1)],1)],1)],1)],1)],1)],1)},cc=[],dc={name:"UpdateSupervisor",components:{Snackbar:U},data(){return{dialog:!1,name:"",password:"",confirmPassword:"",id:"",supervisor:"",show:!1,showPassword:!1}},computed:{},methods:{updateSupervisor(){if(!this.name.trim()||!this.password)return p.$emit("show-snackbar",{text:"All fields are required!",type:"error"});if(this.password.length<7)return p.$emit("show-snackbar",{text:"Password length should be greater than 6",type:"error"});if(this.password!==this.confirmPassword)return p.$emit("show-snackbar",{text:"Passwords do not match",type:"error"});const e={name:this.name,password:this.password,id:this.supervisor._id};this.$store.dispatch("auth/updateSupervisor",e).then((e=>{p.$emit("show-snackbar",{text:" Supervisor has been updated",type:"success"}),this.dialog=!1,this.closeDialog()})).catch((e=>{p.$emit("show-snackbar",{text:e,type:"error"})}))},closeDialog(){this.dialog=!1,this.name="",this.password=""}},mounted(){p.$on("open-update-supervisor-dialog",(e=>{this.supervisor=e,this.name=this.supervisor.name,this.dialog=!0}))},beforeUnmount(){p.$off("open-update-supervisor-dialog")}},uc=dc,pc=(0,P.Z)(uc,lc,cc,!1,null,"b874fa16",null),mc=pc.exports,hc={name:"UserTable",components:{TicketDetails:Ho,WorkspacesDetails:$n,CreateSupervisor:rc,UpdateSupervisor:mc,AddToWorkspace:qn,DeleteDialog:Kn,DialogBox:rr,ChangeUserType:tr},data:()=>({headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Role",value:"role"},{text:"Type",value:"userType"},{text:"Workspaces",value:"workspaces"},{text:"Created At",value:"createdAt"},{text:"Actions",value:"actions"}],search:""}),mounted(){},computed:{...(0,f.Se)({user:"auth/getUser",users:"auth/getSupervisorUsers",token:"auth/getAuthToken"})},methods:{async changeUserType(e){p.$emit("open-change-user-type-dialog",e)},async updateSuperVisor(e){p.$emit("open-update-supervisor-dialog",e)},async viewWorkspaces(e){p.$emit("open-details-dialog-for-workspaces",e)},async createSupervisor(){p.$emit("open-supervisor-dialog")},async deleteUser(e){p.$emit("open-delete-dialog",e)},openTicketDetails(e){p.$emit("add-to-workspace-dialog",e)}}},gc=hc,fc=(0,P.Z)(gc,ec,tc,!1,null,null,null),kc=fc.exports,yc={name:"SupervisorPage",components:{AppBar:Re,SupervisorTable:kc},data:()=>({})},vc=yc,Cc=(0,P.Z)(vc,Gl,Jl,!1,null,null,null),xc=Cc.exports,_c={name:"Supervisor",components:{SnackBar:U,NavigationBar:we,SupervisorPage:xc},mounted(){this.$store.dispatch("auth/getUsers")},data:()=>({}),computed:{},methods:{}},bc=_c,wc=(0,P.Z)(bc,Yl,Ql,!1,null,"3175fde6",null),Tc=wc.exports,Zc=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("AppBar"),t("Search",{on:{"search-input":e.debounceInput}}),t("CreateAccounts",{attrs:{dialog:e.accountsDialog},on:{closeAccountsDialog:function(t){e.accountsDialog=!1}}}),t("UpdateAccounts",{attrs:{dialog:e.editAccountsDialog,item:e.selectedItem},on:{closeEditAccountsDialog:function(t){e.editAccountsDialog=!1}}}),[t(x.Z,{staticClass:"text-capitalize mt-3 ml-3",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){e.accountsDialog=!0}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-plus ")])],1)],t(Ro.Z,{attrs:{headers:e.headers,items:e.accountItems,loading:e.loadTable,"hide-default-footer":!0,"server-items-length":e.total?e.total:e.paginate.total,itemsPerPage:e.paginate.itemsPerPage},scopedSlots:e._u([{key:"item.itemIds",fn:function({item:s}){return[s.itemIds.length?t("div",e._l(s?.itemIds,(function(a,o){return t("div",{key:o},[o<2?t("span",[e._v(" "+e._s(a.itemName)+" ")]):e._e(),o<1&&s.itemIds.length>1?t("span",[e._v(" , ")]):e._e(),t(De.Z,{attrs:{"offset-y":"","open-on-hover":"","max-height":"30vh"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[2===o?t("span",e._g(e._b({staticClass:"grey--text text-caption cursor-pointer"},"span",i,!1),a),[e._v(" (+"+e._s(s?.itemIds.length-2)+" others)")]):e._e()]}}],null,!0)},[t(he.Z,e._l(s?.itemIds,(function(s,a){return t("div",{key:a},[a>1?t(ge.Z,[t(fe.V9,{staticClass:"cursor-pointer"},[e._v(e._s(s.itemName))])],1):e._e()],1)})),0)],1)],1)})),0):t("div",[e._v(" - ")])]}},{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}},{key:"item.actions",fn:function({item:s}){return[t(os.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(x.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){return e.editAccountDialogBox(s)}}},"v-btn",o,!1),a),[t(A.Z,{attrs:{small:""}},[e._v(" mdi-pencil ")])],1)]}}],null,!0)},[t("span",[e._v("Update Account Items")])])]}}],null,!0)}),t("Pagination",{attrs:{itemsPerPage:e.paginate.size,page:e.paginate.page,pageCount:e.paginate.lastPage,totalCount:e.total?e.total:e.paginate.total},on:{"next-page-change":function(t){return e.getAccountitems(t)},"prev-page-change":function(t){return e.getAccountitems(t)},"select-size":function(t){return e.getAccountitems(t)}}})],2)},Ac=[],Sc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("Snackbar"),t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"","max-width":"600px","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Add Items and Accounts "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t(pa.Z,{ref:"form"},[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[e._v(" "+e._s(e.fields[0].label)+" "),t(w.Z,{attrs:{dense:"",required:""},model:{value:e.fields[0].value,callback:function(t){e.$set(e.fields[0],"value",t)},expression:"fields[0].value"}})],1),t(_.Z,{attrs:{cols:"12"}},[e._v(" "+e._s(e.fields[1].label)+" "),t(Bs.Z,{attrs:{items:e.fields[1].items,"menu-props":{maxHeight:200},dense:"",required:""},model:{value:e.fields[1].value,callback:function(t){e.$set(e.fields[1],"value",t)},expression:"fields[1].value"}})],1),t(_.Z,{attrs:{cols:"12"}},[e._v(" "+e._s(e.fields[2].label)+" "),t(Bs.Z,{attrs:{multiple:e.fields[2].multiple,items:e.fields[2].items,"no-data-text":e.loadingItems?"Loading...":"No Items available","menu-props":{maxHeight:200},chips:"",dense:"",required:""},on:{click:function(t){t.stopPropagation(),!e.responseItems&&e.getAllItems()}},scopedSlots:e._u([{key:"append-item",fn:function(){return[t("div",{directives:[{def:ma.Z,name:"intersect",rawName:"v-intersect",value:e.endIntersect,expression:"endIntersect"}]})]},proxy:!0}]),model:{value:e.fields[2].value,callback:function(t){e.$set(e.fields[2],"value",t)},expression:"fields[2].value"}})],1)],1),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,{staticClass:"px-4"},[t($s.Z,[t(b.Z,{staticClass:"mx-1 pb-2"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",loading:e.loader,color:"appColor"},on:{click:function(t){return e.createAccountsAndItems()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createAccountsAndItems()}}},[e._v(" Add ")])],1)],1)],1)],1)],1)],1)],1)],1)},Ic=[];const Dc=["CURRENT","FIXED","INVENTORY","NONCURRENT","PREPAYMENT","EQUITY","DEPRECIATN","DIRECTCOSTS","EXPENSE","OVERHEADS","CURRLIAB","LIABILITY","TERMLIAB","OTHERINCOME","REVENUE","SALES","DEBTORS","CREDITORS","UNPAIDEXPCLM","HISTORICAL","BANKCURRENCYGAIN","ROUNDING","RETAINEDEARNINGS","TRACKINGTRANSFERS","WAGEPAYABLES","REALISEDCURRENCYGAIN","UNREALISEDCURRENCYGAIN"];var $c=Dc,Fc={name:"CreateAccounts",props:["dialog"],components:{Snackbar:U},data(){return{loader:!1,loadingItems:!1,responseItems:!1,fields:[{label:"Account Name*",key:"account_name",value:""},{label:"Account Type*",key:"account_type",value:"",multiple:!1,items:$c},{label:"Items",key:"items",value:[],multiple:!0,items:[]}],paginate:{size:10,page:1,total:0}}},computed:{...(0,f.Se)({user:"auth/getUser",allItems:"xeroForm/getMoreItems",total:"xeroForm/getTotalItems",page:"xeroForm/getPage"})},methods:{closeDialog(){this.$emit("closeAccountsDialog"),this.emptyFields()},async createAccountsAndItems(){this.loader=!0;try{this.checkValidations();const e={account_name:this.fields[0].value,account_type:this.fields[1].value,account_items:this.fields[2].value};await this.$store.dispatch("xeroForm/createAccountItems",e),this.loader=!1,p.$emit("show-snackbar",{text:"New Account Items has been created",type:"success"}),this.closeDialog()}catch(e){console.log("error>>",e),this.loader=!1,p.$emit("show-snackbar",{text:e?.response?.data?.data?e.response.data.data:e,type:"error"})}},checkValidations(){if(!this.fields[0].value||!this.fields[1].value)throw"Account name or type is required"},emptyFields(){this.$refs.form.reset()},async getAllItems(){this.loadingItems=!0,this.paginate.page=this.page,await this.$store.dispatch("xeroForm/getItemsFromXero",this.paginate),this.loadingItems=!1,this.fields[2].items=this.allItems.map((e=>e.itemName)),this.responseItems=!0},async endIntersect(){this.paginate.page=this.page+1;const e=this.paginate.page*this.paginate.size;this.paginate["moreItems"]=!0,e<this.total&&(await this.$store.dispatch("xeroForm/getItemsFromXero",this.paginate),this.fields[2].items=this.allItems.map((e=>e.itemName)))}}},Pc=Fc,Ec=(0,P.Z)(Pc,Sc,Ic,!1,null,null,null),Uc=Ec.exports,jc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("Snackbar"),t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"","max-width":"600px","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Update Items and Accounts "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t(pa.Z,{ref:"form"},[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[e._v(" "+e._s(e.fields[0].label)+" "),t(w.Z,{attrs:{dense:"",required:""},model:{value:e.item[e.fields[0]["keyFromProp"]],callback:function(t){e.$set(e.item,e.fields[0]["keyFromProp"],t)},expression:"item[fields[0]['keyFromProp']]"}})],1),e._l(e.fields,(function(s,a){return 0!=a?t(_.Z,{key:a,attrs:{cols:"12"}},[e._v(" "+e._s(s.label)+" "),t(Bs.Z,{attrs:{items:s.items,"menu-props":{maxHeight:200},dense:"",required:""},model:{value:e.item[s["keyFromProp"]],callback:function(t){e.$set(e.item,s["keyFromProp"],t)},expression:"item[field['keyFromProp']]"}})],1):e._e()})),t(_.Z,{attrs:{cols:"12"}},[e._v(" Items "),t(Bs.Z,{attrs:{"item-text":"itemName","return-object":"",value:e.getItems,items:e.allItems,"menu-props":{maxHeight:200},chips:"",multiple:"",dense:""},scopedSlots:e._u([{key:"append-item",fn:function(){return[t("div",{directives:[{def:ma.Z,name:"intersect",rawName:"v-intersect",value:e.endIntersect,expression:"endIntersect"}]})]},proxy:!0}]),model:{value:e.item.itemIds,callback:function(t){e.$set(e.item,"itemIds",t)},expression:"item.itemIds"}})],1)],2),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,{staticClass:"px-4"},[t($s.Z,[t(b.Z,{staticClass:"mx-1 pb-2"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",color:"appColor",loading:e.loader},on:{click:function(t){return e.updateAccountsAndItems()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateAccountsAndItems()}}},[e._v(" Update ")])],1)],1)],1)],1)],1)],1)],1)],1)},Rc=[],Bc={name:"UpdateAccounts",props:["dialog","item"],components:{Snackbar:U},computed:{...(0,f.Se)({allItems:"xeroForm/getMoreItems",total:"xeroForm/getTotalItems",page:"xeroForm/getPage"}),getItems(){return this.item?.itemIds?.map((e=>{this.allItems.push(e)})),this.items=this.allItems,this.items}},data(){return{loader:!1,items:[],fields:[{label:"Account Name*",key:"account_name",keyFromProp:"accountName",value:"",multiple:!1},{label:"Account Type*",key:"account_type",keyFromProp:"accountType",value:"",multiple:!1,items:$c}],paginate:{size:10,page:1,total:0}}},methods:{closeDialog(){this.$emit("closeEditAccountsDialog")},async updateAccountsAndItems(){this.loader=!0;try{this.checkValidations();const e={_id:this.item._id,account_name:this.item.accountName,account_type:this.item.accountType,account_items:this.item.itemIds.map((e=>e._id))};await this.$store.dispatch("xeroForm/updateAccountItems",e),this.loader=!1,p.$emit("show-snackbar",{text:"Account Items has been updated",type:"success"}),this.closeDialog()}catch(e){this.loader=!1,p.$emit("show-snackbar",{text:e?.response?.data?.message?e.response.data.message:e,type:"error"})}},checkValidations(){if(!this.item.accountName||!this.item.accountType)throw"Account name or type is required"},async endIntersect(){this.paginate.page=this.page+1;const e=this.paginate.page*this.paginate.size;this.paginate["moreItems"]=!0,e<this.total&&await this.$store.dispatch("xeroForm/getItemsFromXero",this.paginate)}}},zc=Bc,Nc=(0,P.Z)(zc,jc,Rc,!1,null,null,null),Wc=Nc.exports,Oc=function(){var e=this,t=e._self._c;return e.totalCount>0?t("div",{staticClass:"custom-pagination-container d-flex justify-end"},[t("div",{staticClass:"d-flex align-baseline"},[t("div",{staticClass:"footer-pagination-para pagination-enteries"},[e.pagination>0?t("span",{staticClass:"d-flex align-baseline"},[t("span",{staticClass:"width-page-number"},[e._v(" Rows per page: ")]),t(Bs.Z,{staticClass:"font-13 fw-900 mx-2 width-removed",attrs:{items:e.items,dense:"",filled:""},on:{change:function(t){return e.selectedRecords()}},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),t("span",{staticClass:"width-page-number"},[e._v(" "+e._s(e.startNo)+" - "+e._s(e.endNo)+" of "+e._s(e.pagination)+" ")])],1):t("span",[e._v(" No Records to show ")])]),t("div",{staticClass:"mr-5"},[t(x.Z,{staticClass:"prev-btn",attrs:{disabled:1==e.page,elevation:"0"},on:{click:e.prevPageButton}},[t(A.Z,{staticClass:"pagination-btn-icon fs-22"},[e._v("mdi-chevron-left")])],1),t(x.Z,{staticClass:"next-btn ml-8",attrs:{disabled:0==e.totalCount||e.page===e.xCount,elevation:"0"},on:{click:e.nextPageButton}},[t(A.Z,{staticClass:"pagination-btn-icon font-15"},[e._v("mdi-chevron-right")])],1)],1)])]):e._e()},qc=[],Lc={name:"Pagination",data(){return{size:null,items:[5,10,15,20],xCount:null,pageCounter:0,startNo:1,endNo:null}},props:{page:{type:Number,default:0},pageCount:{type:Number,default:0},itemsPerPage:{type:Number,default:0},totalCount:{type:Number,default:0}},computed:{...(0,f.Se)({noOfRecords:"xeroForm/getNoOfRecords"}),pagination(){this.page=this.page?this.page:1,this.size=this.itemsPerPage?this.itemsPerPage:10,this.startNo=(this.page-1)*this.size+1,this.endNo=this.page*this.noOfRecords;const e=this.totalCount;return this.checkMode(),e}},beforeDestroy(){this.$store.commit("xeroForm/setNoOfRecords",10)},methods:{prevPageButton(){let e=this.page-1;this.page>1&&(console.log("event prepage>>",e,this.size),this.$emit("prev-page-change",{page:e,size:this.size}))},nextPageButton(){this.pageCounter=this.pageCount;let e=this.page+1;(this.page<this.pageCounter||this.page<this.xCount)&&(console.log("event newpage>>",e,this.size),this.$emit("next-page-change",{page:e,size:this.size}))},checkMode(){this.pageCounter=this.pageCount,this.totalCount%this.size==0?(this.pageCounter=this.totalCount/this.size,this.xCount=Math.floor(this.pageCounter)):(this.pageCounter=this.totalCount/this.size,this.pageCounter++,this.xCount=Math.floor(this.pageCounter))},selectedRecords(){console.log("event>>",this.page,this.size),this.$emit("select-size",{page:this.page,size:this.size}),this.checkMode()}}},Mc=Lc,Hc=(0,P.Z)(Mc,Oc,qc,!1,null,null,null),Xc=Hc.exports,Vc=function(){var e=this,t=e._self._c;return t("div",[t("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file"},on:{change:e.onFileChanged}})])},Kc=[],Yc={name:"index",components:{Button:ps},computed:{...(0,f.Se)({token:"auth/getAuthToken"})},data(){return{isSelecting:!1,selectedFile:null,csvLoader:!1}},mounted(){},created(){},computed:{},methods:{handleFileImport(){this.isSelecting=!0,window.addEventListener("focus",(()=>{this.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},async onFileChanged(e){try{this.csvLoader=!0,this.selectedFile=e.target.files[0],this.validation(),this.$papa.parse(this.selectedFile,{complete:async e=>{try{let t=this.modifyData(e);await this.apiCall(t),this.$store.dispatch("xeroForm/getAccountItems",!0),this.userResponse("success")}catch(t){this.userResponse("error",t)}}})}catch(t){this.userResponse("error",t)}},validation(){if("text/csv"!==this.selectedFile?.type)throw new Error("File type is not csv")},modifyData(e){let t=[],s={};return e.data.slice(1).forEach((e=>{s={account_name:e[0],account_description:e[1],account_type:e[2],items:this.conversion(e,3)},t.push(s)})),t},conversion(e,t){let s=e.slice(t).filter((e=>Boolean(e)));return s},userResponse(e,t="Csv Updated"){p.$emit("show-snackbar",{text:t,type:e}),this.isSelecting=!1,this.selectedFile=null,this.csvLoader=!1},async apiCall(e){var t={method:"post",url:`${ie.createAccountItems}`,data:{accounts:e},headers:{Authorization:this.token}};return await v()(t)}}},Qc=Yc,Gc=(0,P.Z)(Qc,Vc,Kc,!1,null,"064dae52",null),Jc=Gc.exports,ed=function(){var e=this,t=e._self._c;return t("div",[t(_.Z,{attrs:{cols:"3"}},[t("div",{staticClass:"d-flex"},[t(w.Z,{staticClass:"ml-3 mt-4",staticStyle:{width:"24.54%"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",dense:""},on:{input:function(t){return e.inputElement(t)}}})],1)])],1)},td=[],sd={name:"Search",methods:{inputElement(e){this.$emit("search-input",e)}}},ad=sd,od=(0,P.Z)(ad,ed,td,!1,null,null,null),id=od.exports,nd=a(296),rd={name:"ItemsAndAccounts",components:{AppBar:Re,SnackBar:U,NavigationBar:we,CreateAccounts:Uc,UpdateAccounts:Wc,Pagination:Xc,Search:id,CsvFeature:Jc},computed:{...(0,f.Se)({accountItems:"xeroForm/getAccountItems",total:"xeroForm/getTotalItems"})},async mounted(){this.paginate["isAdmin"]=!0,await this.$store.dispatch("xeroForm/getAccountItems",this.paginate),this.loadTable=!1},data:()=>({loadTable:!0,paginate:{size:10,page:1,lastPage:10,total:0},selectedItem:{},headers:[{text:"Account Name",value:"accountName",width:"350px"},{text:"Account Type",value:"accountType"},{text:"Items",value:"itemIds"},{text:"Created At",value:"createdAt"},{text:"Actions",value:"actions",sortable:!1}],accountsDialog:!1,editAccountsDialog:!1,searchObj:{}}),watch:{selectedItem(){return this.selectedItem}},methods:{editAccountDialogBox(e){this.editAccountsDialog=!0,this.selectedItem=e},getAccountitems(e){console.log("event get in accounts items>>",e),e.page||(e.page=1),e["isAdmin"]=!0,this.searchObj&&(e["search"]=this.searchObj["search"]),console.log(e),this.loadTable=!0,this.$store.dispatch("xeroForm/getAccountItems",e).then((t=>{this.paginate.size=e.size,this.paginate.page=e.page,this.loadTable=!1})).catch((e=>{console.log(e),this.loadTable=!1}))},debounceInput:(0,nd.debounce)((async function(e){this.loadTable=!0,this.searchObj["search"]=e,this.searchObj["isAdmin"]=!0,this.searchObj["page"]=1,this.searchObj["size"]=this.paginate.size,await this.$store.dispatch("xeroForm/getAccountItems",this.searchObj),this.loadTable=!1}),700)}},ld=rd,cd=(0,P.Z)(ld,Zc,Ac,!1,null,"aadcdaa4",null),dd=cd.exports,ud=function(){var e=this,t=e._self._c;return t("div",[t("SnackBar"),t("NavigationBar"),t("AppBar"),t("AddNewItem",{attrs:{dialog:e.itemDialog},on:{closeItemDialog:function(t){e.itemDialog=!1}}}),t("Search",{on:{"search-input":e.debounceInput}}),[t(x.Z,{staticClass:"text-capitalize mt-3 ml-3",attrs:{icon:"",depressed:"",color:"appColor",outlined:"",small:""},on:{click:function(t){e.itemDialog=!0}}},[t(A.Z,{attrs:{small:""}},[e._v(" mdi-plus ")])],1)],t(Ro.Z,{attrs:{headers:e.headers,items:e.allItems,loading:e.loadTable,"hide-default-footer":!0,"server-items-length":e.total?e.total:e.paginate.total,itemsPerPage:e.paginate.itemsPerPage},scopedSlots:e._u([{key:"item.createdAt",fn:function({item:s}){return[t("div",{staticClass:"font-style-paragraph"},[e._v(" "+e._s(e._f("formatDate")(s.createdAt))+" ")])]}}],null,!0)}),t("Pagination",{attrs:{itemsPerPage:e.paginate.size,page:e.paginate.page,pageCount:e.paginate.lastPage,totalCount:e.total?e.total:e.paginate.total},on:{"next-page-change":function(t){return e.fetchItems(t)},"prev-page-change":function(t){return e.fetchItems(t)},"select-size":function(t){return e.fetchItems(t)}}})],2)},pd=[],md=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("Snackbar"),t("div",{staticClass:"text-center"},[t(Dt.Z,{staticClass:"dialog-class",attrs:{persistent:"","max-width":"600px","content-class":"dialog-class",origin:"right","open-delay":"3"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(It.Z,{staticClass:"card-class"},[t(He.EB,{staticClass:"lighten-2 backgroundLightColor font-style-heading"},[e._v(" Add Item "),t($e.Z),t(A.Z,{on:{click:function(t){return e.closeDialog()}}},[e._v("mdi-close")])],1),t(as.Z),t(pa.Z,{ref:"form"},[t(He.ZB,[t($s.Z,[t(b.Z,[t(_.Z,{attrs:{cols:"12"}},[e._v(" "+e._s(e.fields.label)+" "),t(w.Z,{attrs:{dense:"",required:""},model:{value:e.fields.value,callback:function(t){e.$set(e.fields,"value",t)},expression:"fields.value"}})],1)],1),t("small",{staticClass:"font-style-paragraph"},[e._v("*indicates required field")])],1)],1),t(He.h7,{staticClass:"px-4"},[t($s.Z,[t(b.Z,{staticClass:"mx-1 pb-2"},[t($e.Z),t(x.Z,{staticClass:"appColor--text text-capitalize mx-1",attrs:{depressed:""},on:{click:function(t){return e.closeDialog()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}}},[e._v(" Cancel ")]),t(x.Z,{staticClass:"white--text text-capitalize mx-1",attrs:{depressed:"",loading:e.loader,color:"appColor"},on:{click:function(t){return e.createItem()}}},[e._v(" Add ")])],1)],1)],1)],1)],1)],1)],1)],1)},hd=[],gd={name:"AddNewItem",props:["dialog"],components:{Snackbar:U},data(){return{loader:!1,fields:{label:"Item Name*",key:"itemName",value:""}}},methods:{closeDialog(){this.$emit("closeItemDialog"),this.emptyFields()},async createItem(){this.loader=!0;try{if(!this.fields.value)throw"Item name is required";await this.$store.dispatch("xeroForm/createitemsToXero",this.fields.value),this.loader=!1,p.$emit("show-snackbar",{text:"New item is created",type:"success"}),this.closeDialog()}catch(e){this.loader=!1,p.$emit("show-snackbar",{text:e?.response?.data?.data?e.response.data.data:e,type:"error"})}},emptyFields(){this.$refs.form.reset()}}},fd=gd,kd=(0,P.Z)(fd,md,hd,!1,null,null,null),yd=kd.exports,vd={name:"AllAccountsItems",components:{AppBar:Re,SnackBar:U,NavigationBar:we,AddNewItem:yd,Pagination:Xc,Search:id},computed:{...(0,f.Se)({allItems:"xeroForm/getAllItems",total:"xeroForm/getTotalItems"})},async mounted(){await this.$store.dispatch("xeroForm/getItemsFromXero",this.paginate),this.loadTable=!1},data:()=>({loadTable:!0,paginate:{size:10,page:1,lastPage:10,total:0},headers:[{text:"Item Name",value:"itemName",width:"400px"},{text:"Created At",value:"createdAt"}],itemDialog:!1,searchObj:{}}),methods:{fetchItems(e){console.log("event in fetch items>>",e),e.page||(e.page=1),this.loadTable=!0,this.searchObj&&(e["search"]=this.searchObj["search"]),this.$store.dispatch("xeroForm/getItemsFromXero",e).then((t=>{this.paginate.size=e.size,this.paginate.page=e.page,this.loadTable=!1})).catch((e=>{console.log(e),this.loadTable=!1}))},debounceInput:(0,nd.debounce)((async function(e){this.loadTable=!0,this.searchObj["search"]=e,this.searchObj["page"]=this.paginate.page,this.searchObj["size"]=this.paginate.size,await this.$store.dispatch("xeroForm/getItemsFromXero",this.searchObj),this.loadTable=!1}),700)}},Cd=vd,xd=(0,P.Z)(Cd,ud,pd,!1,null,null,null),_d=xd.exports;i.ZP.use(C.ZP);const bd=[{path:"/login",name:"Login",component:z,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a&&s(),a?s("superadmin"===o?{name:"Accountants"}:{path:"/"}):s()},meta:{name:"AccountingBot"}},{path:"/",name:"Dashboard",component:Si,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"!==o?s():s({name:"Accountants"}):s({name:"Login"})}},{path:"/accountants",name:"Accountants",component:vr,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"/clients",name:"Clients",component:Rr,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"/workspaces",name:"Workspaces",component:$l,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"/tickets",name:"Tickets",component:Kl,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"/supervisor",name:"Supervisor",component:Tc,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"/all-items",name:"AllAccountsItems",component:_d,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"/account-items",name:"ItemsAndAccounts",component:dd,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s():s({name:"Dashboard"}):s({name:"Login"})}},{path:"*",name:"Remaining Routes",beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];s(a?"superadmin"!==o?{name:"Dashboard"}:{name:"Accountants"}:{name:"Login"})},meta:{name:"AccountingBot"}},{path:"/supervisor-ticketpool",name:"SupervisorTicketpool",component:tn,beforeEnter:(e,t,s)=>{const a=Qd.getters["auth/getAuthToken"],o=Qd.getters["auth/getUserRole"];a?"superadmin"===o?s({name:"Accountants"}):"supervisor"===o?s():s({name:"Dashboard"}):s({name:"Login"})}}],wd=new C.ZP({mode:"history",base:"/",routes:bd});var Td=wd;v().defaults.withCredentials=!0;const Zd=()=>({authToken:"",user:{},workspaces:[],users:[],tickets:{},currentWorkspace:{},onlineStatus:!1}),Ad=Zd(),Sd={getAuthToken(e){return e.authToken},getUser(e){return e.user},getTickets(e){return e.tickets},getUserRole(e){return e.user.role},getUsers(e){return e.users},getAccountantUsers(e){return e.users.filter((e=>"accountant"===e.role))},getSupervisorUsers(e){return e.users.filter((e=>"supervisor"===e.role))},getClientUsers(e){return e.users.filter((e=>"client"===e.role))},getWorkspaces(e){return e.workspaces},getCurrentWorkspace(e){return e.currentWorkspace},getOnlineStatus(e){return e.onlineStatus}},Id={setOnlineStatus(e,t){e.onlineStatus=t},addAuthToken(e,t){e.authToken=t},addWorkspaces(e,t){e.workspaces=[...t]},addTickets(e,t){e.tickets=t},addCurrentWorkspace(e,t){e.currentWorkspace=t},addUser(e,t){e.user=t},addUsers(e,t){e.users=t},logout(e){Object.assign(e,Zd())}},Dd={async resendEmail(e,t){return new Promise(((e,s)=>{v().get(`${ie.resendEmail}${t}`).then((t=>{e(t)})).catch((e=>{s(e)}))}))},async signUp({commit:e},t){return new Promise(((e,s)=>{v().post(ie.signUp,t).then((t=>{e(t.data)})).catch((e=>{s(e)}))}))},async selectWorkspace({state:e,commit:t},s){return new Promise(((a,o)=>{v().get(`${ie.selectWorkspace}${s._id}`,{headers:{Authorization:e.authToken}}).then((e=>{t("addCurrentWorkspace",e.data.workspace),a(!0)})).catch((e=>{console.log(e.message),o(e)}))}))},async login({commit:e,state:t},s){return new Promise(((a,o)=>{v().post(ie.login,s).then((s=>{if("accountant"===s.data.data.user.role||"superadmin"===s.data.data.user.role||"supervisor"===s.data.data.user.role){const o=s.data.data.user.role;t.onlineStatus="supervisor"!=o,e("addAuthToken",`Bearer ${s.data.token.toString()}`),e("addUser",s.data.data.user),a(!0)}o("Nor client not employee")})).catch((e=>{o(JSON.parse(e.request.response).data)}))}))},async getUsers({commit:e,state:t},s){v().get("/user/",{headers:{Authorization:t.authToken}}).then((t=>{e("addUsers",t.data.users)})).catch((e=>{console.log(e.message)}))},async getWorkspaces({commit:e,state:t},s){v().get(ie.getWorkspaces,{headers:{Authorization:t.authToken}}).then((t=>{e("addWorkspaces",t.data.workspaces)})).catch((e=>{console.log(e.message)}))},async getTickets({commit:e,state:t},s){v().get(`${ie.getTickets}?page=${s}`,{headers:{Authorization:t.authToken}}).then((t=>{e("addTickets",t.data)})).catch((e=>{console.log(e.message)}))},async getWorkspacesForSpecificUser(e,t){const{commit:s,state:a}=e;v().get(`${ie.getWorkspacesForSpecificUser}?userId=${a.user._id}`,{headers:{Authorization:a.authToken}}).then((e=>{if(0!==e.data.workspaces.length){let a=e.data.workspaces.map((e=>e.workspaceId));a=a.filter((e=>e)),s("addWorkspaces",a),1==t?.ascSort?s("addCurrentWorkspace",a[0]):!1===t?.ascSort&&s("addCurrentWorkspace",a[a.length-1])}Td.push({path:"/"})})).catch((e=>{console.log(e.message)}))},async forgotPassword({commit:e,state:t},s){return new Promise(((e,t)=>{v().post(ie.forgotPassword,s).then((t=>{e(t)})).catch((e=>{t(e)}))}))},async setPassword({commit:e,state:t},s){return new Promise(((e,t)=>{v().post(ie.resetPassword,s).then((t=>{e(t)})).catch((e=>{t(e)}))}))},async updateSupervisor({commit:e,state:t,getters:s,dispatch:a},o){return new Promise(((e,i)=>{v().post(ie.updateSupervisor,o,{headers:{Authorization:t.authToken}}).then((t=>{200==t.status?s.getUsers.find((e=>e._id===o.id))&&(a("getUsers"),e(!0)):console.log(t)})).catch((e=>{console.log(e)}))}))}};var $d={namespaced:!0,state:Ad,mutations:Id,actions:Dd,getters:Sd};const Fd=()=>({tickets:[],faq:[],ticket:{},totalItems:"",search:"",status:"All",page:"",messages:[]}),Pd=Fd(),Ed={getMessages(e){return e.messages},getTickets(e){return e.tickets},getFaq(e){return e.faq},getTicket(e){return e.ticket},getTotalItems(e){return e.totalItems},getSearch(e){return e.search},getStatus(e){return e.status},getPage(e){return e.page}},Ud={addTickets(e,t){e.tickets=t},updateFaq(e,t){let s=e.faq.findIndex((e=>e._id==t._id));i.ZP.set(e.faq,s,t)},setFaq(e,t){e.faq=t},logout(e){Object.assign(e,Fd())},setTicketAsReadable(e,t){i.ZP.set(e.faq,e.tickets.findIndex((e=>e.ticket_no==t.ticket_no)),t)},setTotalItems(e,t){e.totalItems=t},setStatus(e,t){e.status=t},setPage(e,t){e.page=t},setSearch(e,t){e.search=t},setTicket(e,t){e.ticket=t},setMessages(e,t){e.messages=t}},jd={getAllMessagesByTicketId({commit:e,rootState:t},s){const{authToken:a}=t.auth;return new Promise(((t,o)=>{v().get(`${ie.getAllMessagesByTicketId}?ticketId=${s.id}`,{headers:{Authorization:a}}).then((s=>{e("setMessages",s.data.messages),t(!0)})).catch((e=>{o(e)}))}))},updateFaq({commit:e,state:t},s){return new Promise(((a,o)=>{const i={type:s.type,questions:s.questions};v().put(`${ie.updateFaq}${s._id}`,i,{headers:{Authorization:t.authToken}}).then((t=>{e("updateFaq",s),a(!0)})).catch((e=>{o(e)}))}))},getFaq({commit:e,state:t}){return new Promise(((s,a)=>{v().get(ie.getFaq,{headers:{Authorization:t.authToken}}).then((t=>{e("setFaq",t.data.data),s(!0)})).catch((e=>{a(e)}))}))},getTasks({commit:e,rootState:t,state:s},a){const o={page:a,search:s.search,status:[s.status]};void 0===a&&(o["page"]=1),""===s.search.trim()&&(o["search"]=null),"All"===s.status&&delete o.status;const{currentWorkspace:i,authToken:n}=t.auth;if(i&&i!={})return new Promise(((t,s)=>{v().get(`${ie.getTasks}${i["workspaceId"]}`,{params:o,headers:{Authorization:n}}).then((s=>{const{tickets:a,count:i}=s.data;a&&(e("addTickets",a),e("setTotalItems",{count:i,pageNo:o["page"]}),t(!1)),t(!0)})).catch((e=>{s(e)}))}))},setTicketAsReadable({commit:e,rootState:t,state:s},a,o){return new Promise(((i,n)=>{const r={page:o,search:s.search,status:s.status};void 0===o&&(r["page"]=1),""===s.search.trim()&&(r["search"]=null),"All"===s.status&&(r["status"]=null);const{currentWorkspace:l,authToken:c}=t.auth;l&&l!={}&&v().post(`${ie.setTicketAsReadable}?workspaceId=${l["workspaceId"]}&status=${r.status}&page=${r.page}`,{ticketId:a._id},{headers:{Authorization:c}}).then((t=>{const{tickets:s,count:a}=t.data;s&&(e("addTickets",s),e("setTotalItems",{count:a,pageNo:r["page"]}),i(!1)),i(!0)})).catch((e=>{n(e)}))}))}};var Rd={namespaced:!0,state:Pd,mutations:Ud,actions:jd,getters:Ed};const Bd=()=>({userWorkspaces:[],workspaces:[],workspaceswithFilter:[]}),zd=Bd(),Nd={getUserWorkspaces(e){return e.userWorkspaces},getWorkspaces(e){return e.workspaces},getworkspacesWithFilter(e){return e.workspaceswithFilter}},Wd={addUserWorkspaces(e,t){e.userWorkspaces=t},addWorkspaces(e,t){e.workspaces=t},addWorkspaceswithFilter(e,t){e.workspaceswithFilter=t},logout(e){Object.assign(e,Bd())}},Od={async addUserWorkspaces({commit:e},{token:t,workspace:s,sentId:a,user:o}){try{if(!o)return;return new Promise(((e,i)=>{const n={workspaceId:s?._id,userRole:a,userId:o};v().post(ie.addUserWorkspaces,n,{headers:{Authorization:t}}).then((function(t){e(t)})).catch((function(e){i(e.message)}))}))}catch(i){return i.message}},async addWorkspaces({commit:e},t){e("addUserWorkspaces",t)},async getworkspacesWithFilter(e,t){v().get(ie.getworkspacesWithFilter+t,{headers:{Authorization:e.rootState.auth.authToken}}).then((t=>{console.log(t),e.commit("addWorkspaceswithFilter",t.data.workspaces)})).catch((e=>{console.log("error: getWorkspace: ",e.message)}))},async getWorkspaces({commit:e},t){v().get(ie.getWorkspaces+t).then((t=>{e("addWorkspace",t.data.workspaces)})).catch((e=>{console.log("error: getWorspace: ",e.message)}))},async create(t,s){return new Promise(((a,o)=>{v().post(ie.createUser,s,{headers:{Authorization:t.rootState.auth.authToken}}).then((t=>{t.data.user?a(!0):(console.log(e),o(JSON.parse(e.request.response).message))})).catch((e=>{o(e.response.data.error.errors[0].msg)}))}))},async deleteUser(e,t){return new Promise(((s,a)=>{v()["delete"](ie.deleteUser,{headers:{Authorization:e.rootState.auth.authToken},data:t}).then((e=>{p.$emit("show-snackbar",{text:"Successfully Deleted",type:"success"}),s(!0)})).catch((e=>{p.$emit("show-snackbar",{text:"Something bad happened",type:"error"}),a(e)}))}))},async unAssignWorkspace(e,t){return new Promise(((s,a)=>{v()["delete"](ie.unAssignWorkspace,{headers:{Authorization:e.rootState.auth.authToken},data:t}).then((e=>{s(e)})).catch((e=>{a(e)}))}))}};var qd={namespaced:!0,state:zd,mutations:Wd,actions:Od,getters:Nd};const Ld=()=>({invoices:[],pdfLink:"",attachementUrl:"",categories:"",workspaceId:"",draftCheck:!1,accountItems:[],allItems:[],xeroHashMaps:{accountsHashmap:{ids:{},all:[]},itemsHashmap:{ids:{},all:[]}},allAccountsHashmap:[],allItemsHashmap:[],moreItems:[],allItemsUp:[],accountsUp:[],page:1,totalItems:10,noOfRecords:10}),Md=Ld(),Hd={getDraftCheck(e){return e.draftCheck},getInvoices(e){return e.invoices},getPdfLink(e){return e.pdfLink},getAttachmentUrl(e){return e.attachementUrl},getCategories(e){return e.categories},getWorkspaceId(e){return e.workspaceId},getAccountItems(e){return e.accountItems},getXeroHashMaps(e){return e.xeroHashMaps},getAccountsUp(e){return e.accountsUp},getAllItems(e){return e.allItems},getMoreItems(e){return e.moreItems},getTotalItems(e){return e.totalItems},getNoOfRecords(e){return e.noOfRecords},getPage(e){return e.page}},Xd={setTotalItems(e,t){e.totalItems=t},setPage(e,t){e.page=t},setNoOfRecords(e,t){e.noOfRecords=t},addDraftCheck(e,t){e.draftCheck=t},addNewInvoice(e,t){e.invoices.invoices.push(t)},removeInvoiceForm(e,t){e.invoices.invoices.splice(t,1)},logout(e){Object.assign(e,Ld())},setPdfLink(e,t){e.pdfLink=t},setAttachementUrl(e,t){e.attachementUrl=t},addInvoices(e,t){e.invoices=t},addCategories(e,t){e.categories=t},setWorkspaceId(e,t){e.workspaceId=t},performActionOnInvoiceTypeChanged(e,t){if(e.invoices.invoices&&e.invoices.invoices[t]&&Array.isArray(e.invoices.invoices[t].lineItems)){e.invoices.invoices[t].lineItems.map((e=>{delete e.taxAmount,e.taxType="NONE"}))}},setAccountsToXero(e,t){e.accountsUp=t},setAccountItems(e,t){e.accountItems=t},addAccountItems(e,t){Array.isArray(t)&&t[0]&&e.accountItems.unshift(t[0])},setAllItems(e,t){e.allItems=t},addMoreItems(e,t){e.allItemsUp=e.moreItems.concat(t),e.moreItems=e.allItemsUp},addNewItem(e,t){e.allItems.unshift(t)},setAccountItemsHashMaps(e,t){const s={ids:{},all:[]},a={ids:{},all:[]};if(t){t.forEach((e=>{s.ids[e._id]={name:e.accountName,items:e.itemIds,type:e.accountType},s.all.push({id:e._id,name:e.accountName,type:e.accountType})}));for(const e in s.ids){const t=s.ids[e];t.items=t.items.map((e=>{if(!a.ids[e._id]){const t=e.accountIds.map((e=>({name:s.ids[e]?.name,id:e,type:s.ids[e]?.type})));a.ids[e._id]={name:e.itemName,accounts:t},a.all.push({name:e.itemName,id:e._id})}return{name:e.itemName,id:e._id}}))}e.allAccountsHashmap=e.xeroHashMaps.accountsHashmap.all.concat(s.all),e.allItemsHashmap=e.xeroHashMaps.itemsHashmap.all.concat(a.all),Object.assign(e.xeroHashMaps.itemsHashmap.ids,a.ids),Object.assign(e.xeroHashMaps.accountsHashmap.ids,s.ids),e.xeroHashMaps.accountsHashmap.all=e.allAccountsHashmap,e.xeroHashMaps.itemsHashmap.all=e.allItemsHashmap}else e.xeroHashMaps={accountsHashmap:{ids:{},all:[]},itemsHashmap:{ids:{},all:[]}},console.log("store hashmap>>",e.xeroHashMaps.itemsHashmap,e.xeroHashMaps.accountsHashmap)}},Vd={async getInvoices({commit:e,rootState:t},s){return new Promise(((a,o)=>{e("setWorkspaceId",s.workspaceId),v().get(`${ie.getInvoices}?fileUrl=${s.url}&botToken=${s.token}`).then((async o=>{const{invoices:i}=o.data;await ms(s,i,t),e("addInvoices",i),a(!0)})).catch((e=>{o(e)}))}))},async getInvoicesWithoutAttachment({commit:e,rootState:t},s){e("setWorkspaceId",s.data.workspaceId),await ms(s.data,s.invoice,t),e("addInvoices",s.invoice)},async submitInvoices({commit:e,rootState:t,state:s,dispatch:a},o){const i=/^%|%$/g;let n=JSON.parse(JSON.stringify(t.xeroForm.invoices)),r=JSON.parse(JSON.stringify(t.xeroForm.invoices)),l=n.invoices;const c={},d=[];for(let g=0;g<l.length;g++){console.log(d);const{subTotal:e,totalTax:t,total:s,...a}=l[g];if(a.name=a.hasOwnProperty("name")?a.name:"",!a.invoiceNumber)return Promise.reject("Invoice number is required");if(!a.name)return Promise.reject("Name is required");if(!a.date)return Promise.reject("Created at is required");if(!a.dueDate)return Promise.reject("Due date is required");if(Array.isArray(a.lineItems))for(let o=0;o<a.lineItems.length;o++){const e=a.lineItems[o];if(e.accountCode?.name&&!c[e.accountCode.name]&&(d.push({name:e.accountCode.name,type:e.accountCode.type}),c[e.accountCode.name]=!0),console.log("uniqueAccounts and uniqueItems>>>",d),e.itemCode&&!e.accountCode)return p.$emit("show-snackbar",{text:"Account code is required",type:"error"}),Promise.reject("Account code is required");if(!e.description)return Promise.reject("Description is required");if(""==e.disc?e.disc="0":e.disc,""==e.taxAmount?e.taxAmount="0":e.taxAmount,!e.quantity)return Promise.reject("Quantity is required");if(!e.unitAmount)return Promise.reject("Unit Price is required");""===e.itemCode&&delete e["itemCode"],e["taxAmount"]="string"===typeof e["taxAmount"]?e["taxAmount"].replace(i,""):e["taxAmount"],"ACCREC"==a.type?e["discountRate"]="string"===typeof e.disc?e.disc.replace(i,""):e.disc:(delete e["taxRate"],delete e["discountRate"],delete e.disc)}else a.lineItems=[];if(!a.currencyCode)return Promise.reject("Currency is required")}let u={};d.length&&(u=await a("createAccountsToXero",d),p.$emit("show-snackbar",{text:"Checked Accounts",type:"success"}));const m=[],h={};for(let p=0;p<l.length;p++){const{lineItems:e}=l[p];if(Array.isArray(e))for(let t=0;t<e.length;t++){const a=e[t];console.log("curentLineItems>>>",a),a.accountCode&&(a.accountCode=u[a.accountCode.name]),a.itemCode&&!h[a.itemCode]&&(m.push({name:s.xeroHashMaps.itemsHashmap.ids[a.itemCode].name,code:`bot-${a.itemCode}`}),h[a.itemCode]=!0),a.itemCode&&(a.itemCode=`bot-${a.itemCode}`)}}return v().post(`${ie.submitInvoices}${o.workspaceId}`,{invoices:l,ticketId:o._id,draft:r,items:m},{headers:{Authorization:t.auth.authToken}}).catch((e=>{throw e?.response?.data?.message?e.response.data.message:"Error occurred"}))},async getAccountItems({commit:e,state:t},s){return new Promise(((t,a)=>{v().get(`${ie.getAccountItems}?page=${s?s.page:""}&size=${s?s.size:""}&search=${s&&s.search&&s.isAdmin?s.search:""}`).then((async a=>{s.isAdmin?e("setAccountItems",a.data.data):(e("setAccountItemsHashMaps",a.data.data),e("setPage",s.page)),e("setTotalItems",a.data.count),e("setNoOfRecords",a.data.noOfRecords),t(!0)})).catch((e=>{a(e)}))}))},async createAccountsToXero({commit:e,rootState:t,state:s},a){return v().put(`${ie.createAccountsToXero}/${s.workspaceId}`,{accounts:a},{headers:{Authorization:t.auth.authToken}}).then((e=>e.data))},async createAccountItems({commit:e,rootState:t},s){return new Promise(((a,o)=>{v().post(`${ie.createAccountItems}`,{accounts:[s],populate:!0},{headers:{Authorization:t.auth.authToken}}).then((t=>{e("addAccountItems",t.data.data),a(!0)})).catch((e=>{o(e)}))}))},async getAccountsToDb({commit:e,state:t}){return v().get(`${ie.mapAccountsTodb}/${t.workspaceId}`).then((e=>{console.log("res accounts to DB>>>>",e.data)})).catch((e=>{console.log("error>>",e)}))},async updateAccountItems({commit:e,rootState:t},s){return new Promise(((e,a)=>{v().post(ie.updateAccountItems,s,{headers:{Authorization:t.auth.authToken}}).then((t=>{console.log("updateAccountItems response>>>",t.data),e(!0)})).catch((e=>{console.log(e),a(e)}))}))},async getItemsFromXero({commit:e},t){return new Promise(((s,a)=>{v().get(`${ie.getItemsFromXero}?page=${t.page}&size=${t.size}&search=${t.search?t.search:""}`).then((a=>{t.moreItems?(e("addMoreItems",a.data.data),e("setPage",t.page)):e("setAllItems",a.data.data),a.data.metadata[0]&&(e("setTotalItems",a.data.metadata[0].total),e("setNoOfRecords",a.data.metadata[0].noOfRecords)),s(!0)})).catch((e=>{console.log("error>>",e),a(e)}))}))},createitemsToXero({commit:e,rootState:t},s){return v().post(ie.createitemsToXero,{itemName:s},{headers:{Authorization:t.auth.authToken}}).then((t=>{e("addNewItem",t.data.data)}))}};var Kd={namespaced:!0,state:Md,mutations:Xd,actions:Vd,getters:Hd},Yd=a(4702);i.ZP.use(f.ZP);var Qd=new f.ZP.Store({plugins:[(0,Yd.Z)()],modules:o});const Gd=(0,k.io)("https://dev-backend.recordme.ai/");var Jd=Gd,eu={name:"App",data:()=>({messages:"",soundClient:h,soundAccountant:g}),computed:{...(0,f.Se)({token:"auth/getAuthToken",user:"auth/getUser",currentWorkspace:"auth/getCurrentWorkspace",workspaces:"auth/getWorkspaces",tickets:"ticket/getTickets",onlineStatus:"auth/getOnlineStatus"})},mounted(){m(document);var e=this;window.addEventListener("focus",(function(){e.pauseSound(!1)}),!1)},methods:{playSound(e){if("client"===this.user.role){var t=document.getElementById("myAudioClient");e&&(t.play(),this.$store.dispatch("ticket/getTasks"))}else if("accountant"===this.user.role){var s=document.getElementById("myAudioAccountant");e&&(s.play(),this.$store.dispatch("ticket/getTasks"))}},pauseSound(e){var t=document.getElementById("myAudioClient");t.pause();var s=document.getElementById("myAudioAccountant");s.pause()},subscribe(){Jd.on("ticketAssign",(e=>{this.token&&this.onlineStatus&&null!=e&&(p.$emit("show-snackbar",{text:"New ticket received",type:"success"}),this.playSound(!0))}))}},beforeDestroy(){Jd.removeAllListeners()},created(){this.subscribe();document.addEventListener("click",(function(){document.getElementById("myAudioClient").pause(),document.getElementById("myAudioAccountant").pause()})),"accountant"===this.user.role&&document.addEventListener("beforeunload",(e=>{Jd.emit("disconnecting",this.user._id)})),p.$on("play-new-message-sound",(()=>{this.playSound(!0),p.$emit("show-snackbar",{text:"New message received",type:"success"})})),p.$on("user-status-offline",(()=>{this.pauseSound()}))}},tu=eu,su=(0,P.Z)(tu,l,c,!1,null,null,null),au=su.exports,ou=a(1705);i.ZP.use(ou.Z);var iu=new ou.Z({theme:{themes:{light:{primary:"#4DC1CF",appColor:"#4DC1CF",appLightColor:"#bee2e6",mainTextColor:"#000000",navBarTextColor:"#FFFFFF",secondaryTextColor:"#B3B3B3",backgroundColorSuccess:"#EDF4F5",pendingBackGroundColor:"#D7816A",pendingColor:"#FFFFFF",completedBackgroundColor:"#547F6D",completedColor:"#FFFFFF",backgroundLightColor:"#F6F6F6",backgroundFAQColor:"#F9F9F9",inputBackground:"#FBFAFD"}},options:{customProperties:!0}}}),nu=a(2346);const ru=(e,t)=>{p.$emit("show-notification-bar",{type:e,message:t})};var lu=a(6497),cu=a(1463);let du;i.ZP.use(cu.Z),i.ZP.prototype.$showNotificationBar=ru,i.ZP.config.productionvTip=!1;const uu=()=>v().get("/refresh-token").then((e=>(console.log("data========>",e.data.token),localStorage.setItem("token",e.data.token),Qd.commit("auth/addAuthToken",`Bearer ${e.data.token}`),e.data.token))).catch((e=>{console.log("refreshTokenSet =====>",e)})),pu="https://dev-backend.recordme.ai/";v().defaults.baseURL=pu,v().interceptors.request.use((function(e){console.log("BOI ====> ",Qd.getters["auth/getAuthToken"]);const t=Qd.getters["auth/getAuthToken"];return e.headers.Authorization=t,e})),v().interceptors.response.use((function(e){return e}),(function(e){if(403===e.response.status&&"xero"!==e?.response?.data?.name)p.$emit("show-snackbar",{text:"Token has expired",type:"error"}),Qd.commit("auth/logout"),Qd.commit("ticket/logout"),Qd.commit("user/logout"),setTimeout((()=>{Td.push("/login")}),2e3);else if(401===e.response.status&&"xero"!==e?.response?.data?.name)return console.log("SHOULD ASK FOR NEW ACCESS AND REFRESH TOKEN",e.response),du||(console.log("********* YOU CAN MAKE THE REFRESH TOKEN API CALL"),du=uu().then((e=>(du=null,console.log("***************************TOKEN =====>",e),e))),console.log("WHAAAT ====> refreshTokenPromise OUTSIDE THEN BLOCK ===> ",du)),console.log("/////////refreshTokenPromise\\\\\\\\\\\\\\ ===>"),du.then((async t=>(console.log("refreshTokenPromise ORIGINAL REQUEST THAT FAILED =====>",e.config),e.config.headers={...e.config.headers,Authorization:"Bearer "+t},console.log("UPDATED CONFIGURATIONS ==<>",e.config),console.log("*******MAKING RETRY API CALL ===>, ",e.config),v()(e.config).then((e=>(console.log("RETRY API RESPONSE =====>",e.data),e))).catch((e=>(console.log("RETRY API ERRR =====>",e),Promise.reject(e)))))));return Promise.reject(e)})),i.ZP.use(nu.Z,v());var mu=function(e,t,s){s=s||"...";var a=document.createElement("div");a.innerHTML=e;var o=a.textContent;return o.length>t?o.slice(0,t)+s:o};i.ZP.filter("truncate",mu),i.ZP.filter("formatDate",(function(e){return e?nt()(e).format("YYYY MM DD"):"N/A"})),i.ZP.filter("formatTime",(function(e){return e?nt()(e).format("hh:mm A"):"N/A"})),i.ZP.filter("msgDate",(function(e){return e?nt()(e).format("DD/MM/YYYY hh:mm:ss"):""})),i.ZP.use(lu.S),new i.ZP({router:Td,store:Qd,vuetify:iu,render:e=>e(au)}).$mount("#app")},7132:function(e,t,s){"use strict";e.exports=s.p+"media/mixkit.ff1f8eec.wav"},4429:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHUAAAAaCAYAAACJphMzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAArGSURBVHgB7VoHbFTZFT0ez3jcMB73gssaG3ezmGLhwFI2dNGrFCHagoQQCkKE0CVq0IKEFkFAICQEiBC6aEvHwaHEgABT1mBjjHubwb2NbXLvs2d2+owh2ZWMj/Tl7//+f/P+Pffde+6dsftEQBc6E1Ik6EKnQxepnRB6pLa0tBgdXdEZePbsGaZPn4709HS962yZFrIPHx2xkqXndMesHeYg1ZyUlpZiz549Rjc4OMjg7e2D6OhoxMfHQ6FQ4GtDY1MjSkpK0NjYqHf99cdK/PyhUJyPCg5AvEd3m+bjZ/hZxtyoMHg5yrVj7yprcP59ntU5HCQSzI/pCVep1GhMe6WyshIpKSkICAiAp6en9oa6ujrcvZuKpqYmREZGYuXKlejZsye+KpjZFGX1DfhPcbk4r1U3E6nxsAY17bCz2bmobFSL/2dGhOiNlze0zent5AiFo4PZeRztJWhqadVh8FcYXZo1axYmTZqkd4099OLFizh06BDWrVsn/jo7O6MLbegul+GlsgLZVTUIc3O1eG9Kfokg1I2eqWon1hSm9gzC9z388DkwEkqmnFIul2PatGkYO3YsioqK8Pr1a3xNsLMzM9BurCRfLzjLpLiVXwxLYH2SWlgKd7kD4jyspLEvkDJGpNpZuDkhIQGtra2C2N8DNc3NuFNQgidlKpx+l0ehqhG/Bczat91Y4e5uCHV1QVqJElVNzebuRibly6zKKvzB3xsK2qn/L3SopPn48aP4261bN5PjnJfv37+P69evC8WoVqttmjc/P1/k85s3byI7O9us4paTOPBzcUK6qhKRZMj08gqrc7MW0Agcdsi3b9/i2rVryMrKMrq3uroaDx4+EOOsdLXrN8dq+3XOYcOC/FDR2ITHZUqYw78KS6Bu/WRbWLXDZ0Nqy01s5NzcXJw/fx5ubm7o1auX3nhFRQX27t0riJGRGpPY2wtjSmUyzJ83D1OmTIFEIjGak8P4zp078eHDBzg5OVGYsxPCzN/fH0uWLMHAgQPFNQ1kNEc0kSmX2ONabiGmUN6xhq1btwoit2zZgh0//oiMN2/EWmbPno3w8HBxT1VVFXbv3k2C8K74PBmtm9fv4uKCBQsW6AlHPfDS2okdTLvvn29zcOl9Ab4L8IHUIGYX1dWLvPuttweCXG3QI18Qfo1I5R3GHi3mJcPX19cLQh8+fCjOV61aJRSyBmVlZdi2bZvYYfPnz8fgQYPg6OwElVIlPH7//v2ora3FnDlz9D6HDciGDgkJwdq1axEbGyuMzbv25MmT2LFjB/bt2wc/P32vrqfaWUL2+kTHfVKJjuRAbL4mWjP/5fzm4/RricB6gCPIhg0bBIkLfvhBOKaHh4cYVyqVQvyxY7FIHD58OFxdXcWaX758iWPHjum9rxHaubMnEr+n3Xo6Kxe/UCSJ93TXu+0FEcrE/ikyDLaAU0wpKWFzSPBSIFZhuoQyIvX27dvi0AUbYcCAAZg4caLIqxow6ZcuXRKhavv27ejXr592Z3l5eiEiIkKEtDNnzmDIkCEIDQ0VY2xkJpvDODuEj4+Pdk4+/+abb8Q9vr6+2uvvSFn+u6gMviT1PamuG0t1oSuJk7rmFjQSoV4kPji08T0D/bzg7+wonmNHqampEYSy8zg46JcJhw8fxqtXr7B+/XpBqD05iVi/l5dwuPDwCCxb9mfYgu8CfHExpwA38or1SK2nNfK6Qijvxnm42TTXo1KlOMzBkSKizaTOo3A5cuRIcX716lXhqXPnzhXq1xDV1VW4cuUKkpMHon///kbjTPDMmTPFPGlpaVpSeZcWFBRgxYoVeoRqwA0O3SaH8Nq6RkwO60FFexXSqXAvKmwgoUT5knYuhyr2pT7kvROD/XHol2xEKdwwKTRQuw4Ot4aEcgR69OgR4uLiMGLECJhCZGQvTJ06FUeOHIE1cBPhW1pDWkk5KprUcHdoE0NZldXIoHXPoUaDs9SmjCcaC0MDfc2Oy+zMyyGjT3AnYwYGthmDCblx4wZOnPgHEhMTERamHzqKi0tEJ4q7TUycKTS0hxA2oAbPnz8XeSspKQnW0ECkPSNBND08GH9//Q65NbUi4rW2j9t94pDrIdpm94rKEU75KoF2CYdDFeVFBodgw7UzOHUUFxdj3LhxFtcwdOhQHD161HjAIO9xWhhJTvWEdthVyvmzwtsaC7zjFORQiV4esBUORJpTe9ToKIxI1U3vnFsWLVqEjRs3ipdavXq1nrezqOEQ/PTpU2RmZpr7DOEkLIQ04Hzl6OgoiLWERuqYnMjMFTnyAXn/ByI0xr07RvXwxe5XmRRuW9FCIXdEoB8yVBX4mTo8+TV1og4spXNJ+9vwmg2FmmYdrB+6d7fc3uP0Y2/KwCYUajSFRH8XZ6QVKzE1LJhSQwsel6rQ28sdfs5y/BawGgsGkfBJTk4WeZZzzuDBg7VjbAw21oQJE7Bw4ULYCnd3d+EQfGgEiylwCPOnEoZbZ3JynloqGdykEmrJqaEi8tTtgm5Z6mNO8OJcRSFZQaRyycPkWgKTxetXqVQW72Mx1dxsov40oVDZdcaGBOAAOd1j2qGV9A7VtN5hVMbY2XWgTvmCksZqncpezjmVc9zun34S8l8DvhYVFSUUs7nakq8bGoRLFd4hXJdagpziWSWF0Fp1C3yIoHoy0KX3+dj2+KUo3mdR33RRXAT6eCtEn7QH7ZA/kgKto5A9wNfTql2CgoLEcevWLYs19blz50wP6JQ0ukiiz5bTzr5JHaa71CzpRQ4W5d4NHcL/sqNkai5u5LNYKCsvp/x6QnuddxyLKlaPp0+fNnqOCT179qyoFTnUacC5lI156tQpIZgMwYr53r17Yqf19lSglsgMpFzJQoTtGEUhbkP/3tQfDcYI2gF/7RODvyUnYklCJF5QGO5NOVVqw67g+nPMmDHIy8sTazHlmFzKGVYDejDxMSyGuMGQXv5RqPYkH8+O7dIvhMWcqovJkyeL5gKXJxyCWRwxxo8fL2pLrilfvHiB0aNHC0XLIoTrVFa6rCxZrGjA55s3bxY5msP2jBkz0LdvX5Fnc3JycPz4cSFguKERSQInMDYc53Py8ZfEWLjI7KGmXFtATvKkXCma461EBtssmEqGKWFB4mspW8HO+oYaEgcPHkRGRgZGjRolSimOSKmpqaI7xu904cIFdATcgLieVwQXIrifjyc6intUg+dSitESovE3nf+HkbYI7eZi9KyWVM4twcHBQhyZAl/nBsKBAwdw+fJl0VVi8cBiZ/HixSI33rlzB5s2bRKKl8M213lLly4VOddQaHAtumvXLmFMno9LJw6BXLvGxMRg+fLlWsXK9eiEkEA8ohZcQ3MrNc/tEUzdnmj6/tKaQuS8z0LNnChjB1uzZo1YKzsgOxs3Wfh9+R25acHPcorhDpMunOylCKCc7yIzlib+1IBpq5edTfZ5u1O5w88aliYy6pbxdSXZUGmh+cDo48NlnzGpdpofnnFbjIt0XrjurtIF38r9Xw4lpr4s53Yh7zAmlY3CHm+uT6wB/7qCv4Aup9DO8zMJ3MExrCk/F7zj+DNs+XKf119YWKh1LnYGtgW/D4s6FlZSnTqTu1j8PSo7ncyUuqamg4x0ganIwZ2xBhp3I3LtdUIz193cULEF7Ewm5k6x6/o1YadD168JOyO6SO2E4ASxEV3oTMj5L9jHsU1G4ySmAAAAAElFTkSuQmCC"},9290:function(e,t,s){"use strict";e.exports=s.p+"img/no-request.b72d5156.png"},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}},s={};function a(e){var o=s[e];if(void 0!==o)return o.exports;var i=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,s,o,i){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],i=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<n&&(n=i));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var d=l(a)}for(t&&t(s);c<n.length;c++)i=n[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkaccountingbot"]=self["webpackChunkaccountingbot"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var o=a.O(void 0,[998],(function(){return a(6948)}));o=a.O(o)})();
//# sourceMappingURL=app.3d080374.js.map